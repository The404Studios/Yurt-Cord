<UserControl x:Class="VeaMarketplace.Client.Views.LoginView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             Background="Transparent">

    <UserControl.Resources>
        <BooleanToVisibilityConverter x:Key="BoolToVis"/>

        <!-- Shake Animation for errors -->
        <Storyboard x:Key="ShakeAnimation">
            <DoubleAnimationUsingKeyFrames Storyboard.TargetProperty="(UIElement.RenderTransform).(TranslateTransform.X)">
                <EasingDoubleKeyFrame KeyTime="0:0:0.05" Value="12"/>
                <EasingDoubleKeyFrame KeyTime="0:0:0.1" Value="-12"/>
                <EasingDoubleKeyFrame KeyTime="0:0:0.15" Value="10"/>
                <EasingDoubleKeyFrame KeyTime="0:0:0.2" Value="-10"/>
                <EasingDoubleKeyFrame KeyTime="0:0:0.25" Value="6"/>
                <EasingDoubleKeyFrame KeyTime="0:0:0.3" Value="-6"/>
                <EasingDoubleKeyFrame KeyTime="0:0:0.35" Value="0"/>
            </DoubleAnimationUsingKeyFrames>
        </Storyboard>

        <!-- Card Entry Animation -->
        <Storyboard x:Key="CardEntryAnimation">
            <DoubleAnimation Storyboard.TargetName="LoginCard"
                             Storyboard.TargetProperty="Opacity"
                             From="0" To="1" Duration="0:0:0.6">
                <DoubleAnimation.EasingFunction>
                    <CubicEase EasingMode="EaseOut"/>
                </DoubleAnimation.EasingFunction>
            </DoubleAnimation>
            <DoubleAnimation Storyboard.TargetName="CardTranslate"
                             Storyboard.TargetProperty="Y"
                             From="50" To="0" Duration="0:0:0.6">
                <DoubleAnimation.EasingFunction>
                    <CubicEase EasingMode="EaseOut"/>
                </DoubleAnimation.EasingFunction>
            </DoubleAnimation>
            <DoubleAnimation Storyboard.TargetName="CardScale"
                             Storyboard.TargetProperty="ScaleX"
                             From="0.95" To="1" Duration="0:0:0.6">
                <DoubleAnimation.EasingFunction>
                    <CubicEase EasingMode="EaseOut"/>
                </DoubleAnimation.EasingFunction>
            </DoubleAnimation>
            <DoubleAnimation Storyboard.TargetName="CardScale"
                             Storyboard.TargetProperty="ScaleY"
                             From="0.95" To="1" Duration="0:0:0.6">
                <DoubleAnimation.EasingFunction>
                    <CubicEase EasingMode="EaseOut"/>
                </DoubleAnimation.EasingFunction>
            </DoubleAnimation>
        </Storyboard>

        <!-- Logo Pulse Animation -->
        <Storyboard x:Key="LogoPulse" RepeatBehavior="Forever">
            <DoubleAnimation Storyboard.TargetName="LogoGlow"
                             Storyboard.TargetProperty="Opacity"
                             From="0.3" To="0.6" Duration="0:0:2"
                             AutoReverse="True">
                <DoubleAnimation.EasingFunction>
                    <SineEase EasingMode="EaseInOut"/>
                </DoubleAnimation.EasingFunction>
            </DoubleAnimation>
            <DoubleAnimation Storyboard.TargetName="LogoScale"
                             Storyboard.TargetProperty="ScaleX"
                             From="1" To="1.02" Duration="0:0:2"
                             AutoReverse="True">
                <DoubleAnimation.EasingFunction>
                    <SineEase EasingMode="EaseInOut"/>
                </DoubleAnimation.EasingFunction>
            </DoubleAnimation>
            <DoubleAnimation Storyboard.TargetName="LogoScale"
                             Storyboard.TargetProperty="ScaleY"
                             From="1" To="1.02" Duration="0:0:2"
                             AutoReverse="True">
                <DoubleAnimation.EasingFunction>
                    <SineEase EasingMode="EaseInOut"/>
                </DoubleAnimation.EasingFunction>
            </DoubleAnimation>
        </Storyboard>

        <!-- Gradient Animation - Plugin Orange Theme -->
        <Storyboard x:Key="GradientShift" RepeatBehavior="Forever">
            <ColorAnimation Storyboard.TargetName="BgGradient1"
                            Storyboard.TargetProperty="Color"
                            From="#0A0A0B" To="#111113" Duration="0:0:4"
                            AutoReverse="True"/>
            <ColorAnimation Storyboard.TargetName="BgGradient2"
                            Storyboard.TargetProperty="Color"
                            From="#18181B" To="#0A0A0B" Duration="0:0:5"
                            AutoReverse="True"/>
        </Storyboard>

        <!-- Particle Float Animation -->
        <Storyboard x:Key="ParticleFloat" RepeatBehavior="Forever">
            <DoubleAnimation Storyboard.TargetName="P1Translate"
                             Storyboard.TargetProperty="Y"
                             From="0" To="-30" Duration="0:0:4" AutoReverse="True">
                <DoubleAnimation.EasingFunction>
                    <SineEase EasingMode="EaseInOut"/>
                </DoubleAnimation.EasingFunction>
            </DoubleAnimation>
            <DoubleAnimation Storyboard.TargetName="P1Translate"
                             Storyboard.TargetProperty="X"
                             From="0" To="15" Duration="0:0:5" AutoReverse="True">
                <DoubleAnimation.EasingFunction>
                    <SineEase EasingMode="EaseInOut"/>
                </DoubleAnimation.EasingFunction>
            </DoubleAnimation>
            <DoubleAnimation Storyboard.TargetName="P2Translate"
                             Storyboard.TargetProperty="Y"
                             From="0" To="25" Duration="0:0:3.5" AutoReverse="True">
                <DoubleAnimation.EasingFunction>
                    <SineEase EasingMode="EaseInOut"/>
                </DoubleAnimation.EasingFunction>
            </DoubleAnimation>
            <DoubleAnimation Storyboard.TargetName="P2Translate"
                             Storyboard.TargetProperty="X"
                             From="0" To="-20" Duration="0:0:4.5" AutoReverse="True">
                <DoubleAnimation.EasingFunction>
                    <SineEase EasingMode="EaseInOut"/>
                </DoubleAnimation.EasingFunction>
            </DoubleAnimation>
            <DoubleAnimation Storyboard.TargetName="P3Translate"
                             Storyboard.TargetProperty="Y"
                             From="0" To="-20" Duration="0:0:5" AutoReverse="True">
                <DoubleAnimation.EasingFunction>
                    <SineEase EasingMode="EaseInOut"/>
                </DoubleAnimation.EasingFunction>
            </DoubleAnimation>
            <DoubleAnimation Storyboard.TargetName="P4Translate"
                             Storyboard.TargetProperty="Y"
                             From="0" To="35" Duration="0:0:4.2" AutoReverse="True">
                <DoubleAnimation.EasingFunction>
                    <SineEase EasingMode="EaseInOut"/>
                </DoubleAnimation.EasingFunction>
            </DoubleAnimation>
            <DoubleAnimation Storyboard.TargetName="P5Translate"
                             Storyboard.TargetProperty="Y"
                             From="0" To="-25" Duration="0:0:3.8" AutoReverse="True">
                <DoubleAnimation.EasingFunction>
                    <SineEase EasingMode="EaseInOut"/>
                </DoubleAnimation.EasingFunction>
            </DoubleAnimation>
        </Storyboard>

        <!-- Ring Rotation -->
        <Storyboard x:Key="RingRotation" RepeatBehavior="Forever">
            <DoubleAnimation Storyboard.TargetName="RingRotate1"
                             Storyboard.TargetProperty="Angle"
                             From="0" To="360" Duration="0:0:20"/>
            <DoubleAnimation Storyboard.TargetName="RingRotate2"
                             Storyboard.TargetProperty="Angle"
                             From="360" To="0" Duration="0:0:25"/>
        </Storyboard>

        <!-- Spinner Animation -->
        <Storyboard x:Key="SpinnerAnimation" RepeatBehavior="Forever">
            <DoubleAnimation Storyboard.TargetName="SpinnerRotation"
                             Storyboard.TargetProperty="Angle"
                             From="0" To="360" Duration="0:0:0.8"/>
        </Storyboard>
    </UserControl.Resources>

    <UserControl.Triggers>
        <EventTrigger RoutedEvent="Loaded">
            <BeginStoryboard Storyboard="{StaticResource CardEntryAnimation}"/>
            <BeginStoryboard Storyboard="{StaticResource LogoPulse}"/>
            <BeginStoryboard Storyboard="{StaticResource GradientShift}"/>
            <BeginStoryboard Storyboard="{StaticResource ParticleFloat}"/>
            <BeginStoryboard Storyboard="{StaticResource RingRotation}"/>
        </EventTrigger>
    </UserControl.Triggers>

    <Grid>
        <!-- Animated Background Gradient - Plugin Dark Theme -->
        <Border>
            <Border.Background>
                <LinearGradientBrush StartPoint="0,0" EndPoint="1,1">
                    <GradientStop x:Name="BgGradient1" Color="#0A0A0B" Offset="0"/>
                    <GradientStop Color="#111113" Offset="0.5"/>
                    <GradientStop x:Name="BgGradient2" Color="#18181B" Offset="1"/>
                </LinearGradientBrush>
            </Border.Background>
        </Border>

        <!-- Animated Background Rings -->
        <Canvas ClipToBounds="True" IsHitTestVisible="False">
            <!-- Outer Ring -->
            <Ellipse Width="800" Height="800" StrokeThickness="1"
                     Stroke="#08FFFFFF" Canvas.Left="-100" Canvas.Top="-200"
                     StrokeDashArray="4,8" RenderTransformOrigin="0.5,0.5">
                <Ellipse.RenderTransform>
                    <RotateTransform x:Name="RingRotate1" Angle="0"/>
                </Ellipse.RenderTransform>
            </Ellipse>
            <!-- Inner Ring -->
            <Ellipse Width="600" Height="600" StrokeThickness="1"
                     Stroke="#05FFFFFF" Canvas.Right="-150" Canvas.Bottom="-100"
                     StrokeDashArray="2,6" RenderTransformOrigin="0.5,0.5">
                <Ellipse.RenderTransform>
                    <RotateTransform x:Name="RingRotate2" Angle="0"/>
                </Ellipse.RenderTransform>
            </Ellipse>
        </Canvas>

        <!-- Floating Particles Effect - Plugin Orange Theme -->
        <Canvas x:Name="ParticleCanvas" IsHitTestVisible="False">
            <!-- Particle 1 - Orange -->
            <Ellipse Width="120" Height="120" Opacity="0.08" Canvas.Left="50" Canvas.Top="80">
                <Ellipse.RenderTransform>
                    <TranslateTransform x:Name="P1Translate"/>
                </Ellipse.RenderTransform>
                <Ellipse.Fill>
                    <RadialGradientBrush>
                        <GradientStop Color="#FF6B00" Offset="0"/>
                        <GradientStop Color="Transparent" Offset="1"/>
                    </RadialGradientBrush>
                </Ellipse.Fill>
            </Ellipse>
            <!-- Particle 2 - Gold -->
            <Ellipse Width="200" Height="200" Opacity="0.06" Canvas.Right="80" Canvas.Top="30">
                <Ellipse.RenderTransform>
                    <TranslateTransform x:Name="P2Translate"/>
                </Ellipse.RenderTransform>
                <Ellipse.Fill>
                    <RadialGradientBrush>
                        <GradientStop Color="#FFB347" Offset="0"/>
                        <GradientStop Color="Transparent" Offset="1"/>
                    </RadialGradientBrush>
                </Ellipse.Fill>
            </Ellipse>
            <!-- Particle 3 - Orange Light -->
            <Ellipse Width="160" Height="160" Opacity="0.05" Canvas.Left="180" Canvas.Bottom="80">
                <Ellipse.RenderTransform>
                    <TranslateTransform x:Name="P3Translate"/>
                </Ellipse.RenderTransform>
                <Ellipse.Fill>
                    <RadialGradientBrush>
                        <GradientStop Color="#FF8533" Offset="0"/>
                        <GradientStop Color="Transparent" Offset="1"/>
                    </RadialGradientBrush>
                </Ellipse.Fill>
            </Ellipse>
            <!-- Particle 4 - Amber -->
            <Ellipse Width="100" Height="100" Opacity="0.05" Canvas.Right="200" Canvas.Bottom="150">
                <Ellipse.RenderTransform>
                    <TranslateTransform x:Name="P4Translate"/>
                </Ellipse.RenderTransform>
                <Ellipse.Fill>
                    <RadialGradientBrush>
                        <GradientStop Color="#F5A623" Offset="0"/>
                        <GradientStop Color="Transparent" Offset="1"/>
                    </RadialGradientBrush>
                </Ellipse.Fill>
            </Ellipse>
            <!-- Particle 5 - Deep Orange -->
            <Ellipse Width="80" Height="80" Opacity="0.06" Canvas.Left="400" Canvas.Top="200">
                <Ellipse.RenderTransform>
                    <TranslateTransform x:Name="P5Translate"/>
                </Ellipse.RenderTransform>
                <Ellipse.Fill>
                    <RadialGradientBrush>
                        <GradientStop Color="#CC5500" Offset="0"/>
                        <GradientStop Color="Transparent" Offset="1"/>
                    </RadialGradientBrush>
                </Ellipse.Fill>
            </Ellipse>
            <!-- Small static particles -->
            <Ellipse Width="6" Height="6" Fill="#20FF6B00" Canvas.Left="150" Canvas.Top="300"/>
            <Ellipse Width="4" Height="4" Fill="#20FFB347" Canvas.Right="250" Canvas.Top="180"/>
            <Ellipse Width="5" Height="5" Fill="#20FF8533" Canvas.Left="350" Canvas.Bottom="250"/>
            <Ellipse Width="3" Height="3" Fill="#20F5A623" Canvas.Right="180" Canvas.Bottom="350"/>
        </Canvas>

        <!-- Login Card -->
        <Border x:Name="LoginCard"
                Background="{StaticResource SecondaryDarkBrush}"
                CornerRadius="12"
                Width="440"
                Padding="40,32"
                HorizontalAlignment="Center"
                VerticalAlignment="Center"
                Opacity="0"
                RenderTransformOrigin="0.5,0.5">

            <Border.RenderTransform>
                <TransformGroup>
                    <ScaleTransform x:Name="CardScale"/>
                    <TranslateTransform x:Name="CardTranslate"/>
                </TransformGroup>
            </Border.RenderTransform>

            <Border.Effect>
                <DropShadowEffect BlurRadius="40" ShadowDepth="0" Opacity="0.5" Color="Black"/>
            </Border.Effect>

            <Grid>
                <!-- Login Form -->
                <StackPanel x:Name="LoginPanel">
                    <!-- Logo and Title - Plugin Brand -->
                    <StackPanel HorizontalAlignment="Center" Margin="0,0,0,24">
                        <!-- Logo with Glow -->
                        <Grid HorizontalAlignment="Center" Margin="0,0,0,20"
                              RenderTransformOrigin="0.5,0.5">
                            <Grid.RenderTransform>
                                <ScaleTransform x:Name="LogoScale"/>
                            </Grid.RenderTransform>

                            <!-- Glow Effect - Orange -->
                            <Ellipse x:Name="LogoGlow" Width="110" Height="110" Opacity="0.5">
                                <Ellipse.Fill>
                                    <RadialGradientBrush>
                                        <GradientStop Color="#FF6B00" Offset="0"/>
                                        <GradientStop Color="Transparent" Offset="1"/>
                                    </RadialGradientBrush>
                                </Ellipse.Fill>
                            </Ellipse>

                            <!-- Logo Ring -->
                            <Ellipse Width="88" Height="88" StrokeThickness="2"
                                     Stroke="#30FF6B00"/>

                            <!-- Logo Circle - Fire Gradient -->
                            <Border Width="80" Height="80" CornerRadius="40">
                                <Border.Background>
                                    <LinearGradientBrush StartPoint="0,0" EndPoint="1,1">
                                        <GradientStop Color="#FF6B00" Offset="0"/>
                                        <GradientStop Color="#FF8533" Offset="0.5"/>
                                        <GradientStop Color="#FFB347" Offset="1"/>
                                    </LinearGradientBrush>
                                </Border.Background>
                                <Border.Effect>
                                    <DropShadowEffect BlurRadius="20" ShadowDepth="0"
                                                      Color="#FF6B00" Opacity="0.6"/>
                                </Border.Effect>
                                <TextBlock Text="P" FontSize="38" FontWeight="Bold"
                                           Foreground="White"
                                           HorizontalAlignment="Center" VerticalAlignment="Center"/>
                            </Border>
                        </Grid>

                        <!-- Title with fire gradient -->
                        <TextBlock FontSize="26" FontWeight="Bold" HorizontalAlignment="Center">
                            <TextBlock.Foreground>
                                <LinearGradientBrush StartPoint="0,0" EndPoint="1,0">
                                    <GradientStop Color="#FAFAFA" Offset="0"/>
                                    <GradientStop Color="#FF8533" Offset="1"/>
                                </LinearGradientBrush>
                            </TextBlock.Foreground>
                            Welcome to Plugin
                        </TextBlock>

                        <TextBlock x:Name="SubtitleText"
                                   Text="Connect. Trade. Create."
                                   FontSize="13" Foreground="#71717A"
                                   HorizontalAlignment="Center"
                                   Margin="0,6,0,0"/>
                    </StackPanel>

                    <!-- Error Message with fade animation -->
                    <Border x:Name="ErrorBorder" Visibility="Collapsed"
                            CornerRadius="6" Padding="12,10" Margin="0,0,0,16">
                        <Border.Background>
                            <LinearGradientBrush StartPoint="0,0" EndPoint="1,0">
                                <GradientStop Color="#ED4245" Offset="0"/>
                                <GradientStop Color="#F04747" Offset="1"/>
                            </LinearGradientBrush>
                        </Border.Background>
                        <StackPanel Orientation="Horizontal" HorizontalAlignment="Center">
                            <TextBlock Text="âš " FontSize="14" VerticalAlignment="Center"
                                       Foreground="White" Margin="0,0,8,0"/>
                            <TextBlock x:Name="ErrorText" Foreground="White"
                                       TextWrapping="Wrap" VerticalAlignment="Center"
                                       FontWeight="Medium"/>
                        </StackPanel>
                    </Border>

                    <!-- Username Input -->
                    <TextBlock Text="USERNAME" FontSize="11" FontWeight="Bold"
                               Foreground="{StaticResource TextSecondaryBrush}"
                               Margin="0,0,0,8"/>
                    <TextBox x:Name="UsernameBox"
                             Style="{StaticResource ModernTextBox}"
                             Margin="0,0,0,16"/>

                    <!-- Email Input (Register only) -->
                    <StackPanel x:Name="EmailPanel" Visibility="Collapsed">
                        <TextBlock Text="EMAIL" FontSize="11" FontWeight="Bold"
                                   Foreground="{StaticResource TextSecondaryBrush}"
                                   Margin="0,0,0,8"/>
                        <TextBox x:Name="EmailBox"
                                 Style="{StaticResource ModernTextBox}"
                                 Margin="0,0,0,16"/>
                    </StackPanel>

                    <!-- Password Input -->
                    <TextBlock Text="PASSWORD" FontSize="11" FontWeight="Bold"
                               Foreground="{StaticResource TextSecondaryBrush}"
                               Margin="0,0,0,8"/>
                    <PasswordBox x:Name="PasswordBox"
                                 Style="{StaticResource ModernPasswordBox}"
                                 Margin="0,0,0,16"/>

                    <!-- Confirm Password (Register only) -->
                    <StackPanel x:Name="ConfirmPasswordPanel" Visibility="Collapsed">
                        <TextBlock Text="CONFIRM PASSWORD" FontSize="11" FontWeight="Bold"
                                   Foreground="{StaticResource TextSecondaryBrush}"
                                   Margin="0,0,0,8"/>
                        <PasswordBox x:Name="ConfirmPasswordBox"
                                     Style="{StaticResource ModernPasswordBox}"
                                     Margin="0,0,0,16"/>
                    </StackPanel>

                    <!-- Activation Key (Register only) -->
                    <StackPanel x:Name="ActivationKeyPanel" Visibility="Collapsed">
                        <StackPanel Orientation="Horizontal" Margin="0,0,0,8">
                            <TextBlock Text="ACTIVATION KEY" FontSize="11" FontWeight="Bold"
                                       Foreground="{StaticResource TextSecondaryBrush}"/>
                            <TextBlock Text="(Required)" FontSize="10"
                                       Foreground="#71717A" Margin="8,0,0,0"
                                       VerticalAlignment="Center"/>
                            <!-- Valid indicator (shown when validated) -->
                            <TextBlock x:Name="KeyStatusIcon" Text="âœ“" FontSize="12"
                                       Foreground="#43B581" FontWeight="Bold"
                                       Margin="8,0,0,0" VerticalAlignment="Center"
                                       Visibility="Collapsed"/>
                        </StackPanel>
                        <Grid Margin="0,0,0,16">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="Auto"/>
                            </Grid.ColumnDefinitions>
                            <TextBox x:Name="ActivationKeyBox"
                                     Style="{StaticResource ModernTextBox}"
                                     MaxLength="7" CharacterCasing="Upper"
                                     FontFamily="Consolas" FontSize="16" FontWeight="Bold"
                                     TextChanged="ActivationKeyBox_TextChanged"
                                     ToolTip="Format: XXX-XXX (e.g., ABC-123)"/>
                            <Button Grid.Column="1" x:Name="ValidateKeyButton"
                                    Content="Validate" Margin="8,0,0,0"
                                    Style="{StaticResource SecondaryButton}"
                                    Height="38" Padding="16,0"
                                    IsEnabled="False"
                                    Click="ValidateKey_Click"/>
                        </Grid>
                        <TextBlock Text="Enter the 6-character key in XXX-XXX format (e.g., ABC-123)"
                                   FontSize="10" Foreground="#52525B"/>
                    </StackPanel>

                    <!-- Remember Me (Login only) -->
                    <CheckBox x:Name="RememberMeCheck" Content="Remember me"
                              Foreground="{StaticResource TextSecondaryBrush}"
                              Margin="0,0,0,20" FontSize="13"/>

                    <!-- Login/Register Button -->
                    <Button x:Name="ActionButton" Content="Login"
                            Style="{StaticResource PrimaryButton}"
                            Click="ActionButton_Click"
                            Height="46" FontSize="15" FontWeight="SemiBold"/>

                    <!-- Divider -->
                    <Grid Margin="0,20,0,16">
                        <Rectangle Height="1" Fill="#40444B"/>
                        <Border Background="{StaticResource SecondaryDarkBrush}"
                                HorizontalAlignment="Center" Padding="12,0">
                            <TextBlock Text="or continue with" FontSize="11"
                                       Foreground="#72767D"/>
                        </Border>
                    </Grid>

                    <!-- Social Login Buttons (decorative) -->
                    <Grid>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition/>
                            <ColumnDefinition Width="12"/>
                            <ColumnDefinition/>
                        </Grid.ColumnDefinitions>
                        <Button Grid.Column="0" Content="ðŸŽ® Discord"
                                Style="{StaticResource SecondaryButton}"
                                Height="40" FontSize="13"/>
                        <Button Grid.Column="2" Content="ðŸ“§ Email Magic Link"
                                Style="{StaticResource SecondaryButton}"
                                Height="40" FontSize="13"/>
                    </Grid>

                    <!-- Toggle Mode Link -->
                    <StackPanel Orientation="Horizontal" HorizontalAlignment="Center"
                                Margin="0,20,0,0">
                        <TextBlock x:Name="TogglePromptText"
                                   Text="Need an account?"
                                   Foreground="{StaticResource TextSecondaryBrush}"
                                   FontSize="13"/>
                        <TextBlock x:Name="ToggleLinkText"
                                   Text="Register"
                                   Foreground="{StaticResource TextLinkBrush}"
                                   Margin="5,0,0,0" FontSize="13"
                                   FontWeight="SemiBold"
                                   Cursor="Hand"
                                   MouseLeftButtonDown="ToggleMode_Click">
                            <TextBlock.Style>
                                <Style TargetType="TextBlock">
                                    <Style.Triggers>
                                        <Trigger Property="IsMouseOver" Value="True">
                                            <Setter Property="TextDecorations" Value="Underline"/>
                                        </Trigger>
                                    </Style.Triggers>
                                </Style>
                            </TextBlock.Style>
                        </TextBlock>
                    </StackPanel>
                </StackPanel>

                <!-- Loading Overlay - Plugin Orange -->
                <Border x:Name="LoadingOverlay" Visibility="Collapsed"
                        Background="#E0000000" CornerRadius="12">
                    <StackPanel HorizontalAlignment="Center" VerticalAlignment="Center">
                        <!-- Animated Spinner -->
                        <Grid Width="48" Height="48" RenderTransformOrigin="0.5,0.5">
                            <Grid.RenderTransform>
                                <RotateTransform x:Name="SpinnerRotation" Angle="0"/>
                            </Grid.RenderTransform>
                            <Ellipse Width="48" Height="48" StrokeThickness="3"
                                     Stroke="#30FFFFFF"/>
                            <Ellipse Width="48" Height="48" StrokeThickness="3"
                                     StrokeDashArray="2,4">
                                <Ellipse.Stroke>
                                    <LinearGradientBrush StartPoint="0,0" EndPoint="1,1">
                                        <GradientStop Color="#FF6B00" Offset="0"/>
                                        <GradientStop Color="#FFB347" Offset="1"/>
                                    </LinearGradientBrush>
                                </Ellipse.Stroke>
                            </Ellipse>
                        </Grid>
                        <TextBlock x:Name="LoadingText" Text="Connecting..."
                                   Foreground="White" FontWeight="Medium"
                                   Margin="0,16,0,0" FontSize="14"/>
                        <TextBlock x:Name="LoadingSubtext" Text="Please wait..."
                                   Foreground="#71717A" FontSize="12"
                                   Margin="0,4,0,0"/>
                    </StackPanel>
                </Border>
            </Grid>
        </Border>

        <!-- Window Controls -->
        <StackPanel Orientation="Horizontal" HorizontalAlignment="Right"
                    VerticalAlignment="Top" Margin="0,8,8,0">
            <Button Content="â”€" Width="36" Height="36"
                    Style="{StaticResource IconButton}"
                    Click="MinimizeButton_Click" FontSize="14"/>
            <Button Content="âœ•" Width="36" Height="36"
                    Style="{StaticResource IconButton}"
                    Click="CloseButton_Click" FontSize="14"/>
        </StackPanel>

        <!-- Version Tag -->
        <TextBlock Text="v2.6.0" FontSize="11" Foreground="#40444B"
                   HorizontalAlignment="Left" VerticalAlignment="Bottom"
                   Margin="12,0,0,12"/>
    </Grid>
</UserControl>
