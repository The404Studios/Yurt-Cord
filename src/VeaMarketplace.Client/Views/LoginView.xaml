<UserControl x:Class="VeaMarketplace.Client.Views.LoginView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:controls="clr-namespace:VeaMarketplace.Client.Controls"
             Background="Transparent">

    <UserControl.Resources>
        <BooleanToVisibilityConverter x:Key="BoolToVis"/>

        <!-- Shake Animation for errors -->
        <Storyboard x:Key="ShakeAnimation">
            <DoubleAnimationUsingKeyFrames Storyboard.TargetProperty="(UIElement.RenderTransform).(TranslateTransform.X)">
                <EasingDoubleKeyFrame KeyTime="0:0:0.05" Value="15"/>
                <EasingDoubleKeyFrame KeyTime="0:0:0.1" Value="-15"/>
                <EasingDoubleKeyFrame KeyTime="0:0:0.15" Value="12"/>
                <EasingDoubleKeyFrame KeyTime="0:0:0.2" Value="-12"/>
                <EasingDoubleKeyFrame KeyTime="0:0:0.25" Value="8"/>
                <EasingDoubleKeyFrame KeyTime="0:0:0.3" Value="-8"/>
                <EasingDoubleKeyFrame KeyTime="0:0:0.35" Value="0"/>
            </DoubleAnimationUsingKeyFrames>
        </Storyboard>

        <!-- Card Entry Animation -->
        <Storyboard x:Key="CardEntryAnimation">
            <DoubleAnimation Storyboard.TargetName="LoginCard"
                             Storyboard.TargetProperty="Opacity"
                             From="0" To="1" Duration="0:0:0.8">
                <DoubleAnimation.EasingFunction>
                    <CubicEase EasingMode="EaseOut"/>
                </DoubleAnimation.EasingFunction>
            </DoubleAnimation>
            <DoubleAnimation Storyboard.TargetName="CardTranslate"
                             Storyboard.TargetProperty="Y"
                             From="60" To="0" Duration="0:0:0.8">
                <DoubleAnimation.EasingFunction>
                    <ElasticEase EasingMode="EaseOut" Oscillations="1" Springiness="5"/>
                </DoubleAnimation.EasingFunction>
            </DoubleAnimation>
            <DoubleAnimation Storyboard.TargetName="CardScale"
                             Storyboard.TargetProperty="ScaleX"
                             From="0.9" To="1" Duration="0:0:0.7">
                <DoubleAnimation.EasingFunction>
                    <CubicEase EasingMode="EaseOut"/>
                </DoubleAnimation.EasingFunction>
            </DoubleAnimation>
            <DoubleAnimation Storyboard.TargetName="CardScale"
                             Storyboard.TargetProperty="ScaleY"
                             From="0.9" To="1" Duration="0:0:0.7">
                <DoubleAnimation.EasingFunction>
                    <CubicEase EasingMode="EaseOut"/>
                </DoubleAnimation.EasingFunction>
            </DoubleAnimation>
        </Storyboard>

        <!-- Logo Pulse Animation -->
        <Storyboard x:Key="LogoPulse" RepeatBehavior="Forever">
            <DoubleAnimation Storyboard.TargetName="LogoGlow"
                             Storyboard.TargetProperty="Opacity"
                             From="0.4" To="0.9" Duration="0:0:1.5"
                             AutoReverse="True">
                <DoubleAnimation.EasingFunction>
                    <SineEase EasingMode="EaseInOut"/>
                </DoubleAnimation.EasingFunction>
            </DoubleAnimation>
            <ColorAnimation Storyboard.TargetName="GlowColorStop"
                            Storyboard.TargetProperty="Color"
                            From="#00B4D8" To="#48CAE4" Duration="0:0:2"
                            AutoReverse="True"/>
            <DoubleAnimation Storyboard.TargetName="LogoScale"
                             Storyboard.TargetProperty="ScaleX"
                             From="1" To="1.05" Duration="0:0:1.5"
                             AutoReverse="True">
                <DoubleAnimation.EasingFunction>
                    <SineEase EasingMode="EaseInOut"/>
                </DoubleAnimation.EasingFunction>
            </DoubleAnimation>
            <DoubleAnimation Storyboard.TargetName="LogoScale"
                             Storyboard.TargetProperty="ScaleY"
                             From="1" To="1.05" Duration="0:0:1.5"
                             AutoReverse="True">
                <DoubleAnimation.EasingFunction>
                    <SineEase EasingMode="EaseInOut"/>
                </DoubleAnimation.EasingFunction>
            </DoubleAnimation>
        </Storyboard>

        <!-- Neon Border Animation -->
        <Storyboard x:Key="BorderGlow" RepeatBehavior="Forever">
            <ColorAnimation Storyboard.TargetName="BorderColor1"
                            Storyboard.TargetProperty="Color"
                            From="#00B4D8" To="#48CAE4" Duration="0:0:3"
                            AutoReverse="True"/>
            <ColorAnimation Storyboard.TargetName="BorderColor2"
                            Storyboard.TargetProperty="Color"
                            From="#0096B8" To="#00B4D8" Duration="0:0:3"
                            AutoReverse="True"/>
            <ColorAnimation Storyboard.TargetName="BorderColor3"
                            Storyboard.TargetProperty="Color"
                            From="#48CAE4" To="#0096B8" Duration="0:0:3"
                            AutoReverse="True"/>
        </Storyboard>

        <!-- Particle Float Animation -->
        <Storyboard x:Key="ParticleFloat" RepeatBehavior="Forever">
            <DoubleAnimation Storyboard.TargetName="P1Translate"
                             Storyboard.TargetProperty="Y"
                             From="0" To="-40" Duration="0:0:4" AutoReverse="True">
                <DoubleAnimation.EasingFunction>
                    <SineEase EasingMode="EaseInOut"/>
                </DoubleAnimation.EasingFunction>
            </DoubleAnimation>
            <DoubleAnimation Storyboard.TargetName="P2Translate"
                             Storyboard.TargetProperty="Y"
                             From="0" To="30" Duration="0:0:3.5" AutoReverse="True">
                <DoubleAnimation.EasingFunction>
                    <SineEase EasingMode="EaseInOut"/>
                </DoubleAnimation.EasingFunction>
            </DoubleAnimation>
            <DoubleAnimation Storyboard.TargetName="P3Translate"
                             Storyboard.TargetProperty="Y"
                             From="0" To="-25" Duration="0:0:5" AutoReverse="True">
                <DoubleAnimation.EasingFunction>
                    <SineEase EasingMode="EaseInOut"/>
                </DoubleAnimation.EasingFunction>
            </DoubleAnimation>
        </Storyboard>

        <!-- Spinner Animation -->
        <Storyboard x:Key="SpinnerAnimation" RepeatBehavior="Forever">
            <DoubleAnimation Storyboard.TargetName="SpinnerRotation"
                             Storyboard.TargetProperty="Angle"
                             From="0" To="360" Duration="0:0:0.8"/>
        </Storyboard>
    </UserControl.Resources>

    <UserControl.Triggers>
        <EventTrigger RoutedEvent="Loaded">
            <BeginStoryboard Storyboard="{StaticResource CardEntryAnimation}"/>
            <BeginStoryboard Storyboard="{StaticResource LogoPulse}"/>
            <BeginStoryboard Storyboard="{StaticResource BorderGlow}"/>
            <BeginStoryboard Storyboard="{StaticResource ParticleFloat}"/>
        </EventTrigger>
    </UserControl.Triggers>

    <Grid>
        <!-- Neon Particles -->
        <Canvas x:Name="ParticleCanvas" IsHitTestVisible="False">
            <Ellipse Width="150" Height="150" Opacity="0.15" Canvas.Left="60" Canvas.Top="100">
                <Ellipse.RenderTransform>
                    <TranslateTransform x:Name="P1Translate"/>
                </Ellipse.RenderTransform>
                <Ellipse.Fill>
                    <RadialGradientBrush>
                        <GradientStop Color="#00B4D8" Offset="0"/>
                        <GradientStop Color="Transparent" Offset="1"/>
                    </RadialGradientBrush>
                </Ellipse.Fill>
                <Ellipse.Effect>
                    <DropShadowEffect Color="#00B4D8" BlurRadius="30" ShadowDepth="0"/>
                </Ellipse.Effect>
            </Ellipse>
            <Ellipse Width="200" Height="200" Opacity="0.1" Canvas.Right="50" Canvas.Top="50">
                <Ellipse.RenderTransform>
                    <TranslateTransform x:Name="P2Translate"/>
                </Ellipse.RenderTransform>
                <Ellipse.Fill>
                    <RadialGradientBrush>
                        <GradientStop Color="#48CAE4" Offset="0"/>
                        <GradientStop Color="Transparent" Offset="1"/>
                    </RadialGradientBrush>
                </Ellipse.Fill>
                <Ellipse.Effect>
                    <DropShadowEffect Color="#48CAE4" BlurRadius="40" ShadowDepth="0"/>
                </Ellipse.Effect>
            </Ellipse>
            <Ellipse Width="180" Height="180" Opacity="0.12" Canvas.Left="200" Canvas.Bottom="80">
                <Ellipse.RenderTransform>
                    <TranslateTransform x:Name="P3Translate"/>
                </Ellipse.RenderTransform>
                <Ellipse.Fill>
                    <RadialGradientBrush>
                        <GradientStop Color="#0096B8" Offset="0"/>
                        <GradientStop Color="Transparent" Offset="1"/>
                    </RadialGradientBrush>
                </Ellipse.Fill>
                <Ellipse.Effect>
                    <DropShadowEffect Color="#0096B8" BlurRadius="35" ShadowDepth="0"/>
                </Ellipse.Effect>
            </Ellipse>
        </Canvas>

        <!-- Login Card with Neon Border -->
        <Border x:Name="LoginCard"
                CornerRadius="35"
                Width="480"
                Padding="45,38"
                HorizontalAlignment="Center"
                VerticalAlignment="Center"
                Opacity="0"
                RenderTransformOrigin="0.5,0.5"
                BorderThickness="2">

            <Border.BorderBrush>
                <LinearGradientBrush StartPoint="0,0" EndPoint="1,1">
                    <GradientStop x:Name="BorderColor1" Color="#00B4D8" Offset="0"/>
                    <GradientStop x:Name="BorderColor2" Color="#0096B8" Offset="0.5"/>
                    <GradientStop x:Name="BorderColor3" Color="#48CAE4" Offset="1"/>
                </LinearGradientBrush>
            </Border.BorderBrush>

            <Border.Background>
                <LinearGradientBrush StartPoint="0,0" EndPoint="1,1">
                    <GradientStop Color="#15152A" Offset="0"/>
                    <GradientStop Color="#0A0A15" Offset="1"/>
                </LinearGradientBrush>
            </Border.Background>

            <Border.RenderTransform>
                <TransformGroup>
                    <ScaleTransform x:Name="CardScale"/>
                    <TranslateTransform x:Name="CardTranslate"/>
                </TransformGroup>
            </Border.RenderTransform>

            <Border.Effect>
                <DropShadowEffect BlurRadius="50" ShadowDepth="0" Opacity="0.7" Color="#00B4D8"/>
            </Border.Effect>

            <Grid>
                <!-- Login Form -->
                <StackPanel x:Name="LoginPanel">
                    <!-- Logo and Title -->
                    <StackPanel HorizontalAlignment="Center" Margin="0,0,0,28">
                        <!-- Logo with Glow -->
                        <Grid HorizontalAlignment="Center" Margin="0,0,0,22"
                              RenderTransformOrigin="0.5,0.5">
                            <Grid.RenderTransform>
                                <ScaleTransform x:Name="LogoScale"/>
                            </Grid.RenderTransform>

                            <!-- Glow Effect -->
                            <Ellipse x:Name="LogoGlow" Width="130" Height="130" Opacity="0.6">
                                <Ellipse.Fill>
                                    <RadialGradientBrush>
                                        <GradientStop x:Name="GlowColorStop" Color="#00B4D8" Offset="0"/>
                                        <GradientStop Color="Transparent" Offset="1"/>
                                    </RadialGradientBrush>
                                </Ellipse.Fill>
                            </Ellipse>

                            <!-- Logo Rings -->
                            <Ellipse Width="100" Height="100" StrokeThickness="2"
                                     Stroke="#2500B4D8"/>
                            <Ellipse Width="90" Height="90" StrokeThickness="1"
                                     Stroke="#1848CAE4"/>

                            <!-- Logo Circle -->
                            <Border Width="80" Height="80" CornerRadius="40">
                                <Border.Background>
                                    <LinearGradientBrush StartPoint="0,0" EndPoint="1,1">
                                        <GradientStop Color="#00B4D8" Offset="0"/>
                                        <GradientStop Color="#48CAE4" Offset="0.5"/>
                                        <GradientStop Color="#0096B8" Offset="1"/>
                                    </LinearGradientBrush>
                                </Border.Background>
                                <Border.Effect>
                                    <DropShadowEffect BlurRadius="18" ShadowDepth="0"
                                                      Color="#00B4D8" Opacity="0.5"/>
                                </Border.Effect>
                                <TextBlock Text="Y" FontSize="42" FontWeight="Bold"
                                           Foreground="#050510"
                                           HorizontalAlignment="Center" VerticalAlignment="Center"/>
                            </Border>
                        </Grid>

                        <!-- Title with Teal Gradient -->
                        <TextBlock FontSize="28" FontWeight="Bold" HorizontalAlignment="Center">
                            <TextBlock.Foreground>
                                <LinearGradientBrush StartPoint="0,0" EndPoint="1,0">
                                    <GradientStop Color="#00B4D8" Offset="0"/>
                                    <GradientStop Color="#48CAE4" Offset="0.5"/>
                                    <GradientStop Color="#0096B8" Offset="1"/>
                                </LinearGradientBrush>
                            </TextBlock.Foreground>
                            <TextBlock.Effect>
                                <DropShadowEffect Color="#00B4D8" BlurRadius="10" ShadowDepth="0" Opacity="0.4"/>
                            </TextBlock.Effect>
                            YURT CORD
                        </TextBlock>

                        <TextBlock x:Name="SubtitleText"
                                   Text="SIGN IN TO YOUR COMMUNITY"
                                   FontSize="11" Foreground="#6060A0"
                                   HorizontalAlignment="Center"
                                   Margin="0,8,0,0" FontWeight="SemiBold"/>
                    </StackPanel>

                    <!-- Error Message -->
                    <Border x:Name="ErrorBorder" Visibility="Collapsed"
                            CornerRadius="20" Padding="16,12" Margin="0,0,0,18">
                        <Border.Background>
                            <LinearGradientBrush StartPoint="0,0" EndPoint="1,0">
                                <GradientStop Color="#FF4444" Offset="0"/>
                                <GradientStop Color="#48CAE4" Offset="1"/>
                            </LinearGradientBrush>
                        </Border.Background>
                        <Border.Effect>
                            <DropShadowEffect Color="#FF4444" BlurRadius="15" ShadowDepth="0" Opacity="0.5"/>
                        </Border.Effect>
                        <StackPanel Orientation="Horizontal" HorizontalAlignment="Center">
                            <TextBlock Text="!" FontSize="14" FontWeight="Bold" VerticalAlignment="Center"
                                       Foreground="White" Margin="0,0,10,0"/>
                            <TextBlock x:Name="ErrorText" Foreground="White"
                                       TextWrapping="Wrap" VerticalAlignment="Center"
                                       FontWeight="SemiBold"/>
                        </StackPanel>
                    </Border>

                    <!-- Username Input -->
                    <TextBlock Text="IDENTITY" FontSize="10" FontWeight="Bold"
                               Foreground="#00B4D8" Margin="8,0,0,8">
                        <TextBlock.Effect>
                            <DropShadowEffect Color="#00B4D8" BlurRadius="5" ShadowDepth="0" Opacity="0.5"/>
                        </TextBlock.Effect>
                    </TextBlock>
                    <TextBox x:Name="UsernameBox"
                             Style="{StaticResource OverseerTextBox}"
                             Margin="0,0,0,18"/>

                    <!-- Email Input (Register only) -->
                    <StackPanel x:Name="EmailPanel" Visibility="Collapsed">
                        <TextBlock Text="COMM CHANNEL" FontSize="10" FontWeight="Bold"
                                   Foreground="#0096B8" Margin="8,0,0,8">
                            <TextBlock.Effect>
                                <DropShadowEffect Color="#0096B8" BlurRadius="5" ShadowDepth="0" Opacity="0.5"/>
                            </TextBlock.Effect>
                        </TextBlock>
                        <TextBox x:Name="EmailBox"
                                 Style="{StaticResource OverseerTextBox}"
                                 Margin="0,0,0,18"/>
                    </StackPanel>

                    <!-- Password Input -->
                    <TextBlock Text="ACCESS CODE" FontSize="10" FontWeight="Bold"
                               Foreground="#48CAE4" Margin="8,0,0,8">
                        <TextBlock.Effect>
                            <DropShadowEffect Color="#48CAE4" BlurRadius="5" ShadowDepth="0" Opacity="0.5"/>
                        </TextBlock.Effect>
                    </TextBlock>
                    <PasswordBox x:Name="PasswordBox"
                                 Style="{StaticResource OverseerPasswordBox}"
                                 Margin="0,0,0,18"/>

                    <!-- Confirm Password (Register only) -->
                    <StackPanel x:Name="ConfirmPasswordPanel" Visibility="Collapsed">
                        <TextBlock Text="CONFIRM ACCESS CODE" FontSize="10" FontWeight="Bold"
                                   Foreground="#48CAE4" Margin="8,0,0,8">
                            <TextBlock.Effect>
                                <DropShadowEffect Color="#48CAE4" BlurRadius="5" ShadowDepth="0" Opacity="0.5"/>
                            </TextBlock.Effect>
                        </TextBlock>
                        <PasswordBox x:Name="ConfirmPasswordBox"
                                     Style="{StaticResource OverseerPasswordBox}"
                                     Margin="0,0,0,18"/>
                    </StackPanel>

                    <!-- Remember Me -->
                    <CheckBox x:Name="RememberMeCheck" Content="Retain credentials"
                              Foreground="#8080A0"
                              Margin="8,0,0,22" FontSize="12"/>

                    <!-- Login/Register Button -->
                    <Button x:Name="ActionButton" Content="[ AUTHENTICATE ]"
                            Style="{StaticResource OverseerPillButton}"
                            Click="ActionButton_Click"
                            Height="50" FontSize="14" FontWeight="Bold"/>

                    <!-- Divider -->
                    <Grid Margin="0,24,0,18">
                        <Rectangle Height="1">
                            <Rectangle.Fill>
                                <LinearGradientBrush StartPoint="0,0" EndPoint="1,0">
                                    <GradientStop Color="Transparent" Offset="0"/>
                                    <GradientStop Color="#00B4D8" Offset="0.5"/>
                                    <GradientStop Color="Transparent" Offset="1"/>
                                </LinearGradientBrush>
                            </Rectangle.Fill>
                        </Rectangle>
                        <Border Background="#0A0A15"
                                HorizontalAlignment="Center" Padding="16,0">
                            <TextBlock Text="ALTERNATIVE ACCESS" FontSize="9"
                                       Foreground="#505070"/>
                        </Border>
                    </Grid>

                    <!-- Social Login Buttons -->
                    <Grid>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition/>
                            <ColumnDefinition Width="14"/>
                            <ColumnDefinition/>
                        </Grid.ColumnDefinitions>
                        <Button Grid.Column="0" Content="DISCORD"
                                Style="{StaticResource OverseerPillButton}"
                                Height="42" FontSize="11"
                                BorderBrush="#5865F2"
                                Click="DiscordLogin_Click"/>
                        <Button Grid.Column="2" Content="MAGIC LINK"
                                Style="{StaticResource OverseerPillButton}"
                                Height="42" FontSize="11"
                                BorderBrush="#0096B8"
                                Click="MagicLinkLogin_Click"/>
                    </Grid>

                    <!-- Toggle Mode Link -->
                    <StackPanel Orientation="Horizontal" HorizontalAlignment="Center"
                                Margin="0,24,0,0">
                        <TextBlock x:Name="TogglePromptText"
                                   Text="No access?"
                                   Foreground="#6060A0"
                                   FontSize="12"/>
                        <TextBlock x:Name="ToggleLinkText"
                                   Text="REQUEST ACCESS"
                                   Foreground="#00B4D8"
                                   Margin="6,0,0,0" FontSize="12"
                                   FontWeight="Bold"
                                   Cursor="Hand"
                                   MouseLeftButtonDown="ToggleMode_Click">
                            <TextBlock.Effect>
                                <DropShadowEffect Color="#00B4D8" BlurRadius="8" ShadowDepth="0" Opacity="0.5"/>
                            </TextBlock.Effect>
                            <TextBlock.Style>
                                <Style TargetType="TextBlock">
                                    <Style.Triggers>
                                        <Trigger Property="IsMouseOver" Value="True">
                                            <Setter Property="TextDecorations" Value="Underline"/>
                                        </Trigger>
                                    </Style.Triggers>
                                </Style>
                            </TextBlock.Style>
                        </TextBlock>
                    </StackPanel>
                </StackPanel>

                <!-- Loading Overlay -->
                <Border x:Name="LoadingOverlay" Visibility="Collapsed"
                        Background="#E0050510" CornerRadius="35">
                    <StackPanel HorizontalAlignment="Center" VerticalAlignment="Center">
                        <!-- Animated Spinner -->
                        <Grid Width="56" Height="56" RenderTransformOrigin="0.5,0.5">
                            <Grid.RenderTransform>
                                <RotateTransform x:Name="SpinnerRotation" Angle="0"/>
                            </Grid.RenderTransform>
                            <Ellipse Width="56" Height="56" StrokeThickness="3"
                                     Stroke="#20FFFFFF"/>
                            <Ellipse Width="56" Height="56" StrokeThickness="3"
                                     StrokeDashArray="2,4">
                                <Ellipse.Stroke>
                                    <LinearGradientBrush StartPoint="0,0" EndPoint="1,1">
                                        <GradientStop Color="#00B4D8" Offset="0"/>
                                        <GradientStop Color="#48CAE4" Offset="1"/>
                                    </LinearGradientBrush>
                                </Ellipse.Stroke>
                            </Ellipse>
                        </Grid>
                        <TextBlock x:Name="LoadingText" Text="CONNECTING..."
                                   Foreground="#00B4D8" FontWeight="Bold"
                                   Margin="0,18,0,0" FontSize="13">
                            <TextBlock.Effect>
                                <DropShadowEffect Color="#00B4D8" BlurRadius="8" ShadowDepth="0" Opacity="0.6"/>
                            </TextBlock.Effect>
                        </TextBlock>
                        <TextBlock x:Name="LoadingSubtext" Text="Please wait..."
                                   Foreground="#6060A0" FontSize="11"
                                   Margin="0,6,0,0"/>
                    </StackPanel>
                </Border>
            </Grid>
        </Border>

        <!-- Version Tag -->
        <TextBlock FontSize="10" Foreground="#404060"
                   HorizontalAlignment="Left" VerticalAlignment="Bottom"
                   Margin="16,0,0,16">
            <Run Text="YURT CORD"/>
            <Run Text=" v3.0.0" Foreground="#00B4D8"/>
        </TextBlock>
    </Grid>
</UserControl>
