<Window x:Class="VeaMarketplace.Client.Views.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:views="clr-namespace:VeaMarketplace.Client.Views"
        xmlns:controls="clr-namespace:VeaMarketplace.Client.Controls"
        Title="Overseer"
        Height="800" Width="1280"
        MinHeight="600" MinWidth="900"
        WindowStyle="None"
        AllowsTransparency="True"
        Background="Transparent"
        WindowStartupLocation="CenterScreen">

    <Window.Resources>
        <BooleanToVisibilityConverter x:Key="BoolToVis"/>
    </Window.Resources>

    <Border Background="{StaticResource OverseerBackgroundBrush}" CornerRadius="24">
        <Grid>
            <!-- Matrix Background Animation -->
            <controls:MatrixBackground x:Name="MatrixBg" Opacity="0.3"/>

            <!-- Login View -->
            <views:LoginView x:Name="LoginView" Visibility="Visible"/>

            <!-- Profile Setup View (shown after registration) -->
            <views:ProfileSetupView x:Name="ProfileSetupView" Visibility="Collapsed"/>

            <!-- Main App View -->
            <Grid x:Name="MainAppGrid" Visibility="Collapsed">
                <Grid.ColumnDefinitions>
                    <!-- Server List -->
                    <ColumnDefinition Width="72"/>
                    <!-- Channel List -->
                    <ColumnDefinition Width="240"/>
                    <!-- Main Content -->
                    <ColumnDefinition Width="*"/>
                    <!-- Member List -->
                    <ColumnDefinition Width="240"/>
                </Grid.ColumnDefinitions>

                <!-- Custom Title Bar -->
                <Border Grid.ColumnSpan="4" Height="32" VerticalAlignment="Top"
                        Background="{StaticResource PrimaryDarkBrush}"
                        MouseLeftButtonDown="TitleBar_MouseLeftButtonDown">
                    <Grid>
                        <StackPanel Orientation="Horizontal" VerticalAlignment="Center" Margin="80,0,0,0">
                            <TextBlock Text="OVERSEER" FontWeight="Bold" FontSize="13"
                                       Foreground="{StaticResource OverseerPrimaryBrush}"
                                       VerticalAlignment="Center">
                                <TextBlock.Effect>
                                    <DropShadowEffect Color="#00FF88" BlurRadius="8" ShadowDepth="0" Opacity="0.6"/>
                                </TextBlock.Effect>
                            </TextBlock>
                            <TextBlock Text="â€¢" FontWeight="Light" FontSize="13"
                                       Foreground="{StaticResource OverseerSecondaryBrush}"
                                       VerticalAlignment="Center" Margin="8,0"/>
                            <TextBlock Text="Observe â€¢ Connect â€¢ Control" FontWeight="Normal" FontSize="11"
                                       Foreground="{StaticResource OverseerTextDimBrush}"
                                       VerticalAlignment="Center"/>
                        </StackPanel>
                        <StackPanel Orientation="Horizontal" HorizontalAlignment="Right">
                            <!-- Activity Panel Button -->
                            <Button x:Name="ActivityPanelButton" Width="32" Height="32"
                                    Style="{StaticResource IconButton}"
                                    ToolTip="Activity" Click="ActivityPanelButton_Click">
                                <TextBlock Text="âš¡" FontSize="14" VerticalAlignment="Center" HorizontalAlignment="Center"/>
                            </Button>
                            <!-- Notifications Button -->
                            <Button x:Name="NotificationsButton" Width="32" Height="32"
                                    Style="{StaticResource IconButton}"
                                    ToolTip="Notifications" Click="NotificationsButton_Click">
                                <Grid>
                                    <TextBlock Text="ðŸ””" FontSize="14" VerticalAlignment="Center" HorizontalAlignment="Center"/>
                                    <Border x:Name="NotificationBadge" Background="{StaticResource AccentRedBrush}"
                                            CornerRadius="6" Width="12" Height="12"
                                            HorizontalAlignment="Right" VerticalAlignment="Top"
                                            Margin="0,-2,-2,0" Visibility="Collapsed">
                                        <TextBlock x:Name="NotificationCount" Text="0" FontSize="8" FontWeight="Bold"
                                                   Foreground="White" HorizontalAlignment="Center" VerticalAlignment="Center"/>
                                    </Border>
                                </Grid>
                            </Button>
                            <!-- Cart Button -->
                            <Button x:Name="CartButton" Width="32" Height="32"
                                    Style="{StaticResource IconButton}"
                                    ToolTip="Shopping Cart" Click="CartButton_Click">
                                <Grid>
                                    <TextBlock Text="ðŸ›ï¸" FontSize="14" VerticalAlignment="Center" HorizontalAlignment="Center"/>
                                    <Border x:Name="CartBadge" Background="{StaticResource AccentGreenBrush}"
                                            CornerRadius="6" Width="12" Height="12"
                                            HorizontalAlignment="Right" VerticalAlignment="Top"
                                            Margin="0,-2,-2,0" Visibility="Collapsed">
                                        <TextBlock x:Name="CartCount" Text="0" FontSize="8" FontWeight="Bold"
                                                   Foreground="White" HorizontalAlignment="Center" VerticalAlignment="Center"/>
                                    </Border>
                                </Grid>
                            </Button>
                            <Rectangle Width="1" Height="16" Fill="{StaticResource QuaternaryDarkBrush}" Margin="8,0"/>
                            <Button Content="â”€" Width="46" Height="32"
                                    Style="{StaticResource IconButton}"
                                    Click="MinimizeButton_Click"/>
                            <Button Content="â–¡" Width="46" Height="32"
                                    Style="{StaticResource IconButton}"
                                    Click="MaximizeButton_Click"/>
                            <Button Content="âœ•" Width="46" Height="32"
                                    Style="{StaticResource IconButton}"
                                    Click="CloseButton_Click"/>
                        </StackPanel>
                    </Grid>
                </Border>

                <!-- Server Sidebar (Overseer Dark with glow) -->
                <Border Grid.Column="0" Margin="0,32,0,0" CornerRadius="0,20,20,0">
                    <Border.Background>
                        <LinearGradientBrush StartPoint="0,0" EndPoint="0,1">
                            <GradientStop Color="#08081A" Offset="0"/>
                            <GradientStop Color="#050510" Offset="1"/>
                        </LinearGradientBrush>
                    </Border.Background>
                    <StackPanel Margin="0,16">
                        <!-- Home Button (Overseer Orb) -->
                        <Button Style="{StaticResource OverseerCircleButton}" Width="52" Height="52"
                                Margin="10,0,10,8" Click="HomeButton_Click">
                            <TextBlock Text="â¬¡" FontSize="26" Foreground="{StaticResource OverseerPrimaryBrush}"
                                       HorizontalAlignment="Center" VerticalAlignment="Center"/>
                        </Button>

                        <Border Height="2" Margin="12,8" CornerRadius="1">
                            <Border.Background>
                                <LinearGradientBrush StartPoint="0,0" EndPoint="1,0">
                                    <GradientStop Color="Transparent" Offset="0"/>
                                    <GradientStop Color="#00FF88" Offset="0.5"/>
                                    <GradientStop Color="Transparent" Offset="1"/>
                                </LinearGradientBrush>
                            </Border.Background>
                        </Border>

                        <!-- Chat Button -->
                        <Button Style="{StaticResource OverseerNavItem}" Width="52" Height="52"
                                Margin="10,6,10,0" ToolTip="Chat" Click="ChatButton_Click">
                            <TextBlock x:Name="ChatButtonIcon" Text="ðŸ’¬" FontSize="22"/>
                        </Button>

                        <!-- Marketplace Button -->
                        <Button Style="{StaticResource OverseerNavItem}" Width="52" Height="52"
                                Margin="10,6,10,0" ToolTip="Marketplace" Click="MarketplaceButton_Click">
                            <TextBlock x:Name="MarketButtonIcon" Text="ðŸ›’" FontSize="22"/>
                        </Button>

                        <!-- Discover Button -->
                        <Button Style="{StaticResource OverseerNavItem}" Width="52" Height="52"
                                Margin="10,6,10,0" ToolTip="Discover" Click="DiscoverButton_Click">
                            <TextBlock x:Name="DiscoverButtonIcon" Text="ðŸ”" FontSize="22"/>
                        </Button>

                        <!-- Activity Feed Button -->
                        <Button Style="{StaticResource OverseerNavItem}" Width="52" Height="52"
                                Margin="10,6,10,0" ToolTip="Activity" Click="ActivityFeedButton_Click">
                            <TextBlock x:Name="ActivityButtonIcon" Text="ðŸ“°" FontSize="22"/>
                        </Button>

                        <!-- Profile Button -->
                        <Button Style="{StaticResource OverseerNavItem}" Width="52" Height="52"
                                Margin="10,6,10,0" ToolTip="Profile" Click="ProfileButton_Click">
                            <TextBlock x:Name="ProfileButtonIcon" Text="ðŸ‘¤" FontSize="22"/>
                        </Button>

                        <!-- Friends Button -->
                        <Button Style="{StaticResource OverseerNavItem}" Width="52" Height="52"
                                Margin="10,6,10,0" ToolTip="Friends" Click="FriendsButton_Click">
                            <TextBlock x:Name="FriendsButtonIcon" Text="ðŸ‘¥" FontSize="22"/>
                        </Button>

                        <!-- Settings Button -->
                        <Button Style="{StaticResource OverseerNavItem}" Width="52" Height="52"
                                Margin="10,6,10,0" ToolTip="Settings" Click="SettingsButton_Click">
                            <TextBlock x:Name="SettingsButtonIcon" Text="âš™ï¸" FontSize="22"/>
                        </Button>

                        <!-- Add Server Button -->
                        <Button Style="{StaticResource OverseerCircleButton}" Width="44" Height="44"
                                Margin="10,12,10,0" ToolTip="Add Server" BorderBrush="{StaticResource OverseerPrimaryBrush}">
                            <TextBlock Text="+" FontSize="24" Foreground="{StaticResource OverseerPrimaryBrush}"
                                       HorizontalAlignment="Center" VerticalAlignment="Center" Margin="0,-2,0,0"/>
                        </Button>
                    </StackPanel>
                </Border>

                <!-- Channel Sidebar (Rounded) -->
                <Border Grid.Column="1" Margin="0,32,0,0" CornerRadius="20,0,0,20">
                    <Border.Background>
                        <LinearGradientBrush StartPoint="0,0" EndPoint="1,1">
                            <GradientStop Color="#101020" Offset="0"/>
                            <GradientStop Color="#0A0A18" Offset="1"/>
                        </LinearGradientBrush>
                    </Border.Background>
                    <views:ChannelSidebar x:Name="ChannelSidebar"/>
                </Border>

                <!-- Main Content Area (Rounded with subtle glow) -->
                <Border Grid.Column="2" Margin="4,36,4,4" CornerRadius="24">
                    <Border.Background>
                        <LinearGradientBrush StartPoint="0,0" EndPoint="1,1">
                            <GradientStop Color="#0C0C1A" Offset="0"/>
                            <GradientStop Color="#080814" Offset="1"/>
                        </LinearGradientBrush>
                    </Border.Background>
                    <Border.Effect>
                        <DropShadowEffect Color="#00FF88" BlurRadius="8" ShadowDepth="0" Opacity="0.1"/>
                    </Border.Effect>
                    <Grid>
                        <views:ChatView x:Name="ChatViewControl" Visibility="Visible"/>
                        <views:MarketplaceView x:Name="MarketplaceViewControl" Visibility="Collapsed"/>
                        <views:ProfileView x:Name="ProfileViewControl" Visibility="Collapsed"/>
                        <views:SettingsView x:Name="SettingsViewControl" Visibility="Collapsed"/>
                        <views:FriendsView x:Name="FriendsViewControl" Visibility="Collapsed"/>
                        <views:VoiceCallDashboard x:Name="VoiceCallDashboardControl" Visibility="Collapsed"/>
                        <views:GroupCallView x:Name="GroupCallViewControl" Visibility="Collapsed"/>
                        <views:CartView x:Name="CartViewControl" Visibility="Collapsed"/>
                        <views:WishlistView x:Name="WishlistViewControl" Visibility="Collapsed"/>
                        <views:OrderHistoryView x:Name="OrderHistoryViewControl" Visibility="Collapsed"/>
                        <views:NotificationCenterView x:Name="NotificationCenterViewControl" Visibility="Collapsed"/>
                        <views:ModerationPanelView x:Name="ModerationPanelViewControl" Visibility="Collapsed"/>
                        <views:ServerBrowserView x:Name="ServerBrowserViewControl" Visibility="Collapsed"/>
                        <views:ActivityFeedView x:Name="ActivityFeedViewControl" Visibility="Collapsed"/>
                        <views:BlockedUsersView x:Name="BlockedUsersViewControl" Visibility="Collapsed"/>
                        <views:PrivacySettingsView x:Name="PrivacySettingsViewControl" Visibility="Collapsed"/>
                        <views:DiscoverView x:Name="DiscoverViewControl" Visibility="Collapsed"/>
                        <views:LeaderboardView x:Name="LeaderboardViewControl" Visibility="Collapsed"/>
                    </Grid>
                </Border>

                <!-- Member List Sidebar -->
                <Border Grid.Column="3" Background="{StaticResource SecondaryDarkBrush}"
                        Margin="0,32,0,0">
                    <views:MemberSidebar x:Name="MemberSidebar"/>
                </Border>

                <!-- Toast Notification Container -->
                <StackPanel x:Name="ToastContainer" Grid.Column="2" Grid.ColumnSpan="2"
                            HorizontalAlignment="Right" VerticalAlignment="Top"
                            Margin="0,48,16,0" Width="350"/>

                <!-- Social Activity Panel Overlay -->
                <Border x:Name="ActivityPanelOverlay" Grid.Column="2" Grid.ColumnSpan="2"
                        Visibility="Collapsed" HorizontalAlignment="Right"
                        VerticalAlignment="Stretch" Margin="0,32,260,0">
                    <controls:SocialActivityPanel x:Name="SocialActivityPanelControl"
                                                   StartGroupCallRequested="SocialActivity_StartGroupCall"
                                                   CreateGroupChatRequested="SocialActivity_CreateGroupChat"
                                                   ShareStatusRequested="SocialActivity_ShareStatus"
                                                   FindFriendsRequested="SocialActivity_FindFriends"
                                                   OnlineFriendClicked="SocialActivity_OnlineFriendClicked"/>
                </Border>
            </Grid>
        </Grid>
    </Border>
</Window>
