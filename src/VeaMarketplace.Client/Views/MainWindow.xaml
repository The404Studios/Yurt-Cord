<Window x:Class="VeaMarketplace.Client.Views.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:views="clr-namespace:VeaMarketplace.Client.Views"
        xmlns:controls="clr-namespace:VeaMarketplace.Client.Controls"
        Title="Yurt Cord"
        Height="800" Width="1280"
        MinHeight="600" MinWidth="900"
        WindowStyle="None"
        AllowsTransparency="True"
        Background="Transparent"
        WindowStartupLocation="CenterScreen">

    <Window.Resources>
        <BooleanToVisibilityConverter x:Key="BoolToVis"/>
    </Window.Resources>

    <Border Background="{StaticResource TertiaryDarkBrush}" CornerRadius="8">
        <Grid>
            <!-- Login View -->
            <views:LoginView x:Name="LoginView" Visibility="Visible"/>

            <!-- Profile Setup View (shown after registration) -->
            <views:ProfileSetupView x:Name="ProfileSetupView" Visibility="Collapsed"/>

            <!-- Main App View -->
            <Grid x:Name="MainAppGrid" Visibility="Collapsed">
                <Grid.ColumnDefinitions>
                    <!-- Server List -->
                    <ColumnDefinition Width="72"/>
                    <!-- Channel List -->
                    <ColumnDefinition Width="240"/>
                    <!-- Main Content -->
                    <ColumnDefinition Width="*"/>
                    <!-- Member List -->
                    <ColumnDefinition Width="240"/>
                </Grid.ColumnDefinitions>

                <!-- Custom Title Bar -->
                <Border Grid.ColumnSpan="4" Height="32" VerticalAlignment="Top"
                        Background="{StaticResource PrimaryDarkBrush}"
                        MouseLeftButtonDown="TitleBar_MouseLeftButtonDown">
                    <Grid>
                        <TextBlock Text="YURT CORD" FontWeight="Bold" FontSize="12"
                                   Foreground="{StaticResource TextPrimaryBrush}"
                                   VerticalAlignment="Center" Margin="80,0,0,0"/>
                        <StackPanel Orientation="Horizontal" HorizontalAlignment="Right">
                            <!-- Activity Panel Button -->
                            <Button x:Name="ActivityPanelButton" Width="32" Height="32"
                                    Style="{StaticResource IconButton}"
                                    ToolTip="Activity" Click="ActivityPanelButton_Click">
                                <TextBlock Text="âš¡" FontSize="14" VerticalAlignment="Center" HorizontalAlignment="Center"/>
                            </Button>
                            <!-- Notifications Button -->
                            <Button x:Name="NotificationsButton" Width="32" Height="32"
                                    Style="{StaticResource IconButton}"
                                    ToolTip="Notifications" Click="NotificationsButton_Click">
                                <Grid>
                                    <TextBlock Text="ðŸ””" FontSize="14" VerticalAlignment="Center" HorizontalAlignment="Center"/>
                                    <Border x:Name="NotificationBadge" Background="{StaticResource AccentRedBrush}"
                                            CornerRadius="6" Width="12" Height="12"
                                            HorizontalAlignment="Right" VerticalAlignment="Top"
                                            Margin="0,-2,-2,0" Visibility="Collapsed">
                                        <TextBlock x:Name="NotificationCount" Text="0" FontSize="8" FontWeight="Bold"
                                                   Foreground="White" HorizontalAlignment="Center" VerticalAlignment="Center"/>
                                    </Border>
                                </Grid>
                            </Button>
                            <!-- Cart Button -->
                            <Button x:Name="CartButton" Width="32" Height="32"
                                    Style="{StaticResource IconButton}"
                                    ToolTip="Shopping Cart" Click="CartButton_Click">
                                <Grid>
                                    <TextBlock Text="ðŸ›ï¸" FontSize="14" VerticalAlignment="Center" HorizontalAlignment="Center"/>
                                    <Border x:Name="CartBadge" Background="{StaticResource AccentGreenBrush}"
                                            CornerRadius="6" Width="12" Height="12"
                                            HorizontalAlignment="Right" VerticalAlignment="Top"
                                            Margin="0,-2,-2,0" Visibility="Collapsed">
                                        <TextBlock x:Name="CartCount" Text="0" FontSize="8" FontWeight="Bold"
                                                   Foreground="White" HorizontalAlignment="Center" VerticalAlignment="Center"/>
                                    </Border>
                                </Grid>
                            </Button>
                            <Rectangle Width="1" Height="16" Fill="{StaticResource QuaternaryDarkBrush}" Margin="8,0"/>
                            <Button Content="â”€" Width="46" Height="32"
                                    Style="{StaticResource IconButton}"
                                    Click="MinimizeButton_Click"/>
                            <Button Content="â–¡" Width="46" Height="32"
                                    Style="{StaticResource IconButton}"
                                    Click="MaximizeButton_Click"/>
                            <Button Content="âœ•" Width="46" Height="32"
                                    Style="{StaticResource IconButton}"
                                    Click="CloseButton_Click"/>
                        </StackPanel>
                    </Grid>
                </Border>

                <!-- Server Sidebar (Dark) -->
                <Border Grid.Column="0" Background="{StaticResource PrimaryDarkBrush}"
                        Margin="0,32,0,0">
                    <StackPanel Margin="0,12">
                        <!-- Home Button -->
                        <Button Style="{StaticResource IconButton}" Width="48" Height="48"
                                Margin="0,0,0,8" Click="HomeButton_Click">
                            <Border Background="{StaticResource AccentBrush}" CornerRadius="16"
                                    Width="48" Height="48">
                                <TextBlock Text="ðŸ " FontSize="24"
                                           HorizontalAlignment="Center" VerticalAlignment="Center"/>
                            </Border>
                        </Button>

                        <Separator Background="{StaticResource QuaternaryDarkBrush}"
                                   Margin="16,4" Height="2"/>

                        <!-- Chat Button -->
                        <Button Style="{StaticResource IconButton}" Width="48" Height="48"
                                Margin="0,8,0,0" ToolTip="Chat" Click="ChatButton_Click">
                            <Border x:Name="ChatButtonBorder" Background="{StaticResource SecondaryDarkBrush}"
                                    CornerRadius="24" Width="48" Height="48">
                                <TextBlock Text="ðŸ’¬" FontSize="22"
                                           HorizontalAlignment="Center" VerticalAlignment="Center"/>
                            </Border>
                        </Button>

                        <!-- Marketplace Button -->
                        <Button Style="{StaticResource IconButton}" Width="48" Height="48"
                                Margin="0,8,0,0" ToolTip="Marketplace" Click="MarketplaceButton_Click">
                            <Border x:Name="MarketButtonBorder" Background="{StaticResource SecondaryDarkBrush}"
                                    CornerRadius="24" Width="48" Height="48">
                                <TextBlock Text="ðŸ›’" FontSize="22"
                                           HorizontalAlignment="Center" VerticalAlignment="Center"/>
                            </Border>
                        </Button>

                        <!-- Discover Button -->
                        <Button Style="{StaticResource IconButton}" Width="48" Height="48"
                                Margin="0,8,0,0" ToolTip="Discover" Click="DiscoverButton_Click">
                            <Border x:Name="DiscoverButtonBorder" Background="{StaticResource SecondaryDarkBrush}"
                                    CornerRadius="24" Width="48" Height="48">
                                <TextBlock Text="ðŸ”" FontSize="22"
                                           HorizontalAlignment="Center" VerticalAlignment="Center"/>
                            </Border>
                        </Button>

                        <!-- Activity Feed Button -->
                        <Button Style="{StaticResource IconButton}" Width="48" Height="48"
                                Margin="0,8,0,0" ToolTip="Activity Feed" Click="ActivityFeedButton_Click">
                            <Border x:Name="ActivityButtonBorder" Background="{StaticResource SecondaryDarkBrush}"
                                    CornerRadius="24" Width="48" Height="48">
                                <TextBlock Text="ðŸ“°" FontSize="22"
                                           HorizontalAlignment="Center" VerticalAlignment="Center"/>
                            </Border>
                        </Button>

                        <!-- Profile Button -->
                        <Button Style="{StaticResource IconButton}" Width="48" Height="48"
                                Margin="0,8,0,0" ToolTip="Profile" Click="ProfileButton_Click">
                            <Border x:Name="ProfileButtonBorder" Background="{StaticResource SecondaryDarkBrush}"
                                    CornerRadius="24" Width="48" Height="48">
                                <TextBlock Text="ðŸ‘¤" FontSize="22"
                                           HorizontalAlignment="Center" VerticalAlignment="Center"/>
                            </Border>
                        </Button>

                        <!-- Friends Button -->
                        <Button Style="{StaticResource IconButton}" Width="48" Height="48"
                                Margin="0,8,0,0" ToolTip="Friends" Click="FriendsButton_Click">
                            <Border x:Name="FriendsButtonBorder" Background="{StaticResource SecondaryDarkBrush}"
                                    CornerRadius="24" Width="48" Height="48">
                                <TextBlock Text="ðŸ‘¥" FontSize="22"
                                           HorizontalAlignment="Center" VerticalAlignment="Center"/>
                            </Border>
                        </Button>

                        <!-- Add Server Button -->
                        <Button Style="{StaticResource IconButton}" Width="48" Height="48"
                                Margin="0,8,0,0" ToolTip="Add Server">
                            <Border Background="Transparent" CornerRadius="24"
                                    BorderBrush="{StaticResource AccentGreenBrush}" BorderThickness="2"
                                    Width="48" Height="48">
                                <TextBlock Text="+" FontSize="28" Foreground="{StaticResource AccentGreenBrush}"
                                           HorizontalAlignment="Center" VerticalAlignment="Center" Margin="0,-4,0,0"/>
                            </Border>
                        </Button>
                    </StackPanel>
                </Border>

                <!-- Channel Sidebar -->
                <Border Grid.Column="1" Background="{StaticResource SecondaryDarkBrush}"
                        Margin="0,32,0,0">
                    <views:ChannelSidebar x:Name="ChannelSidebar"/>
                </Border>

                <!-- Main Content Area -->
                <Border Grid.Column="2" Background="{StaticResource TertiaryDarkBrush}"
                        Margin="0,32,0,0">
                    <Grid>
                        <views:ChatView x:Name="ChatViewControl" Visibility="Visible"/>
                        <views:MarketplaceView x:Name="MarketplaceViewControl" Visibility="Collapsed"/>
                        <views:ProfileView x:Name="ProfileViewControl" Visibility="Collapsed"/>
                        <views:SettingsView x:Name="SettingsViewControl" Visibility="Collapsed"/>
                        <views:FriendsView x:Name="FriendsViewControl" Visibility="Collapsed"/>
                        <views:VoiceCallDashboard x:Name="VoiceCallDashboardControl" Visibility="Collapsed"/>
                        <views:CartView x:Name="CartViewControl" Visibility="Collapsed"/>
                        <views:WishlistView x:Name="WishlistViewControl" Visibility="Collapsed"/>
                        <views:OrderHistoryView x:Name="OrderHistoryViewControl" Visibility="Collapsed"/>
                        <views:NotificationCenterView x:Name="NotificationCenterViewControl" Visibility="Collapsed"/>
                        <views:ModerationPanelView x:Name="ModerationPanelViewControl" Visibility="Collapsed"/>
                        <views:ServerBrowserView x:Name="ServerBrowserViewControl" Visibility="Collapsed"/>
                        <views:ActivityFeedView x:Name="ActivityFeedViewControl" Visibility="Collapsed"/>
                        <views:BlockedUsersView x:Name="BlockedUsersViewControl" Visibility="Collapsed"/>
                        <views:PrivacySettingsView x:Name="PrivacySettingsViewControl" Visibility="Collapsed"/>
                        <views:DiscoverView x:Name="DiscoverViewControl" Visibility="Collapsed"/>
                    </Grid>
                </Border>

                <!-- Member List Sidebar -->
                <Border Grid.Column="3" Background="{StaticResource SecondaryDarkBrush}"
                        Margin="0,32,0,0">
                    <views:MemberSidebar x:Name="MemberSidebar"/>
                </Border>

                <!-- Toast Notification Container -->
                <StackPanel x:Name="ToastContainer" Grid.Column="2" Grid.ColumnSpan="2"
                            HorizontalAlignment="Right" VerticalAlignment="Top"
                            Margin="0,48,16,0" Width="350"/>

                <!-- Social Activity Panel Overlay -->
                <Border x:Name="ActivityPanelOverlay" Grid.Column="2" Grid.ColumnSpan="2"
                        Visibility="Collapsed" HorizontalAlignment="Right"
                        VerticalAlignment="Stretch" Margin="0,32,260,0">
                    <controls:SocialActivityPanel x:Name="SocialActivityPanelControl"
                                                   StartGroupCallRequested="SocialActivity_StartGroupCall"
                                                   CreateGroupChatRequested="SocialActivity_CreateGroupChat"
                                                   ShareStatusRequested="SocialActivity_ShareStatus"
                                                   FindFriendsRequested="SocialActivity_FindFriends"
                                                   OnlineFriendClicked="SocialActivity_OnlineFriendClicked"/>
                </Border>
            </Grid>
        </Grid>
    </Border>
</Window>
