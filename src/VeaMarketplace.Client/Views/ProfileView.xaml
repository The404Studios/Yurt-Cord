<UserControl x:Class="VeaMarketplace.Client.Views.ProfileView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             Background="{StaticResource TertiaryDarkBrush}">

    <UserControl.Resources>
        <ResourceDictionary>
            <ResourceDictionary.MergedDictionaries>
                <ResourceDictionary Source="../Styles/Colors.xaml"/>
                <ResourceDictionary Source="../Styles/Buttons.xaml"/>
                <ResourceDictionary Source="../Styles/Controls.xaml"/>
            </ResourceDictionary.MergedDictionaries>
        </ResourceDictionary>
    </UserControl.Resources>

    <Grid>
        <!-- Banner -->
        <Border x:Name="BannerBorder" Height="220" VerticalAlignment="Top">
            <Border.Background>
                <ImageBrush x:Name="BannerBrush" Stretch="UniformToFill">
                    <ImageBrush.ImageSource>
                        <DrawingImage>
                            <DrawingImage.Drawing>
                                <GeometryDrawing>
                                    <GeometryDrawing.Brush>
                                        <LinearGradientBrush StartPoint="0,0" EndPoint="1,1">
                                            <GradientStop x:Name="BannerGradient1" Color="#5865F2" Offset="0"/>
                                            <GradientStop x:Name="BannerGradient2" Color="#EB459E" Offset="1"/>
                                        </LinearGradientBrush>
                                    </GeometryDrawing.Brush>
                                    <GeometryDrawing.Geometry>
                                        <RectangleGeometry Rect="0,0,1,1"/>
                                    </GeometryDrawing.Geometry>
                                </GeometryDrawing>
                            </DrawingImage.Drawing>
                        </DrawingImage>
                    </ImageBrush.ImageSource>
                </ImageBrush>
            </Border.Background>
            <!-- Banner overlay gradient -->
            <Border>
                <Border.Background>
                    <LinearGradientBrush StartPoint="0.5,0" EndPoint="0.5,1">
                        <GradientStop Color="Transparent" Offset="0"/>
                        <GradientStop Color="#80000000" Offset="1"/>
                    </LinearGradientBrush>
                </Border.Background>
            </Border>
        </Border>

        <!-- Content -->
        <ScrollViewer Margin="0,120,0,0" VerticalScrollBarVisibility="Auto"
                      Style="{StaticResource ModernScrollViewer}">
            <StackPanel>
                <!-- Profile Card -->
                <Border Background="{StaticResource SecondaryDarkBrush}"
                        CornerRadius="12" Margin="24,0" Padding="24">
                    <Grid>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="Auto"/>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="Auto"/>
                        </Grid.ColumnDefinitions>

                        <!-- Avatar with Accent Ring -->
                        <Grid Grid.Column="0" Margin="0,0,24,0">
                            <Ellipse x:Name="AvatarAccentRing" Width="130" Height="130"
                                     StrokeThickness="4"/>
                            <Ellipse Width="120" Height="120"
                                     Stroke="{StaticResource SecondaryDarkBrush}"
                                     StrokeThickness="4">
                                <Ellipse.Fill>
                                    <ImageBrush x:Name="AvatarBrush" Stretch="UniformToFill"/>
                                </Ellipse.Fill>
                            </Ellipse>
                            <!-- Online Status -->
                            <Ellipse Width="28" Height="28"
                                     Fill="{StaticResource AccentGreenBrush}"
                                     Stroke="{StaticResource SecondaryDarkBrush}"
                                     StrokeThickness="4"
                                     HorizontalAlignment="Right"
                                     VerticalAlignment="Bottom"
                                     Margin="0,0,8,8"/>
                        </Grid>

                        <!-- User Info -->
                        <StackPanel Grid.Column="1" VerticalAlignment="Center">
                            <StackPanel Orientation="Horizontal">
                                <TextBlock x:Name="DisplayNameText" FontSize="28" FontWeight="Bold"
                                           Foreground="{StaticResource TextPrimaryBrush}"/>
                                <Border x:Name="RoleBadge" CornerRadius="4"
                                        Padding="8,4" Margin="12,0,0,0"
                                        VerticalAlignment="Center">
                                    <TextBlock x:Name="RoleBadgeText" FontSize="12" FontWeight="Bold"
                                               Foreground="White"/>
                                </Border>
                                <Border x:Name="RankBadge" CornerRadius="4"
                                        Padding="8,4" Margin="8,0,0,0"
                                        VerticalAlignment="Center">
                                    <TextBlock x:Name="RankBadgeText" FontSize="12" FontWeight="Bold"
                                               Foreground="White"/>
                                </Border>
                            </StackPanel>

                            <!-- Username (if display name is different) -->
                            <TextBlock x:Name="UsernameText" FontSize="14"
                                       Foreground="{StaticResource TextMutedBrush}"
                                       Margin="0,4,0,0" Visibility="Collapsed"/>

                            <!-- Status Message -->
                            <StackPanel x:Name="StatusPanel" Orientation="Horizontal" Margin="0,8,0,0"
                                        Visibility="Collapsed">
                                <Ellipse x:Name="StatusDot" Width="8" Height="8" Margin="0,0,8,0"
                                         VerticalAlignment="Center"/>
                                <TextBlock x:Name="StatusText" FontSize="14"
                                           Foreground="{StaticResource TextSecondaryBrush}"/>
                            </StackPanel>

                            <!-- Bio -->
                            <TextBlock x:Name="BioText" FontSize="14"
                                       Foreground="{StaticResource TextSecondaryBrush}"
                                       Margin="0,8,0,0" TextWrapping="Wrap"
                                       MaxWidth="500" HorizontalAlignment="Left"/>

                            <TextBlock x:Name="JoinedText" FontSize="12"
                                       Foreground="{StaticResource TextMutedBrush}"
                                       Margin="0,12,0,0"/>
                        </StackPanel>

                        <!-- Action Buttons -->
                        <StackPanel Grid.Column="2" Orientation="Horizontal" VerticalAlignment="Top">
                            <!-- Edit button (own profile) -->
                            <Button x:Name="EditProfileButton" Content="Edit Profile"
                                    Style="{StaticResource SecondaryButton}"
                                    Padding="16,10" Margin="0,0,8,0"
                                    Click="EditProfile_Click"/>

                            <!-- Follow button (other profiles) -->
                            <Button x:Name="FollowButton" Style="{StaticResource SecondaryButton}"
                                    Padding="16,10" Margin="0,0,8,0"
                                    Click="FollowUser_Click" Visibility="Collapsed">
                                <StackPanel Orientation="Horizontal">
                                    <TextBlock x:Name="FollowIcon" Text="ðŸ‘" Margin="0,0,6,0"/>
                                    <TextBlock x:Name="FollowText" Text="Follow"/>
                                </StackPanel>
                            </Button>

                            <!-- Add Friend button (other profiles) -->
                            <Button x:Name="AddFriendButton" Style="{StaticResource PrimaryButton}"
                                    Padding="16,10" Visibility="Collapsed"
                                    Click="AddFriend_Click">
                                <StackPanel Orientation="Horizontal">
                                    <TextBlock x:Name="FriendIcon" Text="ðŸ‘¥" Margin="0,0,6,0"/>
                                    <TextBlock x:Name="FriendText" Text="Add Friend"/>
                                </StackPanel>
                            </Button>

                            <!-- Message button (other profiles) -->
                            <Button x:Name="MessageButton" Style="{StaticResource SecondaryButton}"
                                    Padding="16,10" Margin="8,0,0,0" Visibility="Collapsed"
                                    Click="MessageUser_Click">
                                <StackPanel Orientation="Horizontal">
                                    <TextBlock Text="ðŸ’¬" Margin="0,0,6,0"/>
                                    <TextBlock Text="Message"/>
                                </StackPanel>
                            </Button>
                        </StackPanel>
                    </Grid>
                </Border>

                <!-- Stats Cards -->
                <Grid Margin="24,16">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="*"/>
                    </Grid.ColumnDefinitions>

                    <!-- Balance -->
                    <Border Grid.Column="0" Background="{StaticResource SecondaryDarkBrush}"
                            CornerRadius="8" Padding="20" Margin="0,0,8,0">
                        <StackPanel>
                            <TextBlock Text="Balance" FontSize="12"
                                       Foreground="{StaticResource TextMutedBrush}"/>
                            <TextBlock x:Name="BalanceText" FontSize="24" FontWeight="Bold"
                                       Foreground="{StaticResource AccentGreenBrush}"
                                       Margin="0,8,0,0"/>
                        </StackPanel>
                    </Border>

                    <!-- Reputation -->
                    <Border Grid.Column="1" Background="{StaticResource SecondaryDarkBrush}"
                            CornerRadius="8" Padding="20" Margin="8,0">
                        <StackPanel>
                            <TextBlock Text="Reputation" FontSize="12"
                                       Foreground="{StaticResource TextMutedBrush}"/>
                            <TextBlock x:Name="ReputationText" FontSize="24" FontWeight="Bold"
                                       Foreground="{StaticResource AccentYellowBrush}"
                                       Margin="0,8,0,0"/>
                        </StackPanel>
                    </Border>

                    <!-- Sales -->
                    <Border Grid.Column="2" Background="{StaticResource SecondaryDarkBrush}"
                            CornerRadius="8" Padding="20" Margin="8,0">
                        <StackPanel>
                            <TextBlock Text="Sales" FontSize="12"
                                       Foreground="{StaticResource TextMutedBrush}"/>
                            <TextBlock x:Name="SalesText" FontSize="24" FontWeight="Bold"
                                       Foreground="{StaticResource AccentCyanBrush}"
                                       Margin="0,8,0,0"/>
                        </StackPanel>
                    </Border>

                    <!-- Purchases -->
                    <Border Grid.Column="3" Background="{StaticResource SecondaryDarkBrush}"
                            CornerRadius="8" Padding="20" Margin="8,0,0,0">
                        <StackPanel>
                            <TextBlock Text="Purchases" FontSize="12"
                                       Foreground="{StaticResource TextMutedBrush}"/>
                            <TextBlock x:Name="PurchasesText" FontSize="24" FontWeight="Bold"
                                       Foreground="{StaticResource AccentPinkBrush}"
                                       Margin="0,8,0,0"/>
                        </StackPanel>
                    </Border>
                </Grid>

                <!-- Social Stats (Followers/Following) -->
                <Grid Margin="24,16,24,0">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="*"/>
                    </Grid.ColumnDefinitions>

                    <!-- Followers -->
                    <Border Grid.Column="0" Background="{StaticResource SecondaryDarkBrush}"
                            CornerRadius="8" Padding="20" Margin="0,0,8,0"
                            Cursor="Hand" x:Name="FollowersBorder" MouseLeftButtonDown="Followers_Click">
                        <StackPanel HorizontalAlignment="Center">
                            <TextBlock x:Name="FollowersCountText" FontSize="28" FontWeight="Bold"
                                       Foreground="{StaticResource TextPrimaryBrush}"
                                       HorizontalAlignment="Center" Text="0"/>
                            <TextBlock Text="Followers" FontSize="14"
                                       Foreground="{StaticResource TextSecondaryBrush}"
                                       HorizontalAlignment="Center" Margin="0,4,0,0"/>
                        </StackPanel>
                    </Border>

                    <!-- Following -->
                    <Border Grid.Column="1" Background="{StaticResource SecondaryDarkBrush}"
                            CornerRadius="8" Padding="20" Margin="8,0,0,0"
                            Cursor="Hand" x:Name="FollowingBorder" MouseLeftButtonDown="Following_Click">
                        <StackPanel HorizontalAlignment="Center">
                            <TextBlock x:Name="FollowingCountText" FontSize="28" FontWeight="Bold"
                                       Foreground="{StaticResource TextPrimaryBrush}"
                                       HorizontalAlignment="Center" Text="0"/>
                            <TextBlock Text="Following" FontSize="14"
                                       Foreground="{StaticResource TextSecondaryBrush}"
                                       HorizontalAlignment="Center" Margin="0,4,0,0"/>
                        </StackPanel>
                    </Border>
                </Grid>

                <!-- Quick Links -->
                <Border Background="{StaticResource SecondaryDarkBrush}"
                        CornerRadius="8" Margin="24,0" Padding="16">
                    <StackPanel Orientation="Horizontal" HorizontalAlignment="Center">
                        <Button Style="{StaticResource SecondaryButton}" Padding="20,10" Margin="0,0,8,0"
                                Click="Wishlist_Click">
                            <StackPanel Orientation="Horizontal">
                                <TextBlock Text="â¤ï¸" FontSize="16" Margin="0,0,8,0"/>
                                <TextBlock Text="My Wishlist" VerticalAlignment="Center"/>
                            </StackPanel>
                        </Button>
                        <Button Style="{StaticResource SecondaryButton}" Padding="20,10" Margin="0,0,8,0"
                                Click="OrderHistory_Click">
                            <StackPanel Orientation="Horizontal">
                                <TextBlock Text="ðŸ“¦" FontSize="16" Margin="0,0,8,0"/>
                                <TextBlock Text="Order History" VerticalAlignment="Center"/>
                            </StackPanel>
                        </Button>
                        <Button Style="{StaticResource SecondaryButton}" Padding="20,10" Margin="0,0,8,0"
                                Click="MyListings_Click">
                            <StackPanel Orientation="Horizontal">
                                <TextBlock Text="ðŸ·ï¸" FontSize="16" Margin="0,0,8,0"/>
                                <TextBlock Text="My Listings" VerticalAlignment="Center"/>
                            </StackPanel>
                        </Button>
                        <Button Style="{StaticResource SecondaryButton}" Padding="20,10"
                                Click="ViewCart_Click">
                            <StackPanel Orientation="Horizontal">
                                <TextBlock Text="ðŸ›’" FontSize="16" Margin="0,0,8,0"/>
                                <TextBlock Text="View Cart" VerticalAlignment="Center"/>
                            </StackPanel>
                        </Button>
                    </StackPanel>
                </Border>

                <!-- Two Column Layout for About & Social -->
                <Grid Margin="24,0">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="2*"/>
                        <ColumnDefinition Width="*"/>
                    </Grid.ColumnDefinitions>

                    <!-- About Me Section -->
                    <Border Grid.Column="0" Background="{StaticResource SecondaryDarkBrush}"
                            CornerRadius="8" Padding="24" Margin="0,0,8,0">
                        <StackPanel>
                            <TextBlock Text="ABOUT ME" FontSize="12" FontWeight="Bold"
                                       Foreground="{StaticResource TextMutedBrush}"
                                       Margin="0,0,0,12"/>
                            <TextBlock x:Name="DescriptionText" FontSize="14"
                                       Foreground="{StaticResource TextSecondaryBrush}"
                                       TextWrapping="Wrap" LineHeight="22"/>
                        </StackPanel>
                    </Border>

                    <!-- Social Links Section -->
                    <Border Grid.Column="1" Background="{StaticResource SecondaryDarkBrush}"
                            CornerRadius="8" Padding="24" Margin="8,0,0,0">
                        <StackPanel>
                            <TextBlock Text="CONNECTIONS" FontSize="12" FontWeight="Bold"
                                       Foreground="{StaticResource TextMutedBrush}"
                                       Margin="0,0,0,12"/>
                            <StackPanel x:Name="SocialLinksPanel">
                                <TextBlock x:Name="NoSocialLinksText"
                                           Text="No connections added"
                                           FontSize="13" Foreground="{StaticResource TextMutedBrush}"/>
                            </StackPanel>
                        </StackPanel>
                    </Border>
                </Grid>

                <!-- Custom Roles Section -->
                <Border Background="{StaticResource SecondaryDarkBrush}"
                        CornerRadius="8" Margin="24,16,24,0" Padding="24">
                    <StackPanel>
                        <TextBlock Text="ROLES" FontSize="12" FontWeight="Bold"
                                   Foreground="{StaticResource TextMutedBrush}"
                                   Margin="0,0,0,12"/>
                        <WrapPanel x:Name="RolesPanel"/>
                    </StackPanel>
                </Border>

                <!-- Badges Section -->
                <Border Background="{StaticResource SecondaryDarkBrush}"
                        CornerRadius="8" Margin="24,16,24,0" Padding="24">
                    <StackPanel>
                        <TextBlock Text="BADGES" FontSize="12" FontWeight="Bold"
                                   Foreground="{StaticResource TextMutedBrush}"
                                   Margin="0,0,0,16"/>
                        <WrapPanel x:Name="BadgesPanel">
                            <Border Background="{StaticResource QuaternaryDarkBrush}"
                                    CornerRadius="8" Padding="16,12" Margin="0,0,8,8">
                                <StackPanel Orientation="Horizontal">
                                    <TextBlock Text="Early Adopter"
                                               Foreground="{StaticResource TextPrimaryBrush}"
                                               VerticalAlignment="Center"/>
                                </StackPanel>
                            </Border>
                            <Border Background="{StaticResource QuaternaryDarkBrush}"
                                    CornerRadius="8" Padding="16,12" Margin="0,0,8,8">
                                <StackPanel Orientation="Horizontal">
                                    <TextBlock Text="Verified Seller"
                                               Foreground="{StaticResource TextPrimaryBrush}"
                                               VerticalAlignment="Center"/>
                                </StackPanel>
                            </Border>
                        </WrapPanel>
                    </StackPanel>
                </Border>

                <!-- Payment Methods -->
                <Border Background="{StaticResource SecondaryDarkBrush}"
                        CornerRadius="8" Margin="24,16,24,24" Padding="24">
                    <StackPanel>
                        <TextBlock Text="PAYMENT METHODS" FontSize="12" FontWeight="Bold"
                                   Foreground="{StaticResource TextMutedBrush}"
                                   Margin="0,0,0,16"/>
                        <StackPanel Orientation="Horizontal">
                            <Button Style="{StaticResource SecondaryButton}" Margin="0,0,8,0">
                                <StackPanel Orientation="Horizontal">
                                    <TextBlock Text="Add PayPal"/>
                                </StackPanel>
                            </Button>
                            <Button Style="{StaticResource SecondaryButton}">
                                <StackPanel Orientation="Horizontal">
                                    <TextBlock Text="Add Bitcoin"/>
                                </StackPanel>
                            </Button>
                        </StackPanel>
                    </StackPanel>
                </Border>
            </StackPanel>
        </ScrollViewer>
    </Grid>
</UserControl>
