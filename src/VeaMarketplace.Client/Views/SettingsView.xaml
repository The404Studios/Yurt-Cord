<UserControl x:Class="VeaMarketplace.Client.Views.SettingsView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:viewmodels="clr-namespace:VeaMarketplace.Client.ViewModels"
             xmlns:converters="clr-namespace:VeaMarketplace.Client.Converters"
             Background="Transparent"
             KeyDown="UserControl_KeyDown">

    <UserControl.Resources>
        <BooleanToVisibilityConverter x:Key="BoolToVis"/>
        <converters:InverseBoolToVisibilityConverter x:Key="InverseBoolToVis"/>
        <converters:SliderFillConverter x:Key="SliderFillConverter"/>
        <converters:AudioLevelConverter x:Key="AudioLevelConverter"/>

        <!-- Blade slide-in animation -->
        <Storyboard x:Key="BladeSettingsSlideIn">
            <DoubleAnimation Storyboard.TargetName="SettingsGrid"
                             Storyboard.TargetProperty="(UIElement.RenderTransform).(TranslateTransform.Y)"
                             From="50" To="0" Duration="0:0:0.4">
                <DoubleAnimation.EasingFunction>
                    <CubicEase EasingMode="EaseOut"/>
                </DoubleAnimation.EasingFunction>
            </DoubleAnimation>
            <DoubleAnimation Storyboard.TargetName="SettingsGrid"
                             Storyboard.TargetProperty="Opacity"
                             From="0" To="1" Duration="0:0:0.35"/>
        </Storyboard>

        <!-- Blade Settings Card Style -->
        <Style x:Key="BladeSettingsCard" TargetType="Border">
            <Setter Property="CornerRadius" Value="12"/>
            <Setter Property="Padding" Value="20"/>
            <Setter Property="Margin" Value="0,0,0,12"/>
            <Setter Property="BorderThickness" Value="1"/>
            <Setter Property="Background">
                <Setter.Value>
                    <LinearGradientBrush StartPoint="0,0" EndPoint="1,1">
                        <GradientStop Color="#18101828" Offset="0"/>
                        <GradientStop Color="#20182030" Offset="0.5"/>
                        <GradientStop Color="#18101828" Offset="1"/>
                    </LinearGradientBrush>
                </Setter.Value>
            </Setter>
            <Setter Property="BorderBrush">
                <Setter.Value>
                    <SolidColorBrush Color="#3000B4D8"/>
                </Setter.Value>
            </Setter>
        </Style>

        <!-- Blade Toggle Switch Style -->
        <Style x:Key="BladeToggleSwitch" TargetType="CheckBox">
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="CheckBox">
                        <Grid>
                            <Border x:Name="Background" Width="50" Height="26"
                                    CornerRadius="13">
                                <Border.Background>
                                    <LinearGradientBrush StartPoint="0,0" EndPoint="1,0">
                                        <GradientStop Color="#30506080" Offset="0"/>
                                        <GradientStop Color="#20506080" Offset="1"/>
                                    </LinearGradientBrush>
                                </Border.Background>
                                <Border.BorderBrush>
                                    <SolidColorBrush Color="#40506080"/>
                                </Border.BorderBrush>
                                <Border.BorderThickness>1</Border.BorderThickness>
                            </Border>
                            <Border x:Name="Indicator" Width="20" Height="20" CornerRadius="10"
                                    HorizontalAlignment="Left" Margin="3,0,0,0">
                                <Border.Background>
                                    <SolidColorBrush Color="#8090B0"/>
                                </Border.Background>
                            </Border>
                        </Grid>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsChecked" Value="True">
                                <Setter TargetName="Background" Property="Background">
                                    <Setter.Value>
                                        <LinearGradientBrush StartPoint="0,0" EndPoint="1,0">
                                            <GradientStop Color="#00B4D8" Offset="0"/>
                                            <GradientStop Color="#48CAE4" Offset="1"/>
                                        </LinearGradientBrush>
                                    </Setter.Value>
                                </Setter>
                                <Setter TargetName="Background" Property="Effect">
                                    <Setter.Value>
                                        <DropShadowEffect Color="#00B4D8" BlurRadius="10" ShadowDepth="0" Opacity="0.5"/>
                                    </Setter.Value>
                                </Setter>
                                <Setter TargetName="Indicator" Property="HorizontalAlignment" Value="Right"/>
                                <Setter TargetName="Indicator" Property="Margin" Value="0,0,3,0"/>
                                <Setter TargetName="Indicator" Property="Background">
                                    <Setter.Value>
                                        <SolidColorBrush Color="#020408"/>
                                    </Setter.Value>
                                </Setter>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <!-- Blade Nav Button Style -->
        <Style x:Key="BladeSettingsNavButton" TargetType="Button">
            <Setter Property="Background" Value="Transparent"/>
            <Setter Property="Foreground" Value="#8090B0"/>
            <Setter Property="Padding" Value="14,10"/>
            <Setter Property="Margin" Value="0,2"/>
            <Setter Property="HorizontalContentAlignment" Value="Left"/>
            <Setter Property="Cursor" Value="Hand"/>
            <Setter Property="FontSize" Value="13"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Border x:Name="Bd" Background="{TemplateBinding Background}"
                                CornerRadius="8" Padding="{TemplateBinding Padding}"
                                BorderThickness="1" BorderBrush="Transparent">
                            <ContentPresenter HorizontalAlignment="{TemplateBinding HorizontalContentAlignment}"
                                              VerticalAlignment="Center"/>
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter TargetName="Bd" Property="Background" Value="#20101828"/>
                                <Setter TargetName="Bd" Property="BorderBrush" Value="#3000B4D8"/>
                                <Setter Property="Foreground" Value="#E0E8FF"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <!-- Active Nav Button Style -->
        <Style x:Key="BladeSettingsNavButtonActive" TargetType="Button" BasedOn="{StaticResource BladeSettingsNavButton}">
            <Setter Property="Background" Value="#25101828"/>
            <Setter Property="Foreground" Value="#00B4D8"/>
        </Style>

        <!-- Blade ComboBox Style -->
        <Style x:Key="BladeComboBox" TargetType="ComboBox">
            <Setter Property="Background" Value="#15101828"/>
            <Setter Property="Foreground" Value="#E0E8FF"/>
            <Setter Property="BorderThickness" Value="1"/>
            <Setter Property="BorderBrush" Value="#3000B4D8"/>
            <Setter Property="Padding" Value="14,10"/>
            <Setter Property="FontSize" Value="13"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="ComboBox">
                        <Grid>
                            <Border x:Name="Border" Background="{TemplateBinding Background}"
                                    CornerRadius="8" BorderThickness="{TemplateBinding BorderThickness}"
                                    BorderBrush="{TemplateBinding BorderBrush}">
                                <Grid>
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="*"/>
                                        <ColumnDefinition Width="36"/>
                                    </Grid.ColumnDefinitions>
                                    <ContentPresenter Grid.Column="0"
                                                      Content="{TemplateBinding SelectionBoxItem}"
                                                      ContentTemplate="{TemplateBinding SelectionBoxItemTemplate}"
                                                      Margin="{TemplateBinding Padding}"
                                                      VerticalAlignment="Center"/>
                                    <TextBlock Grid.Column="1" Text="â–¼" FontSize="10"
                                               Foreground="#6080A0"
                                               VerticalAlignment="Center" HorizontalAlignment="Center"/>
                                </Grid>
                            </Border>
                            <Popup x:Name="PART_Popup" IsOpen="{TemplateBinding IsDropDownOpen}"
                                   Placement="Bottom" AllowsTransparency="True">
                                <Border Background="#F8080C18" CornerRadius="8" Margin="0,4,0,0"
                                        BorderThickness="1" BorderBrush="#5000B4D8"
                                        MaxHeight="{TemplateBinding MaxDropDownHeight}">
                                    <Border.Effect>
                                        <DropShadowEffect Color="#00B4D8" BlurRadius="15" ShadowDepth="0" Opacity="0.4"/>
                                    </Border.Effect>
                                    <ScrollViewer Style="{StaticResource BladeScrollViewer}">
                                        <ItemsPresenter/>
                                    </ScrollViewer>
                                </Border>
                            </Popup>
                        </Grid>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsDropDownOpen" Value="True">
                                <Setter TargetName="Border" Property="BorderBrush" Value="#00B4D8"/>
                                <Setter TargetName="Border" Property="Effect">
                                    <Setter.Value>
                                        <DropShadowEffect Color="#00B4D8" BlurRadius="10" ShadowDepth="0" Opacity="0.3"/>
                                    </Setter.Value>
                                </Setter>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
            <Setter Property="ItemContainerStyle">
                <Setter.Value>
                    <Style TargetType="ComboBoxItem">
                        <Setter Property="Background" Value="Transparent"/>
                        <Setter Property="Foreground" Value="#E0E8FF"/>
                        <Setter Property="Padding" Value="14,10"/>
                        <Setter Property="Template">
                            <Setter.Value>
                                <ControlTemplate TargetType="ComboBoxItem">
                                    <Border x:Name="Bd" Background="{TemplateBinding Background}"
                                            Padding="{TemplateBinding Padding}">
                                        <ContentPresenter/>
                                    </Border>
                                    <ControlTemplate.Triggers>
                                        <Trigger Property="IsMouseOver" Value="True">
                                            <Setter TargetName="Bd" Property="Background" Value="#25101828"/>
                                        </Trigger>
                                        <Trigger Property="IsSelected" Value="True">
                                            <Setter TargetName="Bd" Property="Background">
                                                <Setter.Value>
                                                    <LinearGradientBrush StartPoint="0,0" EndPoint="1,0">
                                                        <GradientStop Color="#4000B4D8" Offset="0"/>
                                                        <GradientStop Color="#2048CAE4" Offset="1"/>
                                                    </LinearGradientBrush>
                                                </Setter.Value>
                                            </Setter>
                                        </Trigger>
                                    </ControlTemplate.Triggers>
                                </ControlTemplate>
                            </Setter.Value>
                        </Setter>
                    </Style>
                </Setter.Value>
            </Setter>
        </Style>
    </UserControl.Resources>

    <UserControl.Triggers>
        <EventTrigger RoutedEvent="Loaded">
            <BeginStoryboard Storyboard="{StaticResource BladeSettingsSlideIn}"/>
        </EventTrigger>
    </UserControl.Triggers>

    <Grid x:Name="SettingsGrid">
        <Grid.RenderTransform>
            <TranslateTransform Y="0"/>
        </Grid.RenderTransform>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="240"/>
            <ColumnDefinition Width="*"/>
        </Grid.ColumnDefinitions>

        <!-- Settings Sidebar Blade -->
        <Border Grid.Column="0" Margin="8">
            <Border.Background>
                <LinearGradientBrush StartPoint="0,0" EndPoint="0,1">
                    <GradientStop Color="#15101828" Offset="0"/>
                    <GradientStop Color="#10080C18" Offset="0.5"/>
                    <GradientStop Color="#15101828" Offset="1"/>
                </LinearGradientBrush>
            </Border.Background>
            <Border CornerRadius="12" BorderThickness="1" BorderBrush="#2000B4D8">
                <ScrollViewer VerticalScrollBarVisibility="Auto" Style="{StaticResource BladeScrollViewer}">
                    <StackPanel Margin="12,16">
                        <!-- User Settings Section -->
                        <Border Padding="10,6" Margin="0,0,0,8" CornerRadius="6" Background="#10101828">
                            <TextBlock Text="USER SETTINGS" FontSize="10" FontWeight="Bold"
                                       Foreground="#6080A0"/>
                        </Border>

                        <Button x:Name="AccountNavButton" Content="ðŸ‘¤  My Account"
                                Style="{StaticResource BladeSettingsNavButton}" Click="NavButton_Click" Tag="Account"/>
                        <Button x:Name="ProfileNavButton" Content="ðŸŽ¨  Profile"
                                Style="{StaticResource BladeSettingsNavButton}" Click="NavButton_Click" Tag="Profile"/>
                        <Button x:Name="PrivacyNavButton" Content="ðŸ”’  Privacy &amp; Safety"
                                Style="{StaticResource BladeSettingsNavButton}" Click="NavButton_Click" Tag="Privacy"/>

                        <!-- Divider -->
                        <Border Height="1" Margin="8,14" CornerRadius="1">
                            <Border.Background>
                                <LinearGradientBrush StartPoint="0,0" EndPoint="1,0">
                                    <GradientStop Color="Transparent" Offset="0"/>
                                    <GradientStop Color="#3000B4D8" Offset="0.5"/>
                                    <GradientStop Color="Transparent" Offset="1"/>
                                </LinearGradientBrush>
                            </Border.Background>
                        </Border>

                        <!-- App Settings Section -->
                        <Border Padding="10,6" Margin="0,0,0,8" CornerRadius="6" Background="#10101828">
                            <TextBlock Text="APP SETTINGS" FontSize="10" FontWeight="Bold"
                                       Foreground="#6080A0"/>
                        </Border>

                        <Button x:Name="AppearanceNavButton" Content="ðŸ–¼ï¸  Appearance"
                                Style="{StaticResource BladeSettingsNavButton}" Click="NavButton_Click" Tag="Appearance"/>
                        <Button x:Name="NotificationsNavButton" Content="ðŸ””  Notifications"
                                Style="{StaticResource BladeSettingsNavButton}" Click="NavButton_Click" Tag="Notifications"/>
                        <Button x:Name="VoiceNavButton" Content="ðŸŽ™ï¸  Voice &amp; Audio"
                                Style="{StaticResource BladeSettingsNavButtonActive}" Click="NavButton_Click" Tag="Voice"/>
                        <Button x:Name="KeybindsNavButton" Content="âŒ¨ï¸  Keybinds"
                                Style="{StaticResource BladeSettingsNavButton}" Click="NavButton_Click" Tag="Keybinds"/>

                        <!-- Divider -->
                        <Border Height="1" Margin="8,14" CornerRadius="1">
                            <Border.Background>
                                <LinearGradientBrush StartPoint="0,0" EndPoint="1,0">
                                    <GradientStop Color="Transparent" Offset="0"/>
                                    <GradientStop Color="#3048CAE4" Offset="0.5"/>
                                    <GradientStop Color="Transparent" Offset="1"/>
                                </LinearGradientBrush>
                            </Border.Background>
                        </Border>

                        <!-- QoL Features Section -->
                        <Border Padding="10,6" Margin="0,0,0,8" CornerRadius="6">
                            <Border.Background>
                                <LinearGradientBrush StartPoint="0,0" EndPoint="1,0">
                                    <GradientStop Color="#1500B4D8" Offset="0"/>
                                    <GradientStop Color="#10101828" Offset="1"/>
                                </LinearGradientBrush>
                            </Border.Background>
                            <TextBlock Text="QOL FEATURES" FontSize="10" FontWeight="Bold"
                                       Foreground="#00B4D8">
                                <TextBlock.Effect>
                                    <DropShadowEffect Color="#00B4D8" BlurRadius="6" ShadowDepth="0" Opacity="0.5"/>
                                </TextBlock.Effect>
                            </TextBlock>
                        </Border>

                        <Button x:Name="TemplatesNavButton" Content="ðŸ“  Message Templates"
                                Style="{StaticResource BladeSettingsNavButton}" Click="NavButton_Click" Tag="Templates"/>
                        <Button x:Name="ScheduledNavButton" Content="â°  Scheduled Messages"
                                Style="{StaticResource BladeSettingsNavButton}" Click="NavButton_Click" Tag="Scheduled"/>
                        <Button x:Name="StatusSchedulerNavButton" Content="ðŸ”„  Status Scheduler"
                                Style="{StaticResource BladeSettingsNavButton}" Click="NavButton_Click" Tag="StatusScheduler"/>
                        <Button x:Name="SmartDndNavButton" Content="ðŸŒ™  Smart DND"
                                Style="{StaticResource BladeSettingsNavButton}" Click="NavButton_Click" Tag="SmartDND"/>
                        <Button x:Name="QuickActionsNavButton" Content="âš¡  Quick Actions"
                                Style="{StaticResource BladeSettingsNavButton}" Click="NavButton_Click" Tag="QuickActions"/>
                        <Button x:Name="InsightsNavButton" Content="ðŸ“Š  Activity Insights"
                                Style="{StaticResource BladeSettingsNavButton}" Click="NavButton_Click" Tag="Insights"/>

                        <!-- Admin Section -->
                        <Border Height="1" Margin="8,14" CornerRadius="1" x:Name="AdminDivider" Visibility="Collapsed">
                            <Border.Background>
                                <LinearGradientBrush StartPoint="0,0" EndPoint="1,0">
                                    <GradientStop Color="Transparent" Offset="0"/>
                                    <GradientStop Color="#30FFD700" Offset="0.5"/>
                                    <GradientStop Color="Transparent" Offset="1"/>
                                </LinearGradientBrush>
                            </Border.Background>
                        </Border>

                        <TextBlock x:Name="AdminSectionHeader" Text="ADMIN" FontSize="10" FontWeight="Bold"
                                   Foreground="#FFD700" Margin="12,0,0,8" Visibility="Collapsed"/>

                        <Button x:Name="ModerationNavButton" Content="ðŸ›¡ï¸  Moderation"
                                Style="{StaticResource BladeSettingsNavButton}" Click="Moderation_Click"
                                Visibility="Collapsed"/>

                        <!-- Divider -->
                        <Border Height="1" Margin="8,14" CornerRadius="1">
                            <Border.Background>
                                <LinearGradientBrush StartPoint="0,0" EndPoint="1,0">
                                    <GradientStop Color="Transparent" Offset="0"/>
                                    <GradientStop Color="#30FF66B2" Offset="0.5"/>
                                    <GradientStop Color="Transparent" Offset="1"/>
                                </LinearGradientBrush>
                            </Border.Background>
                        </Border>

                        <!-- Logout Button -->
                        <Button Content="ðŸšª  Log Out" Style="{StaticResource BladeSettingsNavButton}"
                                Click="LogOut_Click" Foreground="#FF66B2"/>
                    </StackPanel>
                </ScrollViewer>
            </Border>
        </Border>

        <!-- Settings Content Area -->
        <Grid Grid.Column="1" Margin="0,8,8,8">
            <!-- Header Blade -->
            <Border Height="56" VerticalAlignment="Top" CornerRadius="12,12,0,0"
                    BorderThickness="1,1,1,0" BorderBrush="#2000B4D8">
                <Border.Background>
                    <LinearGradientBrush StartPoint="0,0" EndPoint="1,0">
                        <GradientStop Color="#18101828" Offset="0"/>
                        <GradientStop Color="#20182030" Offset="0.5"/>
                        <GradientStop Color="#18101828" Offset="1"/>
                    </LinearGradientBrush>
                </Border.Background>
                <Grid>
                    <!-- Accent stripe -->
                    <Border Width="4" HorizontalAlignment="Left" CornerRadius="12,0,0,0">
                        <Border.Background>
                            <LinearGradientBrush StartPoint="0,0" EndPoint="0,1">
                                <GradientStop Color="#00B4D8" Offset="0"/>
                                <GradientStop Color="#48CAE4" Offset="1"/>
                            </LinearGradientBrush>
                        </Border.Background>
                    </Border>

                    <StackPanel Orientation="Horizontal" VerticalAlignment="Center" Margin="24,0">
                        <TextBlock x:Name="SettingsHeader" Text="Voice &amp; Audio" FontSize="18" FontWeight="SemiBold"
                                   Foreground="#E0E8FF">
                            <TextBlock.Effect>
                                <DropShadowEffect Color="#00B4D8" BlurRadius="6" ShadowDepth="0" Opacity="0.4"/>
                            </TextBlock.Effect>
                        </TextBlock>
                    </StackPanel>
                </Grid>
            </Border>

            <!-- Content Area with Blade ScrollViewer -->
            <Border Margin="0,56,0,0" CornerRadius="0,0,12,12"
                    BorderThickness="1,0,1,1" BorderBrush="#2000B4D8">
                <Border.Background>
                    <LinearGradientBrush StartPoint="0,0" EndPoint="0,1">
                        <GradientStop Color="#10101828" Offset="0"/>
                        <GradientStop Color="#08080C18" Offset="0.5"/>
                        <GradientStop Color="#10101828" Offset="1"/>
                    </LinearGradientBrush>
                </Border.Background>

                <ScrollViewer VerticalScrollBarVisibility="Auto" Style="{StaticResource BladeScrollViewer}">
                    <Grid Margin="24" MaxWidth="800">
                        <!-- Voice & Audio Panel (Default Visible) -->
                        <StackPanel x:Name="VoicePanel" Visibility="Visible">
                            <!-- Section Header -->
                            <Border Padding="12,8" Margin="0,0,0,16" CornerRadius="8" HorizontalAlignment="Left">
                                <Border.Background>
                                    <LinearGradientBrush StartPoint="0,0" EndPoint="1,0">
                                        <GradientStop Color="#2000B4D8" Offset="0"/>
                                        <GradientStop Color="#10101828" Offset="1"/>
                                    </LinearGradientBrush>
                                </Border.Background>
                                <TextBlock Text="VOICE &amp; AUDIO" FontSize="11" FontWeight="Bold"
                                           Foreground="#00B4D8">
                                    <TextBlock.Effect>
                                        <DropShadowEffect Color="#00B4D8" BlurRadius="6" ShadowDepth="0" Opacity="0.5"/>
                                    </TextBlock.Effect>
                                </TextBlock>
                            </Border>

                            <!-- Input Device Card -->
                            <Border Style="{StaticResource BladeSettingsCard}">
                                <StackPanel>
                                    <TextBlock Text="Input Device" FontSize="15" FontWeight="SemiBold"
                                               Foreground="#E0E8FF" Margin="0,0,0,12"/>
                                    <ComboBox x:Name="InputDeviceCombo" Style="{StaticResource BladeComboBox}"
                                              ItemsSource="{Binding InputDevices}"
                                              SelectedItem="{Binding SelectedInputDevice, Mode=TwoWay}"
                                              DisplayMemberPath="Name"/>

                                    <!-- Input Volume -->
                                    <TextBlock Text="Input Volume" FontSize="13" Margin="0,18,0,10"
                                               Foreground="#8090B0"/>
                                    <Grid>
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="*"/>
                                            <ColumnDefinition Width="60"/>
                                        </Grid.ColumnDefinitions>
                                        <Slider Grid.Column="0" Minimum="0" Maximum="2"
                                                Value="{Binding MicrophoneVolume, Mode=TwoWay}"
                                                Style="{StaticResource BladeSlider}"
                                                VerticalAlignment="Center"/>
                                        <TextBlock Grid.Column="1"
                                                   Text="{Binding MicrophoneVolume, StringFormat='{}{0:P0}'}"
                                                   Foreground="#6080A0" FontSize="13"
                                                   HorizontalAlignment="Right" VerticalAlignment="Center"/>
                                    </Grid>

                                    <!-- Microphone Test -->
                                    <TextBlock Text="Microphone Test" FontSize="13" Margin="0,18,0,10"
                                               Foreground="#8090B0"/>
                                    <Grid Height="10">
                                        <Border Background="#15101828" CornerRadius="5"/>
                                        <Border x:Name="AudioLevelIndicator" CornerRadius="5"
                                                HorizontalAlignment="Left">
                                            <Border.Background>
                                                <LinearGradientBrush StartPoint="0,0" EndPoint="1,0">
                                                    <GradientStop Color="#00B4D8" Offset="0"/>
                                                    <GradientStop Color="#48CAE4" Offset="1"/>
                                                </LinearGradientBrush>
                                            </Border.Background>
                                            <Border.Effect>
                                                <DropShadowEffect Color="#00B4D8" BlurRadius="8" ShadowDepth="0" Opacity="0.5"/>
                                            </Border.Effect>
                                            <Border.Width>
                                                <MultiBinding Converter="{StaticResource AudioLevelConverter}">
                                                    <Binding Path="TestAudioLevel"/>
                                                    <Binding Path="ActualWidth" RelativeSource="{RelativeSource AncestorType=Grid}"/>
                                                </MultiBinding>
                                            </Border.Width>
                                        </Border>
                                    </Grid>
                                </StackPanel>
                            </Border>

                            <!-- Output Device Card -->
                            <Border Style="{StaticResource BladeSettingsCard}">
                                <StackPanel>
                                    <TextBlock Text="Output Device" FontSize="15" FontWeight="SemiBold"
                                               Foreground="#E0E8FF" Margin="0,0,0,12"/>
                                    <ComboBox x:Name="OutputDeviceCombo" Style="{StaticResource BladeComboBox}"
                                              ItemsSource="{Binding OutputDevices}"
                                              SelectedItem="{Binding SelectedOutputDevice, Mode=TwoWay}"
                                              DisplayMemberPath="Name"/>

                                    <!-- Output Volume -->
                                    <TextBlock Text="Output Volume" FontSize="13" Margin="0,18,0,10"
                                               Foreground="#8090B0"/>
                                    <Grid>
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="*"/>
                                            <ColumnDefinition Width="60"/>
                                        </Grid.ColumnDefinitions>
                                        <Slider Grid.Column="0" Minimum="0" Maximum="2"
                                                Value="{Binding Volume, Mode=TwoWay}"
                                                Style="{StaticResource BladeSlider}"
                                                VerticalAlignment="Center"/>
                                        <TextBlock Grid.Column="1"
                                                   Text="{Binding Volume, StringFormat='{}{0:P0}'}"
                                                   Foreground="#6080A0" FontSize="13"
                                                   HorizontalAlignment="Right" VerticalAlignment="Center"/>
                                    </Grid>
                                </StackPanel>
                            </Border>

                            <!-- Voice Mode Section -->
                            <Border Padding="12,8" Margin="0,12,0,16" CornerRadius="8" HorizontalAlignment="Left">
                                <Border.Background>
                                    <LinearGradientBrush StartPoint="0,0" EndPoint="1,0">
                                        <GradientStop Color="#2048CAE4" Offset="0"/>
                                        <GradientStop Color="#10101828" Offset="1"/>
                                    </LinearGradientBrush>
                                </Border.Background>
                                <TextBlock Text="VOICE MODE" FontSize="11" FontWeight="Bold"
                                           Foreground="#48CAE4"/>
                            </Border>

                            <!-- Push to Talk Card -->
                            <Border Style="{StaticResource BladeSettingsCard}">
                                <StackPanel>
                                    <Grid Margin="0,0,0,16">
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="*"/>
                                            <ColumnDefinition Width="Auto"/>
                                        </Grid.ColumnDefinitions>
                                        <StackPanel>
                                            <TextBlock Text="Push to Talk" FontSize="15" FontWeight="SemiBold"
                                                       Foreground="#E0E8FF"/>
                                            <TextBlock Text="Transmit voice only when holding a key"
                                                       FontSize="12" Foreground="#6080A0" Margin="0,4,0,0"/>
                                        </StackPanel>
                                        <CheckBox Grid.Column="1" Style="{StaticResource BladeToggleSwitch}"
                                                  IsChecked="{Binding PushToTalkEnabled, Mode=TwoWay}"
                                                  VerticalAlignment="Center"/>
                                    </Grid>

                                    <!-- PTT Key -->
                                    <StackPanel Visibility="{Binding PushToTalkEnabled, Converter={StaticResource BoolToVis}}">
                                        <TextBlock Text="Push to Talk Key" FontSize="13" Margin="0,0,0,10"
                                                   Foreground="#8090B0"/>
                                        <Button x:Name="PttKeyButton" Click="PttKeyButton_Click"
                                                Style="{StaticResource BladeNavButton}" HorizontalAlignment="Left">
                                            <StackPanel Orientation="Horizontal">
                                                <TextBlock Text="Key: " Foreground="#8090B0"/>
                                                <TextBlock Text="{Binding PushToTalkKeyDisplay}"
                                                           FontWeight="Bold" Foreground="#00B4D8"/>
                                            </StackPanel>
                                        </Button>
                                        <TextBlock Text="Click to change, then press a new key"
                                                   FontSize="11" Foreground="#506080" Margin="0,8,0,0"
                                                   Visibility="{Binding IsRecordingPttKey, Converter={StaticResource BoolToVis}}"/>
                                    </StackPanel>

                                    <!-- Voice Activity -->
                                    <StackPanel Visibility="{Binding PushToTalkEnabled, Converter={StaticResource InverseBoolToVis}}">
                                        <TextBlock Text="Voice Activity Sensitivity" FontSize="13" Margin="0,0,0,10"
                                                   Foreground="#8090B0"/>
                                        <Grid>
                                            <Grid.ColumnDefinitions>
                                                <ColumnDefinition Width="*"/>
                                                <ColumnDefinition Width="100"/>
                                            </Grid.ColumnDefinitions>
                                            <Slider Grid.Column="0" Minimum="0.001" Maximum="0.2"
                                                    Value="{Binding VoiceActivityThreshold, Mode=TwoWay}"
                                                    Style="{StaticResource BladeSlider}"
                                                    VerticalAlignment="Center"/>
                                            <TextBlock Grid.Column="1" FontSize="11"
                                                       Text="{Binding VoiceActivityThreshold, StringFormat='Threshold: {0:F3}'}"
                                                       Foreground="#6080A0" HorizontalAlignment="Right" VerticalAlignment="Center"/>
                                        </Grid>
                                        <TextBlock Text="Lower = more sensitive, Higher = less sensitive"
                                                   FontSize="11" Foreground="#506080" Margin="0,8,0,0"/>
                                    </StackPanel>
                                </StackPanel>
                            </Border>

                            <!-- Audio Processing Card -->
                            <Border Style="{StaticResource BladeSettingsCard}">
                                <StackPanel>
                                    <TextBlock Text="Audio Processing" FontSize="15" FontWeight="SemiBold"
                                               Foreground="#E0E8FF" Margin="0,0,0,16"/>

                                    <!-- Noise Suppression -->
                                    <Grid Margin="0,0,0,14">
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="*"/>
                                            <ColumnDefinition Width="Auto"/>
                                        </Grid.ColumnDefinitions>
                                        <StackPanel>
                                            <TextBlock Text="Noise Suppression" FontSize="13" Foreground="#C0C8E0"/>
                                            <TextBlock Text="Reduces background noise" FontSize="11" Foreground="#506080"/>
                                        </StackPanel>
                                        <CheckBox Grid.Column="1" Style="{StaticResource BladeToggleSwitch}"
                                                  IsChecked="{Binding NoiseSuppression, Mode=TwoWay}"
                                                  VerticalAlignment="Center"/>
                                    </Grid>

                                    <!-- Echo Cancellation -->
                                    <Grid>
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="*"/>
                                            <ColumnDefinition Width="Auto"/>
                                        </Grid.ColumnDefinitions>
                                        <StackPanel>
                                            <TextBlock Text="Echo Cancellation" FontSize="13" Foreground="#C0C8E0"/>
                                            <TextBlock Text="Prevents echo from speakers" FontSize="11" Foreground="#506080"/>
                                        </StackPanel>
                                        <CheckBox Grid.Column="1" Style="{StaticResource BladeToggleSwitch}"
                                                  IsChecked="{Binding EchoCancellation, Mode=TwoWay}"
                                                  VerticalAlignment="Center"/>
                                    </Grid>
                                </StackPanel>
                            </Border>

                            <!-- Refresh Button -->
                            <Button Content="â†» Refresh Audio Devices" Style="{StaticResource BladeNavButton}"
                                    Command="{Binding RefreshDevicesCommand}" HorizontalAlignment="Left"
                                    Margin="0,8,0,0" Foreground="#00B4D8"/>
                        </StackPanel>

                        <!-- Other Panels (Collapsed by default) -->
                        <StackPanel x:Name="AccountPanel" Visibility="Collapsed">
                            <Border Padding="12,8" Margin="0,0,0,16" CornerRadius="8" HorizontalAlignment="Left"
                                    Background="#20101828">
                                <TextBlock Text="MY ACCOUNT" FontSize="11" FontWeight="Bold"
                                           Foreground="#8090B0"/>
                            </Border>

                            <Border Style="{StaticResource BladeSettingsCard}">
                                <Grid>
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="Auto"/>
                                        <ColumnDefinition Width="*"/>
                                        <ColumnDefinition Width="Auto"/>
                                    </Grid.ColumnDefinitions>
                                    <Border Grid.Column="0" Width="80" Height="80" CornerRadius="12" Margin="0,0,20,0">
                                        <Border.Background>
                                            <LinearGradientBrush StartPoint="0,0" EndPoint="1,1">
                                                <GradientStop Color="#00B4D8" Offset="0"/>
                                                <GradientStop Color="#0096B8" Offset="1"/>
                                            </LinearGradientBrush>
                                        </Border.Background>
                                        <Border.Effect>
                                            <DropShadowEffect Color="#00B4D8" BlurRadius="15" ShadowDepth="0" Opacity="0.5"/>
                                        </Border.Effect>
                                        <TextBlock Text="U" FontSize="32" FontWeight="Bold" Foreground="#020408"
                                                   HorizontalAlignment="Center" VerticalAlignment="Center"/>
                                    </Border>
                                    <StackPanel Grid.Column="1" VerticalAlignment="Center">
                                        <TextBlock x:Name="AccountUsername" Text="Username" FontSize="18" FontWeight="Bold"
                                                   Foreground="#E0E8FF"/>
                                        <TextBlock x:Name="AccountEmail" Text="email@example.com" FontSize="13"
                                                   Foreground="#6080A0" Margin="0,4,0,0"/>
                                    </StackPanel>
                                    <Button Grid.Column="2" Content="Edit Profile" Style="{StaticResource BladeNavButton}"
                                            VerticalAlignment="Center" Click="EditProfile_Click" Foreground="#00B4D8"/>
                                </Grid>
                            </Border>

                            <Border Style="{StaticResource BladeSettingsCard}">
                                <StackPanel>
                                    <TextBlock Text="Password" FontSize="15" FontWeight="SemiBold"
                                               Foreground="#E0E8FF" Margin="0,0,0,8"/>
                                    <TextBlock Text="â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢" FontSize="14" Foreground="#506080"/>
                                    <Button Content="Change Password" Style="{StaticResource BladeNavButton}"
                                            HorizontalAlignment="Left" Margin="0,12,0,0"/>
                                </StackPanel>
                            </Border>

                            <Border Style="{StaticResource BladeSettingsCard}">
                                <StackPanel>
                                    <TextBlock Text="Two-Factor Authentication" FontSize="15" FontWeight="SemiBold"
                                               Foreground="#E0E8FF" Margin="0,0,0,4"/>
                                    <TextBlock Text="Add an extra layer of security to your account"
                                               FontSize="12" Foreground="#6080A0" Margin="0,0,0,12"/>
                                    <Button Content="Enable 2FA" Style="{StaticResource BladeNavButton}"
                                            HorizontalAlignment="Left" Foreground="#48CAE4"/>
                                </StackPanel>
                            </Border>
                        </StackPanel>

                        <!-- Profile Panel -->
                        <StackPanel x:Name="ProfilePanel" Visibility="Collapsed">
                            <Border Padding="12,8" Margin="0,0,0,16" CornerRadius="8" HorizontalAlignment="Left">
                                <Border.Background>
                                    <LinearGradientBrush StartPoint="0,0" EndPoint="1,0">
                                        <GradientStop Color="#2000B4D8" Offset="0"/>
                                        <GradientStop Color="#10101828" Offset="1"/>
                                    </LinearGradientBrush>
                                </Border.Background>
                                <TextBlock Text="PROFILE" FontSize="11" FontWeight="Bold" Foreground="#00B4D8"/>
                            </Border>

                            <!-- Display Name Card -->
                            <Border Style="{StaticResource BladeSettingsCard}">
                                <StackPanel>
                                    <TextBlock Text="Display Name" FontSize="15" FontWeight="SemiBold"
                                               Foreground="#E0E8FF" Margin="0,0,0,8"/>
                                    <TextBlock Text="This is how others see you across Yurt Cord"
                                               FontSize="12" Foreground="#6080A0" Margin="0,0,0,12"/>
                                    <Border Background="#15101828" CornerRadius="8" BorderThickness="1" BorderBrush="#3000B4D8" Padding="12,10">
                                        <TextBox x:Name="ProfileDisplayNameBox" Background="Transparent" BorderThickness="0"
                                                 Foreground="#E0E8FF" FontSize="14" CaretBrush="#00B4D8"
                                                 Text="{Binding DisplayName, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"/>
                                    </Border>
                                </StackPanel>
                            </Border>

                            <!-- Bio Card -->
                            <Border Style="{StaticResource BladeSettingsCard}">
                                <StackPanel>
                                    <Grid Margin="0,0,0,8">
                                        <TextBlock Text="Bio" FontSize="15" FontWeight="SemiBold" Foreground="#E0E8FF"/>
                                        <TextBlock x:Name="BioCharCount" Text="0/150" FontSize="12" Foreground="#6080A0" HorizontalAlignment="Right"/>
                                    </Grid>
                                    <TextBlock Text="Tell others a bit about yourself"
                                               FontSize="12" Foreground="#6080A0" Margin="0,0,0,12"/>
                                    <Border Background="#15101828" CornerRadius="8" BorderThickness="1" BorderBrush="#3000B4D8" Padding="12,10">
                                        <TextBox x:Name="ProfileBioBox" Background="Transparent" BorderThickness="0"
                                                 Foreground="#E0E8FF" FontSize="14" CaretBrush="#00B4D8"
                                                 TextWrapping="Wrap" AcceptsReturn="True" Height="80"
                                                 VerticalScrollBarVisibility="Auto" MaxLength="150"
                                                 Text="{Binding Bio, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                                                 TextChanged="ProfileBio_TextChanged"/>
                                    </Border>
                                </StackPanel>
                            </Border>

                            <!-- Custom Status Card -->
                            <Border Style="{StaticResource BladeSettingsCard}">
                                <StackPanel>
                                    <TextBlock Text="Custom Status" FontSize="15" FontWeight="SemiBold"
                                               Foreground="#E0E8FF" Margin="0,0,0,8"/>
                                    <TextBlock Text="Set a custom status message visible to others"
                                               FontSize="12" Foreground="#6080A0" Margin="0,0,0,12"/>
                                    <Border Background="#15101828" CornerRadius="8" BorderThickness="1" BorderBrush="#3000B4D8" Padding="12,10">
                                        <Grid>
                                            <Grid.ColumnDefinitions>
                                                <ColumnDefinition Width="Auto"/>
                                                <ColumnDefinition Width="*"/>
                                            </Grid.ColumnDefinitions>
                                            <TextBlock Text="ðŸ’­" FontSize="16" VerticalAlignment="Center" Margin="0,0,10,0"/>
                                            <TextBox Grid.Column="1" x:Name="ProfileStatusBox" Background="Transparent" BorderThickness="0"
                                                     Foreground="#E0E8FF" FontSize="14" CaretBrush="#00B4D8" MaxLength="100"
                                                     Text="{Binding StatusMessage, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"/>
                                        </Grid>
                                    </Border>
                                </StackPanel>
                            </Border>

                            <!-- Avatar URL Card -->
                            <Border Style="{StaticResource BladeSettingsCard}">
                                <StackPanel>
                                    <TextBlock Text="Avatar URL" FontSize="15" FontWeight="SemiBold"
                                               Foreground="#E0E8FF" Margin="0,0,0,8"/>
                                    <TextBlock Text="Enter a URL to use as your profile picture"
                                               FontSize="12" Foreground="#6080A0" Margin="0,0,0,12"/>
                                    <Border Background="#15101828" CornerRadius="8" BorderThickness="1" BorderBrush="#3000B4D8" Padding="12,10">
                                        <TextBox x:Name="ProfileAvatarBox" Background="Transparent" BorderThickness="0"
                                                 Foreground="#E0E8FF" FontSize="14" CaretBrush="#00B4D8"
                                                 Text="{Binding AvatarUrl, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"/>
                                    </Border>
                                </StackPanel>
                            </Border>

                            <!-- Accent Color Card -->
                            <Border Style="{StaticResource BladeSettingsCard}">
                                <StackPanel>
                                    <TextBlock Text="Accent Color" FontSize="15" FontWeight="SemiBold"
                                               Foreground="#E0E8FF" Margin="0,0,0,8"/>
                                    <TextBlock Text="Choose a color for your profile accents"
                                               FontSize="12" Foreground="#6080A0" Margin="0,0,0,12"/>
                                    <StackPanel Orientation="Horizontal">
                                        <Border x:Name="AccentColorPreview" Width="40" Height="40" CornerRadius="8"
                                                Background="#00B4D8" Margin="0,0,12,0">
                                            <Border.Effect>
                                                <DropShadowEffect Color="#00B4D8" BlurRadius="10" ShadowDepth="0" Opacity="0.5"/>
                                            </Border.Effect>
                                        </Border>
                                        <Border Background="#15101828" CornerRadius="8" BorderThickness="1" BorderBrush="#3000B4D8" Padding="12,10" VerticalAlignment="Center">
                                            <TextBox x:Name="AccentColorBox" Background="Transparent" BorderThickness="0"
                                                     Foreground="#E0E8FF" FontSize="14" CaretBrush="#00B4D8" Width="100"
                                                     Text="{Binding AccentColor, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                                                     TextChanged="AccentColor_TextChanged"/>
                                        </Border>
                                    </StackPanel>
                                </StackPanel>
                            </Border>

                            <!-- Save Button -->
                            <Button Content="ðŸ’¾ Save Profile Changes" Style="{StaticResource BladeNavButton}"
                                    HorizontalAlignment="Left" Margin="0,8,0,0" Foreground="#00B4D8"
                                    Click="SaveProfile_Click"/>
                        </StackPanel>

                        <!-- Privacy Panel -->
                        <StackPanel x:Name="PrivacyPanel" Visibility="Collapsed">
                            <Border Padding="12,8" Margin="0,0,0,16" CornerRadius="8" HorizontalAlignment="Left">
                                <Border.Background>
                                    <LinearGradientBrush StartPoint="0,0" EndPoint="1,0">
                                        <GradientStop Color="#2000B4D8" Offset="0"/>
                                        <GradientStop Color="#10101828" Offset="1"/>
                                    </LinearGradientBrush>
                                </Border.Background>
                                <TextBlock Text="PRIVACY &amp; SAFETY" FontSize="11" FontWeight="Bold" Foreground="#00B4D8"/>
                            </Border>
                            <Border Style="{StaticResource BladeSettingsCard}">
                                <StackPanel>
                                    <Grid Margin="0,0,0,16">
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="*"/>
                                            <ColumnDefinition Width="Auto"/>
                                        </Grid.ColumnDefinitions>
                                        <StackPanel>
                                            <TextBlock Text="Allow Friend Requests" FontSize="14" Foreground="#E0E8FF"/>
                                            <TextBlock Text="Allow others to send you friend requests" FontSize="12" Foreground="#6080A0"/>
                                        </StackPanel>
                                        <CheckBox Grid.Column="1" Style="{StaticResource BladeToggleSwitch}"
                                                  IsChecked="{Binding AllowFriendRequests, Mode=TwoWay}" VerticalAlignment="Center"/>
                                    </Grid>
                                    <Grid Margin="0,0,0,16">
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="*"/>
                                            <ColumnDefinition Width="Auto"/>
                                        </Grid.ColumnDefinitions>
                                        <StackPanel>
                                            <TextBlock Text="Allow Direct Messages" FontSize="14" Foreground="#E0E8FF"/>
                                            <TextBlock Text="Allow members to send you direct messages" FontSize="12" Foreground="#6080A0"/>
                                        </StackPanel>
                                        <CheckBox Grid.Column="1" Style="{StaticResource BladeToggleSwitch}"
                                                  IsChecked="{Binding AllowDirectMessages, Mode=TwoWay}" VerticalAlignment="Center"/>
                                    </Grid>
                                    <Grid Margin="0,0,0,16">
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="*"/>
                                            <ColumnDefinition Width="Auto"/>
                                        </Grid.ColumnDefinitions>
                                        <StackPanel>
                                            <TextBlock Text="Show Online Status" FontSize="14" Foreground="#E0E8FF"/>
                                            <TextBlock Text="Show when you're online to others" FontSize="12" Foreground="#6080A0"/>
                                        </StackPanel>
                                        <CheckBox Grid.Column="1" Style="{StaticResource BladeToggleSwitch}"
                                                  IsChecked="{Binding ShowOnlineStatus, Mode=TwoWay}" VerticalAlignment="Center"/>
                                    </Grid>
                                    <Grid>
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="*"/>
                                            <ColumnDefinition Width="Auto"/>
                                        </Grid.ColumnDefinitions>
                                        <StackPanel>
                                            <TextBlock Text="Show Activity Status" FontSize="14" Foreground="#E0E8FF"/>
                                            <TextBlock Text="Show what you're currently doing" FontSize="12" Foreground="#6080A0"/>
                                        </StackPanel>
                                        <CheckBox Grid.Column="1" Style="{StaticResource BladeToggleSwitch}"
                                                  IsChecked="{Binding ShowActivityStatus, Mode=TwoWay}" VerticalAlignment="Center"/>
                                    </Grid>
                                </StackPanel>
                            </Border>
                        </StackPanel>

                        <!-- Appearance Panel -->
                        <StackPanel x:Name="AppearancePanel" Visibility="Collapsed">
                            <Border Padding="12,8" Margin="0,0,0,16" CornerRadius="8" HorizontalAlignment="Left">
                                <Border.Background>
                                    <LinearGradientBrush StartPoint="0,0" EndPoint="1,0">
                                        <GradientStop Color="#2048CAE4" Offset="0"/>
                                        <GradientStop Color="#10101828" Offset="1"/>
                                    </LinearGradientBrush>
                                </Border.Background>
                                <TextBlock Text="APPEARANCE" FontSize="11" FontWeight="Bold" Foreground="#48CAE4"/>
                            </Border>
                            <Border Style="{StaticResource BladeSettingsCard}">
                                <StackPanel>
                                    <TextBlock Text="Theme" FontSize="14" Foreground="#E0E8FF" Margin="0,0,0,8"/>
                                    <ComboBox Style="{StaticResource BladeComboBox}" SelectedItem="{Binding Theme, Mode=TwoWay}">
                                        <ComboBoxItem Content="Dark"/>
                                        <ComboBoxItem Content="Light"/>
                                        <ComboBoxItem Content="OLED"/>
                                    </ComboBox>

                                    <Grid Margin="0,20,0,0">
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="*"/>
                                            <ColumnDefinition Width="Auto"/>
                                        </Grid.ColumnDefinitions>
                                        <StackPanel>
                                            <TextBlock Text="Compact Mode" FontSize="14" Foreground="#E0E8FF"/>
                                            <TextBlock Text="Reduce spacing for more content" FontSize="12" Foreground="#6080A0"/>
                                        </StackPanel>
                                        <CheckBox Grid.Column="1" Style="{StaticResource BladeToggleSwitch}"
                                                  IsChecked="{Binding CompactMode, Mode=TwoWay}" VerticalAlignment="Center"/>
                                    </Grid>

                                    <Grid Margin="0,16,0,0">
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="*"/>
                                            <ColumnDefinition Width="Auto"/>
                                        </Grid.ColumnDefinitions>
                                        <StackPanel>
                                            <TextBlock Text="Enable Animations" FontSize="14" Foreground="#E0E8FF"/>
                                            <TextBlock Text="Show UI animations and effects" FontSize="12" Foreground="#6080A0"/>
                                        </StackPanel>
                                        <CheckBox Grid.Column="1" Style="{StaticResource BladeToggleSwitch}"
                                                  IsChecked="{Binding AnimationsEnabled, Mode=TwoWay}" VerticalAlignment="Center"/>
                                    </Grid>

                                    <TextBlock Text="Font Scale" FontSize="14" Foreground="#E0E8FF" Margin="0,20,0,8"/>
                                    <Grid>
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="*"/>
                                            <ColumnDefinition Width="60"/>
                                        </Grid.ColumnDefinitions>
                                        <Slider Minimum="0.8" Maximum="1.4" Value="{Binding FontScale, Mode=TwoWay}"
                                                Style="{StaticResource BladeSlider}" VerticalAlignment="Center"/>
                                        <TextBlock Grid.Column="1" Text="{Binding FontScale, StringFormat='{}{0:P0}'}"
                                                   Foreground="#6080A0" FontSize="13" HorizontalAlignment="Right" VerticalAlignment="Center"/>
                                    </Grid>
                                </StackPanel>
                            </Border>
                        </StackPanel>

                        <!-- Notifications Panel -->
                        <StackPanel x:Name="NotificationsPanel" Visibility="Collapsed">
                            <Border Padding="12,8" Margin="0,0,0,16" CornerRadius="8" HorizontalAlignment="Left">
                                <Border.Background>
                                    <LinearGradientBrush StartPoint="0,0" EndPoint="1,0">
                                        <GradientStop Color="#20FF9F00" Offset="0"/>
                                        <GradientStop Color="#10101828" Offset="1"/>
                                    </LinearGradientBrush>
                                </Border.Background>
                                <TextBlock Text="NOTIFICATIONS" FontSize="11" FontWeight="Bold" Foreground="#FF9F00"/>
                            </Border>
                            <Border Style="{StaticResource BladeSettingsCard}">
                                <StackPanel>
                                    <Grid Margin="0,0,0,16">
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="*"/>
                                            <ColumnDefinition Width="Auto"/>
                                        </Grid.ColumnDefinitions>
                                        <StackPanel>
                                            <TextBlock Text="Desktop Notifications" FontSize="14" Foreground="#E0E8FF"/>
                                            <TextBlock Text="Show popup notifications on your desktop" FontSize="12" Foreground="#6080A0"/>
                                        </StackPanel>
                                        <CheckBox Grid.Column="1" Style="{StaticResource BladeToggleSwitch}"
                                                  IsChecked="{Binding DesktopNotifications, Mode=TwoWay}" VerticalAlignment="Center"/>
                                    </Grid>
                                    <Grid Margin="0,0,0,16">
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="*"/>
                                            <ColumnDefinition Width="Auto"/>
                                        </Grid.ColumnDefinitions>
                                        <StackPanel>
                                            <TextBlock Text="Sound Notifications" FontSize="14" Foreground="#E0E8FF"/>
                                            <TextBlock Text="Play sounds for notifications" FontSize="12" Foreground="#6080A0"/>
                                        </StackPanel>
                                        <CheckBox Grid.Column="1" Style="{StaticResource BladeToggleSwitch}"
                                                  IsChecked="{Binding SoundNotifications, Mode=TwoWay}" VerticalAlignment="Center"/>
                                    </Grid>
                                    <Grid Margin="0,0,0,16">
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="*"/>
                                            <ColumnDefinition Width="Auto"/>
                                        </Grid.ColumnDefinitions>
                                        <StackPanel>
                                            <TextBlock Text="Mention Notifications" FontSize="14" Foreground="#E0E8FF"/>
                                            <TextBlock Text="Get notified when you're mentioned" FontSize="12" Foreground="#6080A0"/>
                                        </StackPanel>
                                        <CheckBox Grid.Column="1" Style="{StaticResource BladeToggleSwitch}"
                                                  IsChecked="{Binding MentionNotifications, Mode=TwoWay}" VerticalAlignment="Center"/>
                                    </Grid>
                                    <Grid>
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="*"/>
                                            <ColumnDefinition Width="Auto"/>
                                        </Grid.ColumnDefinitions>
                                        <StackPanel>
                                            <TextBlock Text="DM Notifications" FontSize="14" Foreground="#E0E8FF"/>
                                            <TextBlock Text="Get notified for direct messages" FontSize="12" Foreground="#6080A0"/>
                                        </StackPanel>
                                        <CheckBox Grid.Column="1" Style="{StaticResource BladeToggleSwitch}"
                                                  IsChecked="{Binding DmNotifications, Mode=TwoWay}" VerticalAlignment="Center"/>
                                    </Grid>
                                </StackPanel>
                            </Border>
                        </StackPanel>

                        <!-- Keybinds Panel -->
                        <StackPanel x:Name="KeybindsPanel" Visibility="Collapsed">
                            <Border Padding="12,8" Margin="0,0,0,16" CornerRadius="8" HorizontalAlignment="Left">
                                <Border.Background>
                                    <LinearGradientBrush StartPoint="0,0" EndPoint="1,0">
                                        <GradientStop Color="#200096B8" Offset="0"/>
                                        <GradientStop Color="#10101828" Offset="1"/>
                                    </LinearGradientBrush>
                                </Border.Background>
                                <TextBlock Text="KEYBINDS" FontSize="11" FontWeight="Bold" Foreground="#0096B8"/>
                            </Border>

                            <!-- Voice Keybinds Card -->
                            <Border Style="{StaticResource BladeSettingsCard}">
                                <StackPanel>
                                    <TextBlock Text="Voice Controls" FontSize="15" FontWeight="SemiBold"
                                               Foreground="#E0E8FF" Margin="0,0,0,16"/>

                                    <!-- Toggle Mute -->
                                    <Grid Margin="0,0,0,12">
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="*"/>
                                            <ColumnDefinition Width="150"/>
                                        </Grid.ColumnDefinitions>
                                        <StackPanel>
                                            <TextBlock Text="Toggle Mute" FontSize="14" Foreground="#E0E8FF"/>
                                            <TextBlock Text="Mute/unmute your microphone" FontSize="12" Foreground="#6080A0"/>
                                        </StackPanel>
                                        <Button Grid.Column="1" x:Name="MuteKeyButton" Click="KeybindButton_Click" Tag="ToggleMute"
                                                Style="{StaticResource BladeNavButton}" HorizontalAlignment="Right">
                                            <TextBlock x:Name="MuteKeyText" Text="Ctrl+M" Foreground="#0096B8" FontWeight="SemiBold"/>
                                        </Button>
                                    </Grid>

                                    <!-- Toggle Deafen -->
                                    <Grid Margin="0,0,0,12">
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="*"/>
                                            <ColumnDefinition Width="150"/>
                                        </Grid.ColumnDefinitions>
                                        <StackPanel>
                                            <TextBlock Text="Toggle Deafen" FontSize="14" Foreground="#E0E8FF"/>
                                            <TextBlock Text="Deafen/undeafen audio" FontSize="12" Foreground="#6080A0"/>
                                        </StackPanel>
                                        <Button Grid.Column="1" x:Name="DeafenKeyButton" Click="KeybindButton_Click" Tag="ToggleDeafen"
                                                Style="{StaticResource BladeNavButton}" HorizontalAlignment="Right">
                                            <TextBlock x:Name="DeafenKeyText" Text="Ctrl+D" Foreground="#0096B8" FontWeight="SemiBold"/>
                                        </Button>
                                    </Grid>

                                    <!-- Push to Talk -->
                                    <Grid>
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="*"/>
                                            <ColumnDefinition Width="150"/>
                                        </Grid.ColumnDefinitions>
                                        <StackPanel>
                                            <TextBlock Text="Push to Talk" FontSize="14" Foreground="#E0E8FF"/>
                                            <TextBlock Text="Hold to transmit voice" FontSize="12" Foreground="#6080A0"/>
                                        </StackPanel>
                                        <Button Grid.Column="1" x:Name="PttKeyBindButton" Click="KeybindButton_Click" Tag="PushToTalk"
                                                Style="{StaticResource BladeNavButton}" HorizontalAlignment="Right">
                                            <TextBlock x:Name="PttKeyBindText" Text="{Binding PushToTalkKeyDisplay}" Foreground="#0096B8" FontWeight="SemiBold"/>
                                        </Button>
                                    </Grid>
                                </StackPanel>
                            </Border>

                            <!-- Navigation Keybinds Card -->
                            <Border Style="{StaticResource BladeSettingsCard}">
                                <StackPanel>
                                    <TextBlock Text="Navigation" FontSize="15" FontWeight="SemiBold"
                                               Foreground="#E0E8FF" Margin="0,0,0,16"/>

                                    <!-- Quick Switcher -->
                                    <Grid Margin="0,0,0,12">
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="*"/>
                                            <ColumnDefinition Width="150"/>
                                        </Grid.ColumnDefinitions>
                                        <StackPanel>
                                            <TextBlock Text="Quick Switcher" FontSize="14" Foreground="#E0E8FF"/>
                                            <TextBlock Text="Open quick channel/DM search" FontSize="12" Foreground="#6080A0"/>
                                        </StackPanel>
                                        <Button Grid.Column="1" x:Name="QuickSwitchKeyButton" Click="KeybindButton_Click" Tag="QuickSwitch"
                                                Style="{StaticResource BladeNavButton}" HorizontalAlignment="Right">
                                            <TextBlock x:Name="QuickSwitchKeyText" Text="Ctrl+K" Foreground="#0096B8" FontWeight="SemiBold"/>
                                        </Button>
                                    </Grid>

                                    <!-- Settings -->
                                    <Grid>
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="*"/>
                                            <ColumnDefinition Width="150"/>
                                        </Grid.ColumnDefinitions>
                                        <StackPanel>
                                            <TextBlock Text="Open Settings" FontSize="14" Foreground="#E0E8FF"/>
                                            <TextBlock Text="Open settings menu" FontSize="12" Foreground="#6080A0"/>
                                        </StackPanel>
                                        <Button Grid.Column="1" x:Name="SettingsKeyButton" Click="KeybindButton_Click" Tag="Settings"
                                                Style="{StaticResource BladeNavButton}" HorizontalAlignment="Right">
                                            <TextBlock x:Name="SettingsKeyText" Text="Ctrl+," Foreground="#0096B8" FontWeight="SemiBold"/>
                                        </Button>
                                    </Grid>
                                </StackPanel>
                            </Border>

                            <TextBlock Text="Click a keybind button, then press a new key combination to change it"
                                       FontSize="12" Foreground="#506080" Margin="0,8,0,0"/>
                        </StackPanel>
                        <!-- Message Templates Panel -->
                        <StackPanel x:Name="TemplatesPanel" Visibility="Collapsed">
                            <Border Padding="12,8" Margin="0,0,0,16" CornerRadius="8" HorizontalAlignment="Left">
                                <Border.Background>
                                    <LinearGradientBrush StartPoint="0,0" EndPoint="1,0">
                                        <GradientStop Color="#2000B4D8" Offset="0"/>
                                        <GradientStop Color="#10101828" Offset="1"/>
                                    </LinearGradientBrush>
                                </Border.Background>
                                <TextBlock Text="MESSAGE TEMPLATES" FontSize="11" FontWeight="Bold" Foreground="#00B4D8"/>
                            </Border>

                            <!-- Create Template Card -->
                            <Border Style="{StaticResource BladeSettingsCard}">
                                <StackPanel>
                                    <TextBlock Text="Create New Template" FontSize="15" FontWeight="SemiBold"
                                               Foreground="#E0E8FF" Margin="0,0,0,12"/>
                                    <TextBlock Text="Template Name" FontSize="13" Foreground="#8090B0" Margin="0,0,0,8"/>
                                    <Border Background="#15101828" CornerRadius="8" BorderThickness="1" BorderBrush="#3000B4D8" Padding="12,10" Margin="0,0,0,12">
                                        <TextBox x:Name="TemplateNameBox" Background="Transparent" BorderThickness="0"
                                                 Foreground="#E0E8FF" FontSize="14" CaretBrush="#00B4D8"/>
                                    </Border>
                                    <TextBlock Text="Template Content" FontSize="13" Foreground="#8090B0" Margin="0,0,0,8"/>
                                    <Border Background="#15101828" CornerRadius="8" BorderThickness="1" BorderBrush="#3000B4D8" Padding="12,10">
                                        <TextBox x:Name="TemplateContentBox" Background="Transparent" BorderThickness="0"
                                                 Foreground="#E0E8FF" FontSize="14" CaretBrush="#00B4D8"
                                                 TextWrapping="Wrap" AcceptsReturn="True" Height="80" VerticalScrollBarVisibility="Auto"/>
                                    </Border>
                                    <Button Content="âž• Add Template" Style="{StaticResource BladeNavButton}"
                                            HorizontalAlignment="Left" Margin="0,12,0,0" Foreground="#00B4D8"
                                            Click="AddTemplate_Click"/>
                                </StackPanel>
                            </Border>

                            <!-- Saved Templates Card -->
                            <Border Style="{StaticResource BladeSettingsCard}">
                                <StackPanel>
                                    <TextBlock Text="Saved Templates" FontSize="15" FontWeight="SemiBold"
                                               Foreground="#E0E8FF" Margin="0,0,0,12"/>
                                    <ItemsControl x:Name="TemplatesList">
                                        <ItemsControl.ItemTemplate>
                                            <DataTemplate>
                                                <Border Background="#10101828" CornerRadius="8" Padding="12" Margin="0,0,0,8">
                                                    <Grid>
                                                        <Grid.ColumnDefinitions>
                                                            <ColumnDefinition Width="*"/>
                                                            <ColumnDefinition Width="Auto"/>
                                                        </Grid.ColumnDefinitions>
                                                        <StackPanel>
                                                            <TextBlock Text="{Binding Name}" FontSize="14" FontWeight="SemiBold" Foreground="#E0E8FF"/>
                                                            <TextBlock Text="{Binding Content}" FontSize="12" Foreground="#6080A0"
                                                                       TextTrimming="CharacterEllipsis" MaxWidth="400"/>
                                                        </StackPanel>
                                                        <Button Grid.Column="1" Content="ðŸ—‘ï¸" Style="{StaticResource BladeNavButton}"
                                                                Click="DeleteTemplate_Click" Tag="{Binding Id}" Foreground="#FF6680"/>
                                                    </Grid>
                                                </Border>
                                            </DataTemplate>
                                        </ItemsControl.ItemTemplate>
                                    </ItemsControl>
                                    <TextBlock x:Name="NoTemplatesText" Text="No templates saved yet" FontSize="13" Foreground="#506080"/>
                                </StackPanel>
                            </Border>
                        </StackPanel>

                        <!-- Scheduled Messages Panel -->
                        <StackPanel x:Name="ScheduledPanel" Visibility="Collapsed">
                            <Border Padding="12,8" Margin="0,0,0,16" CornerRadius="8" HorizontalAlignment="Left">
                                <Border.Background>
                                    <LinearGradientBrush StartPoint="0,0" EndPoint="1,0">
                                        <GradientStop Color="#2048CAE4" Offset="0"/>
                                        <GradientStop Color="#10101828" Offset="1"/>
                                    </LinearGradientBrush>
                                </Border.Background>
                                <TextBlock Text="SCHEDULED MESSAGES" FontSize="11" FontWeight="Bold" Foreground="#48CAE4"/>
                            </Border>

                            <!-- Schedule New Message Card -->
                            <Border Style="{StaticResource BladeSettingsCard}">
                                <StackPanel>
                                    <TextBlock Text="Schedule New Message" FontSize="15" FontWeight="SemiBold"
                                               Foreground="#E0E8FF" Margin="0,0,0,12"/>

                                    <TextBlock Text="Channel/User" FontSize="13" Foreground="#8090B0" Margin="0,0,0,8"/>
                                    <Border Background="#15101828" CornerRadius="8" BorderThickness="1" BorderBrush="#3048CAE4" Padding="12,10" Margin="0,0,0,12">
                                        <TextBox x:Name="ScheduleTargetBox" Background="Transparent" BorderThickness="0"
                                                 Foreground="#E0E8FF" FontSize="14" CaretBrush="#48CAE4"/>
                                    </Border>

                                    <TextBlock Text="Message" FontSize="13" Foreground="#8090B0" Margin="0,0,0,8"/>
                                    <Border Background="#15101828" CornerRadius="8" BorderThickness="1" BorderBrush="#3048CAE4" Padding="12,10" Margin="0,0,0,12">
                                        <TextBox x:Name="ScheduleMessageBox" Background="Transparent" BorderThickness="0"
                                                 Foreground="#E0E8FF" FontSize="14" CaretBrush="#48CAE4"
                                                 TextWrapping="Wrap" AcceptsReturn="True" Height="60"/>
                                    </Border>

                                    <Grid Margin="0,0,0,12">
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="*"/>
                                            <ColumnDefinition Width="*"/>
                                        </Grid.ColumnDefinitions>
                                        <StackPanel Margin="0,0,8,0">
                                            <TextBlock Text="Date" FontSize="13" Foreground="#8090B0" Margin="0,0,0,8"/>
                                            <Border Background="#15101828" CornerRadius="8" BorderThickness="1" BorderBrush="#3048CAE4" Padding="12,10">
                                                <TextBox x:Name="ScheduleDateBox" Background="Transparent" BorderThickness="0"
                                                         Foreground="#E0E8FF" FontSize="14" CaretBrush="#48CAE4" Text="YYYY-MM-DD"/>
                                            </Border>
                                        </StackPanel>
                                        <StackPanel Grid.Column="1" Margin="8,0,0,0">
                                            <TextBlock Text="Time" FontSize="13" Foreground="#8090B0" Margin="0,0,0,8"/>
                                            <Border Background="#15101828" CornerRadius="8" BorderThickness="1" BorderBrush="#3048CAE4" Padding="12,10">
                                                <TextBox x:Name="ScheduleTimeBox" Background="Transparent" BorderThickness="0"
                                                         Foreground="#E0E8FF" FontSize="14" CaretBrush="#48CAE4" Text="HH:MM"/>
                                            </Border>
                                        </StackPanel>
                                    </Grid>

                                    <Button Content="ðŸ“… Schedule Message" Style="{StaticResource BladeNavButton}"
                                            HorizontalAlignment="Left" Foreground="#48CAE4" Click="ScheduleMessage_Click"/>
                                </StackPanel>
                            </Border>
                        </StackPanel>

                        <!-- Status Scheduler Panel -->
                        <StackPanel x:Name="StatusSchedulerPanel" Visibility="Collapsed">
                            <Border Padding="12,8" Margin="0,0,0,16" CornerRadius="8" HorizontalAlignment="Left">
                                <Border.Background>
                                    <LinearGradientBrush StartPoint="0,0" EndPoint="1,0">
                                        <GradientStop Color="#20FF9F00" Offset="0"/>
                                        <GradientStop Color="#10101828" Offset="1"/>
                                    </LinearGradientBrush>
                                </Border.Background>
                                <TextBlock Text="STATUS SCHEDULER" FontSize="11" FontWeight="Bold" Foreground="#FF9F00"/>
                            </Border>

                            <!-- Status Rules Card -->
                            <Border Style="{StaticResource BladeSettingsCard}">
                                <StackPanel>
                                    <TextBlock Text="Automatic Status Rules" FontSize="15" FontWeight="SemiBold"
                                               Foreground="#E0E8FF" Margin="0,0,0,16"/>

                                    <Grid Margin="0,0,0,16">
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="*"/>
                                            <ColumnDefinition Width="Auto"/>
                                        </Grid.ColumnDefinitions>
                                        <StackPanel>
                                            <TextBlock Text="Away when Idle" FontSize="14" Foreground="#E0E8FF"/>
                                            <TextBlock Text="Set status to 'Away' after inactivity" FontSize="12" Foreground="#6080A0"/>
                                        </StackPanel>
                                        <CheckBox Grid.Column="1" Style="{StaticResource BladeToggleSwitch}"
                                                  x:Name="AutoAwayToggle" VerticalAlignment="Center"/>
                                    </Grid>

                                    <StackPanel x:Name="IdleTimeoutPanel">
                                        <TextBlock Text="Idle Timeout (minutes)" FontSize="13" Foreground="#8090B0" Margin="0,0,0,8"/>
                                        <Grid>
                                            <Grid.ColumnDefinitions>
                                                <ColumnDefinition Width="*"/>
                                                <ColumnDefinition Width="60"/>
                                            </Grid.ColumnDefinitions>
                                            <Slider x:Name="IdleTimeoutSlider" Minimum="1" Maximum="60" Value="5"
                                                    Style="{StaticResource BladeSlider}" VerticalAlignment="Center"/>
                                            <TextBlock Grid.Column="1" Text="{Binding ElementName=IdleTimeoutSlider, Path=Value, StringFormat='{}{0:0} min'}"
                                                       Foreground="#6080A0" FontSize="13" HorizontalAlignment="Right" VerticalAlignment="Center"/>
                                        </Grid>
                                    </StackPanel>
                                </StackPanel>
                            </Border>

                            <!-- Scheduled Statuses Card -->
                            <Border Style="{StaticResource BladeSettingsCard}">
                                <StackPanel>
                                    <TextBlock Text="Scheduled Status Changes" FontSize="15" FontWeight="SemiBold"
                                               Foreground="#E0E8FF" Margin="0,0,0,12"/>
                                    <TextBlock Text="Schedule custom statuses for specific times"
                                               FontSize="12" Foreground="#6080A0" Margin="0,0,0,12"/>

                                    <Grid Margin="0,0,0,12">
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="*"/>
                                            <ColumnDefinition Width="*"/>
                                        </Grid.ColumnDefinitions>
                                        <StackPanel Margin="0,0,8,0">
                                            <TextBlock Text="Start Time" FontSize="13" Foreground="#8090B0" Margin="0,0,0,8"/>
                                            <Border Background="#15101828" CornerRadius="8" BorderThickness="1" BorderBrush="#30FF9F00" Padding="12,10">
                                                <TextBox x:Name="StatusStartTimeBox" Background="Transparent" BorderThickness="0"
                                                         Foreground="#E0E8FF" FontSize="14" CaretBrush="#FF9F00" Text="09:00"/>
                                            </Border>
                                        </StackPanel>
                                        <StackPanel Grid.Column="1" Margin="8,0,0,0">
                                            <TextBlock Text="End Time" FontSize="13" Foreground="#8090B0" Margin="0,0,0,8"/>
                                            <Border Background="#15101828" CornerRadius="8" BorderThickness="1" BorderBrush="#30FF9F00" Padding="12,10">
                                                <TextBox x:Name="StatusEndTimeBox" Background="Transparent" BorderThickness="0"
                                                         Foreground="#E0E8FF" FontSize="14" CaretBrush="#FF9F00" Text="17:00"/>
                                            </Border>
                                        </StackPanel>
                                    </Grid>

                                    <TextBlock Text="Status Text" FontSize="13" Foreground="#8090B0" Margin="0,0,0,8"/>
                                    <Border Background="#15101828" CornerRadius="8" BorderThickness="1" BorderBrush="#30FF9F00" Padding="12,10" Margin="0,0,0,12">
                                        <TextBox x:Name="ScheduledStatusTextBox" Background="Transparent" BorderThickness="0"
                                                 Foreground="#E0E8FF" FontSize="14" CaretBrush="#FF9F00" Text="At work"/>
                                    </Border>

                                    <Button Content="âž• Add Scheduled Status" Style="{StaticResource BladeNavButton}"
                                            HorizontalAlignment="Left" Foreground="#FF9F00" Click="AddScheduledStatus_Click"/>
                                </StackPanel>
                            </Border>
                        </StackPanel>

                        <!-- Smart DND Panel -->
                        <StackPanel x:Name="SmartDNDPanel" Visibility="Collapsed">
                            <Border Padding="12,8" Margin="0,0,0,16" CornerRadius="8" HorizontalAlignment="Left">
                                <Border.Background>
                                    <LinearGradientBrush StartPoint="0,0" EndPoint="1,0">
                                        <GradientStop Color="#20FF6680" Offset="0"/>
                                        <GradientStop Color="#10101828" Offset="1"/>
                                    </LinearGradientBrush>
                                </Border.Background>
                                <TextBlock Text="SMART DO NOT DISTURB" FontSize="11" FontWeight="Bold" Foreground="#FF6680"/>
                            </Border>

                            <!-- DND Settings Card -->
                            <Border Style="{StaticResource BladeSettingsCard}">
                                <StackPanel>
                                    <TextBlock Text="DND Triggers" FontSize="15" FontWeight="SemiBold"
                                               Foreground="#E0E8FF" Margin="0,0,0,16"/>

                                    <Grid Margin="0,0,0,16">
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="*"/>
                                            <ColumnDefinition Width="Auto"/>
                                        </Grid.ColumnDefinitions>
                                        <StackPanel>
                                            <TextBlock Text="DND when Full Screen" FontSize="14" Foreground="#E0E8FF"/>
                                            <TextBlock Text="Automatically enable DND when in fullscreen apps" FontSize="12" Foreground="#6080A0"/>
                                        </StackPanel>
                                        <CheckBox Grid.Column="1" Style="{StaticResource BladeToggleSwitch}"
                                                  x:Name="DndFullscreenToggle" IsChecked="True" VerticalAlignment="Center"/>
                                    </Grid>

                                    <Grid Margin="0,0,0,16">
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="*"/>
                                            <ColumnDefinition Width="Auto"/>
                                        </Grid.ColumnDefinitions>
                                        <StackPanel>
                                            <TextBlock Text="DND when Gaming" FontSize="14" Foreground="#E0E8FF"/>
                                            <TextBlock Text="Automatically enable DND when games are detected" FontSize="12" Foreground="#6080A0"/>
                                        </StackPanel>
                                        <CheckBox Grid.Column="1" Style="{StaticResource BladeToggleSwitch}"
                                                  x:Name="DndGamingToggle" IsChecked="True" VerticalAlignment="Center"/>
                                    </Grid>

                                    <Grid Margin="0,0,0,16">
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="*"/>
                                            <ColumnDefinition Width="Auto"/>
                                        </Grid.ColumnDefinitions>
                                        <StackPanel>
                                            <TextBlock Text="DND when Presenting" FontSize="14" Foreground="#E0E8FF"/>
                                            <TextBlock Text="Automatically enable DND when screen sharing" FontSize="12" Foreground="#6080A0"/>
                                        </StackPanel>
                                        <CheckBox Grid.Column="1" Style="{StaticResource BladeToggleSwitch}"
                                                  x:Name="DndPresentingToggle" IsChecked="True" VerticalAlignment="Center"/>
                                    </Grid>
                                </StackPanel>
                            </Border>

                            <!-- Scheduled DND Card -->
                            <Border Style="{StaticResource BladeSettingsCard}">
                                <StackPanel>
                                    <Grid Margin="0,0,0,16">
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="*"/>
                                            <ColumnDefinition Width="Auto"/>
                                        </Grid.ColumnDefinitions>
                                        <StackPanel>
                                            <TextBlock Text="Scheduled DND" FontSize="15" FontWeight="SemiBold" Foreground="#E0E8FF"/>
                                            <TextBlock Text="Automatically enable DND during set hours" FontSize="12" Foreground="#6080A0"/>
                                        </StackPanel>
                                        <CheckBox Grid.Column="1" Style="{StaticResource BladeToggleSwitch}"
                                                  x:Name="ScheduledDndToggle" VerticalAlignment="Center"/>
                                    </Grid>

                                    <Grid Margin="0,0,0,12">
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="*"/>
                                            <ColumnDefinition Width="*"/>
                                        </Grid.ColumnDefinitions>
                                        <StackPanel Margin="0,0,8,0">
                                            <TextBlock Text="Start Time" FontSize="13" Foreground="#8090B0" Margin="0,0,0,8"/>
                                            <Border Background="#15101828" CornerRadius="8" BorderThickness="1" BorderBrush="#30FF6680" Padding="12,10">
                                                <TextBox x:Name="DndStartTimeBox" Background="Transparent" BorderThickness="0"
                                                         Foreground="#E0E8FF" FontSize="14" CaretBrush="#FF6680" Text="22:00"/>
                                            </Border>
                                        </StackPanel>
                                        <StackPanel Grid.Column="1" Margin="8,0,0,0">
                                            <TextBlock Text="End Time" FontSize="13" Foreground="#8090B0" Margin="0,0,0,8"/>
                                            <Border Background="#15101828" CornerRadius="8" BorderThickness="1" BorderBrush="#30FF6680" Padding="12,10">
                                                <TextBox x:Name="DndEndTimeBox" Background="Transparent" BorderThickness="0"
                                                         Foreground="#E0E8FF" FontSize="14" CaretBrush="#FF6680" Text="08:00"/>
                                            </Border>
                                        </StackPanel>
                                    </Grid>
                                </StackPanel>
                            </Border>
                        </StackPanel>

                        <!-- Quick Actions Panel -->
                        <StackPanel x:Name="QuickActionsPanel" Visibility="Collapsed">
                            <Border Padding="12,8" Margin="0,0,0,16" CornerRadius="8" HorizontalAlignment="Left">
                                <Border.Background>
                                    <LinearGradientBrush StartPoint="0,0" EndPoint="1,0">
                                        <GradientStop Color="#20FFD700" Offset="0"/>
                                        <GradientStop Color="#10101828" Offset="1"/>
                                    </LinearGradientBrush>
                                </Border.Background>
                                <TextBlock Text="QUICK ACTIONS" FontSize="11" FontWeight="Bold" Foreground="#FFD700"/>
                            </Border>

                            <!-- Quick Actions Card -->
                            <Border Style="{StaticResource BladeSettingsCard}">
                                <StackPanel>
                                    <TextBlock Text="Configure Quick Actions" FontSize="15" FontWeight="SemiBold"
                                               Foreground="#E0E8FF" Margin="0,0,0,12"/>
                                    <TextBlock Text="Quick actions appear in your user panel for fast access"
                                               FontSize="12" Foreground="#6080A0" Margin="0,0,0,16"/>

                                    <Grid Margin="0,0,0,12">
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="*"/>
                                            <ColumnDefinition Width="Auto"/>
                                        </Grid.ColumnDefinitions>
                                        <StackPanel>
                                            <TextBlock Text="Quick Mute" FontSize="14" Foreground="#E0E8FF"/>
                                            <TextBlock Text="Show mute button in quick actions" FontSize="12" Foreground="#6080A0"/>
                                        </StackPanel>
                                        <CheckBox Grid.Column="1" Style="{StaticResource BladeToggleSwitch}"
                                                  x:Name="QuickMuteToggle" IsChecked="True" VerticalAlignment="Center"/>
                                    </Grid>

                                    <Grid Margin="0,0,0,12">
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="*"/>
                                            <ColumnDefinition Width="Auto"/>
                                        </Grid.ColumnDefinitions>
                                        <StackPanel>
                                            <TextBlock Text="Quick Deafen" FontSize="14" Foreground="#E0E8FF"/>
                                            <TextBlock Text="Show deafen button in quick actions" FontSize="12" Foreground="#6080A0"/>
                                        </StackPanel>
                                        <CheckBox Grid.Column="1" Style="{StaticResource BladeToggleSwitch}"
                                                  x:Name="QuickDeafenToggle" IsChecked="True" VerticalAlignment="Center"/>
                                    </Grid>

                                    <Grid Margin="0,0,0,12">
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="*"/>
                                            <ColumnDefinition Width="Auto"/>
                                        </Grid.ColumnDefinitions>
                                        <StackPanel>
                                            <TextBlock Text="Quick Status" FontSize="14" Foreground="#E0E8FF"/>
                                            <TextBlock Text="Show status toggle in quick actions" FontSize="12" Foreground="#6080A0"/>
                                        </StackPanel>
                                        <CheckBox Grid.Column="1" Style="{StaticResource BladeToggleSwitch}"
                                                  x:Name="QuickStatusToggle" IsChecked="True" VerticalAlignment="Center"/>
                                    </Grid>

                                    <Grid>
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="*"/>
                                            <ColumnDefinition Width="Auto"/>
                                        </Grid.ColumnDefinitions>
                                        <StackPanel>
                                            <TextBlock Text="Quick DND" FontSize="14" Foreground="#E0E8FF"/>
                                            <TextBlock Text="Show DND toggle in quick actions" FontSize="12" Foreground="#6080A0"/>
                                        </StackPanel>
                                        <CheckBox Grid.Column="1" Style="{StaticResource BladeToggleSwitch}"
                                                  x:Name="QuickDndToggle" IsChecked="True" VerticalAlignment="Center"/>
                                    </Grid>
                                </StackPanel>
                            </Border>
                        </StackPanel>

                        <!-- Activity Insights Panel -->
                        <StackPanel x:Name="InsightsPanel" Visibility="Collapsed">
                            <Border Padding="12,8" Margin="0,0,0,16" CornerRadius="8" HorizontalAlignment="Left">
                                <Border.Background>
                                    <LinearGradientBrush StartPoint="0,0" EndPoint="1,0">
                                        <GradientStop Color="#200096B8" Offset="0"/>
                                        <GradientStop Color="#10101828" Offset="1"/>
                                    </LinearGradientBrush>
                                </Border.Background>
                                <TextBlock Text="ACTIVITY INSIGHTS" FontSize="11" FontWeight="Bold" Foreground="#0096B8"/>
                            </Border>

                            <!-- Stats Overview Card -->
                            <Border Style="{StaticResource BladeSettingsCard}">
                                <StackPanel>
                                    <TextBlock Text="Your Activity Statistics" FontSize="15" FontWeight="SemiBold"
                                               Foreground="#E0E8FF" Margin="0,0,0,16"/>

                                    <Grid Margin="0,0,0,16">
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="*"/>
                                            <ColumnDefinition Width="*"/>
                                            <ColumnDefinition Width="*"/>
                                        </Grid.ColumnDefinitions>
                                        <StackPanel HorizontalAlignment="Center">
                                            <TextBlock x:Name="MessagesSentCount" Text="0" FontSize="28" FontWeight="Bold" Foreground="#00B4D8" HorizontalAlignment="Center"/>
                                            <TextBlock Text="Messages Sent" FontSize="12" Foreground="#6080A0" HorizontalAlignment="Center"/>
                                        </StackPanel>
                                        <StackPanel Grid.Column="1" HorizontalAlignment="Center">
                                            <TextBlock x:Name="VoiceMinutesCount" Text="0" FontSize="28" FontWeight="Bold" Foreground="#48CAE4" HorizontalAlignment="Center"/>
                                            <TextBlock Text="Voice Minutes" FontSize="12" Foreground="#6080A0" HorizontalAlignment="Center"/>
                                        </StackPanel>
                                        <StackPanel Grid.Column="2" HorizontalAlignment="Center">
                                            <TextBlock x:Name="DaysActiveCount" Text="0" FontSize="28" FontWeight="Bold" Foreground="#0096B8" HorizontalAlignment="Center"/>
                                            <TextBlock Text="Days Active" FontSize="12" Foreground="#6080A0" HorizontalAlignment="Center"/>
                                        </StackPanel>
                                    </Grid>
                                </StackPanel>
                            </Border>

                            <!-- Tracking Settings Card -->
                            <Border Style="{StaticResource BladeSettingsCard}">
                                <StackPanel>
                                    <TextBlock Text="Tracking Settings" FontSize="15" FontWeight="SemiBold"
                                               Foreground="#E0E8FF" Margin="0,0,0,16"/>

                                    <Grid Margin="0,0,0,12">
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="*"/>
                                            <ColumnDefinition Width="Auto"/>
                                        </Grid.ColumnDefinitions>
                                        <StackPanel>
                                            <TextBlock Text="Track Message Activity" FontSize="14" Foreground="#E0E8FF"/>
                                            <TextBlock Text="Count messages you send" FontSize="12" Foreground="#6080A0"/>
                                        </StackPanel>
                                        <CheckBox Grid.Column="1" Style="{StaticResource BladeToggleSwitch}"
                                                  x:Name="TrackMessagesToggle" IsChecked="True" VerticalAlignment="Center"/>
                                    </Grid>

                                    <Grid Margin="0,0,0,12">
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="*"/>
                                            <ColumnDefinition Width="Auto"/>
                                        </Grid.ColumnDefinitions>
                                        <StackPanel>
                                            <TextBlock Text="Track Voice Activity" FontSize="14" Foreground="#E0E8FF"/>
                                            <TextBlock Text="Track time spent in voice channels" FontSize="12" Foreground="#6080A0"/>
                                        </StackPanel>
                                        <CheckBox Grid.Column="1" Style="{StaticResource BladeToggleSwitch}"
                                                  x:Name="TrackVoiceToggle" IsChecked="True" VerticalAlignment="Center"/>
                                    </Grid>

                                    <Button Content="ðŸ”„ Reset Statistics" Style="{StaticResource BladeNavButton}"
                                            HorizontalAlignment="Left" Foreground="#FF6680" Click="ResetInsights_Click"/>
                                </StackPanel>
                            </Border>
                        </StackPanel>
                    </Grid>
                </ScrollViewer>
            </Border>
        </Grid>
    </Grid>
</UserControl>
