<UserControl x:Class="VeaMarketplace.Client.Controls.VoiceSettingsPanel"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml">

    <UserControl.Resources>
        <ResourceDictionary>
            <ResourceDictionary.MergedDictionaries>
                <ResourceDictionary Source="/Styles/Colors.xaml"/>
                <ResourceDictionary Source="/Styles/Buttons.xaml"/>
                <ResourceDictionary Source="/Styles/Controls.xaml"/>
            </ResourceDictionary.MergedDictionaries>
        </ResourceDictionary>
    </UserControl.Resources>

    <ScrollViewer VerticalScrollBarVisibility="Auto" HorizontalScrollBarVisibility="Disabled">
        <StackPanel Margin="0,0,16,0">

            <!-- Voice Settings Header -->
            <TextBlock Text="Voice Settings"
                       FontSize="20"
                       FontWeight="Bold"
                       Foreground="{StaticResource TextPrimaryBrush}"
                       Margin="0,0,0,24"/>

            <!-- Input Device Section -->
            <StackPanel Margin="0,0,0,24">
                <TextBlock Text="INPUT DEVICE"
                           FontSize="11"
                           FontWeight="Bold"
                           Foreground="{StaticResource TextSecondaryBrush}"
                           Margin="0,0,0,8"/>
                <ComboBox x:Name="InputDeviceCombo"
                          Style="{StaticResource ModernComboBox}"
                          Background="{StaticResource PrimaryDarkBrush}"
                          Foreground="{StaticResource TextPrimaryBrush}"
                          Padding="12,10"
                          SelectionChanged="InputDevice_Changed">
                    <ComboBox.ItemTemplate>
                        <DataTemplate>
                            <TextBlock Text="{Binding ProductName}" Foreground="{StaticResource TextPrimaryBrush}"/>
                        </DataTemplate>
                    </ComboBox.ItemTemplate>
                </ComboBox>

                <!-- Input Volume -->
                <TextBlock Text="INPUT VOLUME"
                           FontSize="11"
                           FontWeight="Bold"
                           Foreground="{StaticResource TextSecondaryBrush}"
                           Margin="0,16,0,8"/>
                <Grid>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="50"/>
                    </Grid.ColumnDefinitions>
                    <Slider x:Name="InputVolumeSlider"
                            Minimum="0" Maximum="200" Value="100"
                            TickFrequency="10"
                            ValueChanged="InputVolume_Changed"/>
                    <TextBlock Grid.Column="1"
                               Text="{Binding ElementName=InputVolumeSlider, Path=Value, StringFormat={}{0:0}%}"
                               Foreground="{StaticResource TextSecondaryBrush}"
                               VerticalAlignment="Center"
                               HorizontalAlignment="Right"/>
                </Grid>

                <!-- Input Level Meter -->
                <TextBlock Text="INPUT LEVEL"
                           FontSize="11"
                           FontWeight="Bold"
                           Foreground="{StaticResource TextSecondaryBrush}"
                           Margin="0,16,0,8"/>
                <Border Background="{StaticResource PrimaryDarkBrush}"
                        CornerRadius="4"
                        Height="8">
                    <Border x:Name="InputLevelBar"
                            Background="{StaticResource AccentGreenBrush}"
                            CornerRadius="4"
                            HorizontalAlignment="Left"
                            Width="0"/>
                </Border>
            </StackPanel>

            <!-- Output Device Section -->
            <StackPanel Margin="0,0,0,24">
                <TextBlock Text="OUTPUT DEVICE"
                           FontSize="11"
                           FontWeight="Bold"
                           Foreground="{StaticResource TextSecondaryBrush}"
                           Margin="0,0,0,8"/>
                <ComboBox x:Name="OutputDeviceCombo"
                          Style="{StaticResource ModernComboBox}"
                          Background="{StaticResource PrimaryDarkBrush}"
                          Foreground="{StaticResource TextPrimaryBrush}"
                          Padding="12,10"
                          SelectionChanged="OutputDevice_Changed">
                    <ComboBox.ItemTemplate>
                        <DataTemplate>
                            <TextBlock Text="{Binding ProductName}" Foreground="{StaticResource TextPrimaryBrush}"/>
                        </DataTemplate>
                    </ComboBox.ItemTemplate>
                </ComboBox>

                <!-- Output Volume -->
                <TextBlock Text="OUTPUT VOLUME"
                           FontSize="11"
                           FontWeight="Bold"
                           Foreground="{StaticResource TextSecondaryBrush}"
                           Margin="0,16,0,8"/>
                <Grid>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="50"/>
                    </Grid.ColumnDefinitions>
                    <Slider x:Name="OutputVolumeSlider"
                            Minimum="0" Maximum="200" Value="100"
                            TickFrequency="10"
                            ValueChanged="OutputVolume_Changed"/>
                    <TextBlock Grid.Column="1"
                               Text="{Binding ElementName=OutputVolumeSlider, Path=Value, StringFormat={}{0:0}%}"
                               Foreground="{StaticResource TextSecondaryBrush}"
                               VerticalAlignment="Center"
                               HorizontalAlignment="Right"/>
                </Grid>
            </StackPanel>

            <!-- Voice Activity Section -->
            <StackPanel Margin="0,0,0,24">
                <TextBlock Text="VOICE ACTIVITY"
                           FontSize="11"
                           FontWeight="Bold"
                           Foreground="{StaticResource TextSecondaryBrush}"
                           Margin="0,0,0,8"/>

                <RadioButton x:Name="VoiceActivityRadio"
                             GroupName="InputMode"
                             IsChecked="True"
                             Foreground="{StaticResource TextPrimaryBrush}"
                             Margin="0,0,0,8"
                             Checked="InputMode_Changed">
                    <StackPanel>
                        <TextBlock Text="Voice Activity" FontWeight="SemiBold"/>
                        <TextBlock Text="Automatically transmit when you speak"
                                   FontSize="11"
                                   Foreground="{StaticResource TextMutedBrush}"/>
                    </StackPanel>
                </RadioButton>

                <RadioButton x:Name="PushToTalkRadio"
                             GroupName="InputMode"
                             Foreground="{StaticResource TextPrimaryBrush}"
                             Checked="InputMode_Changed">
                    <StackPanel>
                        <TextBlock Text="Push to Talk" FontWeight="SemiBold"/>
                        <TextBlock Text="Press a key to transmit"
                                   FontSize="11"
                                   Foreground="{StaticResource TextMutedBrush}"/>
                    </StackPanel>
                </RadioButton>

                <!-- Push to Talk Key Binding -->
                <StackPanel x:Name="PushToTalkSettings" Visibility="Collapsed" Margin="24,12,0,0">
                    <TextBlock Text="KEYBIND"
                               FontSize="11"
                               FontWeight="Bold"
                               Foreground="{StaticResource TextSecondaryBrush}"
                               Margin="0,0,0,8"/>
                    <Button x:Name="KeybindButton"
                            Content="Click to set keybind"
                            Style="{StaticResource SecondaryButton}"
                            Padding="12,8"
                            HorizontalAlignment="Left"
                            Click="SetKeybind_Click"/>
                </StackPanel>

                <!-- Voice Activity Sensitivity -->
                <StackPanel x:Name="VoiceActivitySettings" Margin="0,16,0,0">
                    <TextBlock Text="INPUT SENSITIVITY"
                               FontSize="11"
                               FontWeight="Bold"
                               Foreground="{StaticResource TextSecondaryBrush}"
                               Margin="0,0,0,8"/>
                    <Grid>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="50"/>
                        </Grid.ColumnDefinitions>
                        <Slider x:Name="SensitivitySlider"
                                Minimum="-100" Maximum="0" Value="-40"
                                TickFrequency="10"
                                ValueChanged="Sensitivity_Changed"/>
                        <TextBlock Grid.Column="1"
                                   Text="{Binding ElementName=SensitivitySlider, Path=Value, StringFormat={}{0:0} dB}"
                                   Foreground="{StaticResource TextSecondaryBrush}"
                                   VerticalAlignment="Center"
                                   HorizontalAlignment="Right"
                                   FontSize="12"/>
                    </Grid>
                </StackPanel>
            </StackPanel>

            <!-- Advanced Settings Section -->
            <StackPanel Margin="0,0,0,24">
                <TextBlock Text="ADVANCED"
                           FontSize="11"
                           FontWeight="Bold"
                           Foreground="{StaticResource TextSecondaryBrush}"
                           Margin="0,0,0,12"/>

                <!-- Echo Cancellation -->
                <CheckBox x:Name="EchoCancellationCheck"
                          IsChecked="True"
                          Foreground="{StaticResource TextPrimaryBrush}"
                          Margin="0,0,0,12"
                          Checked="EchoCancellation_Changed"
                          Unchecked="EchoCancellation_Changed">
                    <StackPanel>
                        <TextBlock Text="Echo Cancellation" FontWeight="SemiBold"/>
                        <TextBlock Text="Reduces echo from your speakers"
                                   FontSize="11"
                                   Foreground="{StaticResource TextMutedBrush}"/>
                    </StackPanel>
                </CheckBox>

                <!-- Noise Suppression -->
                <CheckBox x:Name="NoiseSuppressionCheck"
                          IsChecked="True"
                          Foreground="{StaticResource TextPrimaryBrush}"
                          Margin="0,0,0,12"
                          Checked="NoiseSuppression_Changed"
                          Unchecked="NoiseSuppression_Changed">
                    <StackPanel>
                        <TextBlock Text="Noise Suppression" FontWeight="SemiBold"/>
                        <TextBlock Text="Reduces background noise"
                                   FontSize="11"
                                   Foreground="{StaticResource TextMutedBrush}"/>
                    </StackPanel>
                </CheckBox>

                <!-- Auto Gain Control -->
                <CheckBox x:Name="AutoGainCheck"
                          IsChecked="True"
                          Foreground="{StaticResource TextPrimaryBrush}"
                          Margin="0,0,0,12"
                          Checked="AutoGain_Changed"
                          Unchecked="AutoGain_Changed">
                    <StackPanel>
                        <TextBlock Text="Automatic Gain Control" FontWeight="SemiBold"/>
                        <TextBlock Text="Automatically adjusts your volume"
                                   FontSize="11"
                                   Foreground="{StaticResource TextMutedBrush}"/>
                    </StackPanel>
                </CheckBox>
            </StackPanel>

            <!-- Test Section -->
            <StackPanel Margin="0,0,0,24">
                <TextBlock Text="MIC TEST"
                           FontSize="11"
                           FontWeight="Bold"
                           Foreground="{StaticResource TextSecondaryBrush}"
                           Margin="0,0,0,8"/>
                <Button x:Name="TestMicButton"
                        Content="Let's Check"
                        Style="{StaticResource SecondaryButton}"
                        Padding="16,10"
                        HorizontalAlignment="Left"
                        Click="TestMic_Click"/>
            </StackPanel>

        </StackPanel>
    </ScrollViewer>
</UserControl>
