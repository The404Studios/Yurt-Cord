<UserControl x:Class="VeaMarketplace.Client.Controls.LoadingSkeleton"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml">

    <UserControl.Resources>
        <!-- Shimmer Animation -->
        <Storyboard x:Key="ShimmerAnimation" RepeatBehavior="Forever">
            <DoubleAnimation Storyboard.TargetName="ShimmerTranslate"
                             Storyboard.TargetProperty="X"
                             From="-300" To="600" Duration="0:0:1.5">
                <DoubleAnimation.EasingFunction>
                    <SineEase EasingMode="EaseInOut"/>
                </DoubleAnimation.EasingFunction>
            </DoubleAnimation>
        </Storyboard>

        <!-- Pulse Animation -->
        <Storyboard x:Key="PulseAnimation" RepeatBehavior="Forever">
            <DoubleAnimation Storyboard.TargetName="BaseRectangle"
                             Storyboard.TargetProperty="Opacity"
                             From="0.6" To="1" Duration="0:0:0.8"
                             AutoReverse="True">
                <DoubleAnimation.EasingFunction>
                    <SineEase EasingMode="EaseInOut"/>
                </DoubleAnimation.EasingFunction>
            </DoubleAnimation>
        </Storyboard>
    </UserControl.Resources>

    <UserControl.Triggers>
        <EventTrigger RoutedEvent="Loaded">
            <BeginStoryboard x:Name="ShimmerStoryboard" Storyboard="{StaticResource ShimmerAnimation}"/>
            <BeginStoryboard x:Name="PulseStoryboard" Storyboard="{StaticResource PulseAnimation}"/>
        </EventTrigger>
    </UserControl.Triggers>

    <Grid x:Name="RootGrid" ClipToBounds="True">
        <!-- Base skeleton shape -->
        <Border x:Name="BaseRectangle"
                Background="#1E1F22"
                CornerRadius="{Binding CornerRadius, RelativeSource={RelativeSource AncestorType=UserControl}}"
                Opacity="0.8"/>

        <!-- Shimmer effect -->
        <Border CornerRadius="{Binding CornerRadius, RelativeSource={RelativeSource AncestorType=UserControl}}"
                ClipToBounds="True">
            <Border Width="150" HorizontalAlignment="Left">
                <Border.Background>
                    <LinearGradientBrush StartPoint="0,0" EndPoint="1,0">
                        <GradientStop Color="Transparent" Offset="0"/>
                        <GradientStop Color="#20FFFFFF" Offset="0.4"/>
                        <GradientStop Color="#30FFFFFF" Offset="0.5"/>
                        <GradientStop Color="#20FFFFFF" Offset="0.6"/>
                        <GradientStop Color="Transparent" Offset="1"/>
                    </LinearGradientBrush>
                </Border.Background>
                <Border.RenderTransform>
                    <TranslateTransform x:Name="ShimmerTranslate" X="-300"/>
                </Border.RenderTransform>
            </Border>
        </Border>
    </Grid>
</UserControl>
