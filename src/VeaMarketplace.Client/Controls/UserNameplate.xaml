<UserControl x:Class="VeaMarketplace.Client.Controls.UserNameplate"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:converters="clr-namespace:VeaMarketplace.Client.Converters">

    <UserControl.Resources>
        <ResourceDictionary>
            <ResourceDictionary.MergedDictionaries>
                <ResourceDictionary Source="/Styles/Colors.xaml"/>
            </ResourceDictionary.MergedDictionaries>

            <converters:RoleToColorConverter x:Key="RoleToColor"/>
            <converters:RankToBadgeConverter x:Key="RankToBadge"/>
        </ResourceDictionary>
    </UserControl.Resources>

    <Grid>
        <StackPanel Orientation="Horizontal" VerticalAlignment="Center">
            <!-- Avatar Section (optional) -->
            <Grid x:Name="AvatarContainer" Margin="0,0,8,0" Visibility="Collapsed">
                <Border x:Name="AvatarBorder"
                        Width="32" Height="32"
                        CornerRadius="16"
                        Background="{StaticResource QuaternaryDarkBrush}">
                    <Ellipse x:Name="AvatarEllipse" Width="32" Height="32">
                        <Ellipse.Fill>
                            <ImageBrush x:Name="AvatarBrush" Stretch="UniformToFill"/>
                        </Ellipse.Fill>
                    </Ellipse>
                </Border>
                <!-- Online status indicator -->
                <Border x:Name="OnlineIndicator"
                        Width="12" Height="12"
                        CornerRadius="6"
                        BorderThickness="2"
                        BorderBrush="{StaticResource SecondaryDarkBrush}"
                        Background="{StaticResource AccentGreenBrush}"
                        HorizontalAlignment="Right"
                        VerticalAlignment="Bottom"
                        Margin="0,0,-2,-2"
                        Visibility="Collapsed"/>
            </Grid>

            <!-- Name and Badges -->
            <StackPanel Orientation="Horizontal" VerticalAlignment="Center">
                <!-- Username -->
                <TextBlock x:Name="UsernameText"
                           FontSize="14"
                           FontWeight="SemiBold"
                           Foreground="{StaticResource TextPrimaryBrush}"
                           VerticalAlignment="Center"/>

                <!-- Role Badge -->
                <Border x:Name="RoleBadge"
                        CornerRadius="3"
                        Padding="5,1"
                        Margin="6,0,0,0"
                        VerticalAlignment="Center"
                        Visibility="Collapsed">
                    <TextBlock x:Name="RoleBadgeText"
                               FontSize="9"
                               FontWeight="Bold"
                               Foreground="White"/>
                </Border>

                <!-- Rank Badge -->
                <Border x:Name="RankBadge"
                        CornerRadius="3"
                        Padding="5,1"
                        Margin="4,0,0,0"
                        VerticalAlignment="Center"
                        Visibility="Collapsed">
                    <TextBlock x:Name="RankBadgeText"
                               FontSize="9"
                               FontWeight="Medium"
                               Foreground="White"/>
                </Border>

                <!-- Custom Badges (icons) -->
                <ItemsControl x:Name="CustomBadges"
                              Margin="4,0,0,0"
                              VerticalAlignment="Center"
                              Visibility="Collapsed">
                    <ItemsControl.ItemsPanel>
                        <ItemsPanelTemplate>
                            <StackPanel Orientation="Horizontal"/>
                        </ItemsPanelTemplate>
                    </ItemsControl.ItemsPanel>
                </ItemsControl>
            </StackPanel>
        </StackPanel>
    </Grid>
</UserControl>
