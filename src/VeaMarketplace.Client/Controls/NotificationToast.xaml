<UserControl x:Class="VeaMarketplace.Client.Controls.NotificationToast"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             Width="380" MinHeight="80"
             MouseEnter="Toast_MouseEnter"
             MouseLeave="Toast_MouseLeave">

    <UserControl.Resources>
        <ResourceDictionary>
            <ResourceDictionary.MergedDictionaries>
                <ResourceDictionary Source="/Styles/Colors.xaml"/>
            </ResourceDictionary.MergedDictionaries>

            <Storyboard x:Key="SlideInAnimation">
                <DoubleAnimation Storyboard.TargetName="RootBorder"
                                 Storyboard.TargetProperty="RenderTransform.(TranslateTransform.X)"
                                 From="400" To="0"
                                 Duration="0:0:0.4">
                    <DoubleAnimation.EasingFunction>
                        <BackEase EasingMode="EaseOut" Amplitude="0.2"/>
                    </DoubleAnimation.EasingFunction>
                </DoubleAnimation>
                <DoubleAnimation Storyboard.TargetName="RootBorder"
                                 Storyboard.TargetProperty="Opacity"
                                 From="0" To="1"
                                 Duration="0:0:0.3"/>
            </Storyboard>

            <Storyboard x:Key="SlideOutAnimation">
                <DoubleAnimation Storyboard.TargetName="RootBorder"
                                 Storyboard.TargetProperty="RenderTransform.(TranslateTransform.X)"
                                 From="0" To="400"
                                 Duration="0:0:0.3">
                    <DoubleAnimation.EasingFunction>
                        <CubicEase EasingMode="EaseIn"/>
                    </DoubleAnimation.EasingFunction>
                </DoubleAnimation>
                <DoubleAnimation Storyboard.TargetName="RootBorder"
                                 Storyboard.TargetProperty="Opacity"
                                 From="1" To="0"
                                 Duration="0:0:0.3"/>
            </Storyboard>

            <!-- Icon Bounce Animation -->
            <Storyboard x:Key="IconBounce">
                <DoubleAnimationUsingKeyFrames Storyboard.TargetName="IconBorder"
                                               Storyboard.TargetProperty="(UIElement.RenderTransform).(ScaleTransform.ScaleX)">
                    <EasingDoubleKeyFrame KeyTime="0:0:0" Value="0"/>
                    <EasingDoubleKeyFrame KeyTime="0:0:0.2" Value="1.2"/>
                    <EasingDoubleKeyFrame KeyTime="0:0:0.35" Value="1"/>
                </DoubleAnimationUsingKeyFrames>
                <DoubleAnimationUsingKeyFrames Storyboard.TargetName="IconBorder"
                                               Storyboard.TargetProperty="(UIElement.RenderTransform).(ScaleTransform.ScaleY)">
                    <EasingDoubleKeyFrame KeyTime="0:0:0" Value="0"/>
                    <EasingDoubleKeyFrame KeyTime="0:0:0.2" Value="1.2"/>
                    <EasingDoubleKeyFrame KeyTime="0:0:0.35" Value="1"/>
                </DoubleAnimationUsingKeyFrames>
            </Storyboard>

            <!-- Toast Type Brushes - Yurt Cord Teal Theme -->
            <SolidColorBrush x:Key="ToastSuccessBrush" Color="#57F287"/>
            <SolidColorBrush x:Key="ToastErrorBrush" Color="#ED4245"/>
            <SolidColorBrush x:Key="ToastWarningBrush" Color="#FFB347"/>
            <SolidColorBrush x:Key="ToastInfoBrush" Color="#00B4D8"/>

            <!-- Action Button Style -->
            <Style x:Key="ToastActionButton" TargetType="Button">
                <Setter Property="Background" Value="Transparent"/>
                <Setter Property="Foreground" Value="{StaticResource AccentBrush}"/>
                <Setter Property="BorderThickness" Value="0"/>
                <Setter Property="Padding" Value="12,6"/>
                <Setter Property="Margin" Value="0,0,8,0"/>
                <Setter Property="Cursor" Value="Hand"/>
                <Setter Property="FontSize" Value="12"/>
                <Setter Property="FontWeight" Value="SemiBold"/>
                <Setter Property="Template">
                    <Setter.Value>
                        <ControlTemplate TargetType="Button">
                            <Border Background="{TemplateBinding Background}"
                                    CornerRadius="4" Padding="{TemplateBinding Padding}">
                                <ContentPresenter HorizontalAlignment="Center"
                                                  VerticalAlignment="Center"/>
                            </Border>
                        </ControlTemplate>
                    </Setter.Value>
                </Setter>
                <Style.Triggers>
                    <Trigger Property="IsMouseOver" Value="True">
                        <Setter Property="Background" Value="#22FFFFFF"/>
                    </Trigger>
                </Style.Triggers>
            </Style>
        </ResourceDictionary>
    </UserControl.Resources>

    <Border x:Name="RootBorder"
            Background="{StaticResource SecondaryDarkBrush}"
            CornerRadius="10"
            Margin="8"
            RenderTransformOrigin="0.5,0.5"
            ClipToBounds="True">
        <Border.RenderTransform>
            <TranslateTransform X="400"/>
        </Border.RenderTransform>
        <Border.Effect>
            <DropShadowEffect BlurRadius="24" ShadowDepth="6" Opacity="0.5" Color="Black"/>
        </Border.Effect>

        <Grid>
            <Grid.RowDefinitions>
                <RowDefinition Height="*"/>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
            </Grid.RowDefinitions>

            <!-- Main Content -->
            <Grid Grid.Row="0" Margin="16,14,12,10">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>

                <!-- Icon -->
                <Border x:Name="IconBorder" Grid.Column="0"
                        Width="40" Height="40"
                        CornerRadius="20"
                        Background="{StaticResource AccentBrush}"
                        Margin="0,0,14,0"
                        VerticalAlignment="Top"
                        RenderTransformOrigin="0.5,0.5">
                    <Border.RenderTransform>
                        <ScaleTransform ScaleX="1" ScaleY="1"/>
                    </Border.RenderTransform>
                    <TextBlock x:Name="IconText"
                               Text="&#x1F514;"
                               FontSize="18"
                               HorizontalAlignment="Center"
                               VerticalAlignment="Center"/>
                </Border>

                <!-- Content -->
                <StackPanel Grid.Column="1" VerticalAlignment="Top">
                    <TextBlock x:Name="TitleText"
                               FontSize="14"
                               FontWeight="SemiBold"
                               Foreground="{StaticResource TextPrimaryBrush}"
                               TextTrimming="CharacterEllipsis"
                               Margin="0,0,0,4"/>
                    <TextBlock x:Name="MessageText"
                               FontSize="13"
                               Foreground="{StaticResource TextSecondaryBrush}"
                               TextWrapping="Wrap"
                               MaxHeight="48"
                               LineHeight="18"/>
                    <TextBlock x:Name="TimestampText"
                               FontSize="11"
                               Foreground="{StaticResource TextMutedBrush}"
                               Margin="0,6,0,0"/>
                </StackPanel>

                <!-- Close Button -->
                <Button x:Name="CloseButton" Grid.Column="2"
                        Width="28" Height="28"
                        Background="Transparent"
                        BorderThickness="0"
                        Cursor="Hand"
                        VerticalAlignment="Top"
                        Click="CloseButton_Click"
                        ToolTip="Dismiss">
                    <Button.Style>
                        <Style TargetType="Button">
                            <Setter Property="Template">
                                <Setter.Value>
                                    <ControlTemplate TargetType="Button">
                                        <Border x:Name="CloseBg" Background="Transparent"
                                                CornerRadius="14">
                                            <TextBlock Text="&#x2715;" FontSize="12"
                                                       Foreground="{StaticResource TextMutedBrush}"
                                                       HorizontalAlignment="Center"
                                                       VerticalAlignment="Center"/>
                                        </Border>
                                        <ControlTemplate.Triggers>
                                            <Trigger Property="IsMouseOver" Value="True">
                                                <Setter TargetName="CloseBg" Property="Background" Value="#33FFFFFF"/>
                                            </Trigger>
                                        </ControlTemplate.Triggers>
                                    </ControlTemplate>
                                </Setter.Value>
                            </Setter>
                        </Style>
                    </Button.Style>
                </Button>
            </Grid>

            <!-- Action Buttons -->
            <StackPanel x:Name="ActionButtonsPanel" Grid.Row="1"
                        Orientation="Horizontal" Margin="56,0,12,10"
                        Visibility="Collapsed">
                <Button x:Name="PrimaryActionButton" Style="{StaticResource ToastActionButton}"
                        Click="PrimaryAction_Click"/>
                <Button x:Name="SecondaryActionButton" Style="{StaticResource ToastActionButton}"
                        Foreground="{StaticResource TextSecondaryBrush}"
                        Click="SecondaryAction_Click"/>
            </StackPanel>

            <!-- Progress Bar (countdown) -->
            <Grid Grid.Row="2" Height="3">
                <Border Background="{StaticResource QuaternaryDarkBrush}"
                        CornerRadius="0,0,10,10"/>
                <Border x:Name="ProgressBar"
                        Background="{StaticResource AccentBrush}"
                        CornerRadius="0,0,10,10"
                        HorizontalAlignment="Left"
                        RenderTransformOrigin="0,0.5">
                    <Border.RenderTransform>
                        <ScaleTransform x:Name="ProgressScale" ScaleX="1"/>
                    </Border.RenderTransform>
                </Border>
            </Grid>

            <!-- Accent Bar at Left -->
            <Border x:Name="AccentBar"
                    Width="4"
                    Background="{StaticResource AccentBrush}"
                    CornerRadius="10,0,0,10"
                    HorizontalAlignment="Left"
                    VerticalAlignment="Stretch"/>
        </Grid>
    </Border>
</UserControl>
