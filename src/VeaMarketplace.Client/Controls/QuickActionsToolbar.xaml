<UserControl x:Class="VeaMarketplace.Client.Controls.QuickActionsToolbar"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             HorizontalAlignment="Right" VerticalAlignment="Bottom"
             Margin="0,0,24,24">

    <UserControl.Resources>
        <!-- Floating Action Button Style -->
        <Style x:Key="FloatingActionButton" TargetType="Button">
            <Setter Property="Width" Value="56"/>
            <Setter Property="Height" Value="56"/>
            <Setter Property="Background" Value="{StaticResource AccentBlurpleBrush}"/>
            <Setter Property="Foreground" Value="White"/>
            <Setter Property="BorderThickness" Value="0"/>
            <Setter Property="Cursor" Value="Hand"/>
            <Setter Property="RenderTransformOrigin" Value="0.5,0.5"/>
            <Setter Property="RenderTransform">
                <Setter.Value>
                    <ScaleTransform ScaleX="1" ScaleY="1"/>
                </Setter.Value>
            </Setter>
            <Setter Property="Effect">
                <Setter.Value>
                    <DropShadowEffect BlurRadius="12" ShadowDepth="4" Opacity="0.4" Color="Black"/>
                </Setter.Value>
            </Setter>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Border Background="{TemplateBinding Background}"
                                CornerRadius="28">
                            <ContentPresenter HorizontalAlignment="Center"
                                              VerticalAlignment="Center"/>
                        </Border>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
            <Style.Triggers>
                <Trigger Property="IsMouseOver" Value="True">
                    <Trigger.EnterActions>
                        <BeginStoryboard>
                            <Storyboard>
                                <DoubleAnimation Storyboard.TargetProperty="(UIElement.RenderTransform).(ScaleTransform.ScaleX)"
                                               To="1.1" Duration="0:0:0.15">
                                    <DoubleAnimation.EasingFunction>
                                        <BackEase EasingMode="EaseOut" Amplitude="0.3"/>
                                    </DoubleAnimation.EasingFunction>
                                </DoubleAnimation>
                                <DoubleAnimation Storyboard.TargetProperty="(UIElement.RenderTransform).(ScaleTransform.ScaleY)"
                                               To="1.1" Duration="0:0:0.15">
                                    <DoubleAnimation.EasingFunction>
                                        <BackEase EasingMode="EaseOut" Amplitude="0.3"/>
                                    </DoubleAnimation.EasingFunction>
                                </DoubleAnimation>
                            </Storyboard>
                        </BeginStoryboard>
                    </Trigger.EnterActions>
                    <Trigger.ExitActions>
                        <BeginStoryboard>
                            <Storyboard>
                                <DoubleAnimation Storyboard.TargetProperty="(UIElement.RenderTransform).(ScaleTransform.ScaleX)"
                                               To="1" Duration="0:0:0.15"/>
                                <DoubleAnimation Storyboard.TargetProperty="(UIElement.RenderTransform).(ScaleTransform.ScaleY)"
                                               To="1" Duration="0:0:0.15"/>
                            </Storyboard>
                        </BeginStoryboard>
                    </Trigger.ExitActions>
                </Trigger>
            </Style.Triggers>
        </Style>

        <!-- Mini Action Button Style -->
        <Style x:Key="MiniActionButton" TargetType="Button">
            <Setter Property="Width" Value="44"/>
            <Setter Property="Height" Value="44"/>
            <Setter Property="Background" Value="{StaticResource SecondaryDarkBrush}"/>
            <Setter Property="Foreground" Value="{StaticResource TextPrimaryBrush}"/>
            <Setter Property="BorderThickness" Value="0"/>
            <Setter Property="Cursor" Value="Hand"/>
            <Setter Property="RenderTransformOrigin" Value="0.5,0.5"/>
            <Setter Property="RenderTransform">
                <Setter.Value>
                    <TransformGroup>
                        <ScaleTransform ScaleX="1" ScaleY="1"/>
                        <TranslateTransform X="0" Y="0"/>
                    </TransformGroup>
                </Setter.Value>
            </Setter>
            <Setter Property="Effect">
                <Setter.Value>
                    <DropShadowEffect BlurRadius="8" ShadowDepth="2" Opacity="0.3" Color="Black"/>
                </Setter.Value>
            </Setter>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Border Background="{TemplateBinding Background}"
                                CornerRadius="22">
                            <ContentPresenter HorizontalAlignment="Center"
                                              VerticalAlignment="Center"/>
                        </Border>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
            <Style.Triggers>
                <Trigger Property="IsMouseOver" Value="True">
                    <Setter Property="Background" Value="{StaticResource TertiaryDarkBrush}"/>
                </Trigger>
            </Style.Triggers>
        </Style>
    </UserControl.Resources>

    <StackPanel>
        <!-- Expandable Mini Actions -->
        <StackPanel x:Name="MiniActions" Opacity="0" Margin="0,0,6,12"
                    RenderTransformOrigin="0.5,1">
            <StackPanel.RenderTransform>
                <TranslateTransform Y="20"/>
            </StackPanel.RenderTransform>

            <!-- Scroll to Top -->
            <Button x:Name="ScrollTopButton" Style="{StaticResource MiniActionButton}"
                    ToolTip="Scroll to Top" Click="ScrollTop_Click" Margin="0,0,0,8">
                <TextBlock Text="&#x2191;" FontSize="18" FontWeight="Bold"/>
            </Button>

            <!-- Refresh -->
            <Button x:Name="RefreshButton" Style="{StaticResource MiniActionButton}"
                    ToolTip="Refresh" Click="Refresh_Click" Margin="0,0,0,8">
                <TextBlock Text="&#x21BB;" FontSize="18"/>
            </Button>

            <!-- Filter -->
            <Button x:Name="FilterButton" Style="{StaticResource MiniActionButton}"
                    ToolTip="Filter Products" Click="Filter_Click" Margin="0,0,0,8">
                <TextBlock Text="&#x2699;" FontSize="18"/>
            </Button>

            <!-- Create Listing -->
            <Button x:Name="CreateListingButton" Style="{StaticResource MiniActionButton}"
                    ToolTip="Create Listing" Click="CreateListing_Click"
                    Background="{StaticResource AccentGreenBrush}">
                <TextBlock Text="+" FontSize="22" FontWeight="Bold" Foreground="White"/>
            </Button>
        </StackPanel>

        <!-- Main FAB -->
        <Button x:Name="MainFab" Style="{StaticResource FloatingActionButton}"
                Click="MainFab_Click" ToolTip="Quick Actions">
            <TextBlock x:Name="FabIcon" Text="&#x2795;" FontSize="20" FontWeight="Bold"
                       RenderTransformOrigin="0.5,0.5">
                <TextBlock.RenderTransform>
                    <RotateTransform x:Name="FabIconRotation" Angle="0"/>
                </TextBlock.RenderTransform>
            </TextBlock>
        </Button>
    </StackPanel>

    <UserControl.Triggers>
        <EventTrigger RoutedEvent="Loaded">
            <BeginStoryboard>
                <Storyboard>
                    <!-- Bounce in animation for FAB -->
                    <DoubleAnimationUsingKeyFrames Storyboard.TargetName="MainFab"
                                                   Storyboard.TargetProperty="(UIElement.RenderTransform).(ScaleTransform.ScaleX)">
                        <EasingDoubleKeyFrame KeyTime="0:0:0" Value="0"/>
                        <EasingDoubleKeyFrame KeyTime="0:0:0.3" Value="1.1"/>
                        <EasingDoubleKeyFrame KeyTime="0:0:0.45" Value="1"/>
                    </DoubleAnimationUsingKeyFrames>
                    <DoubleAnimationUsingKeyFrames Storyboard.TargetName="MainFab"
                                                   Storyboard.TargetProperty="(UIElement.RenderTransform).(ScaleTransform.ScaleY)">
                        <EasingDoubleKeyFrame KeyTime="0:0:0" Value="0"/>
                        <EasingDoubleKeyFrame KeyTime="0:0:0.3" Value="1.1"/>
                        <EasingDoubleKeyFrame KeyTime="0:0:0.45" Value="1"/>
                    </DoubleAnimationUsingKeyFrames>
                </Storyboard>
            </BeginStoryboard>
        </EventTrigger>
    </UserControl.Triggers>
</UserControl>
